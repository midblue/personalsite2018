!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=37)}([function(t,e){function n(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var o=r(i);return[n].concat(i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"})).concat([o]).join("\n")}return[n].join("\n")}function r(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=n(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=h[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(o(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{for(var s=[],i=0;i<n.parts.length;i++)s.push(o(n.parts[i]));h[n.id]={id:n.id,refs:1,parts:s}}}}function i(){var t=document.createElement("style");return t.type="text/css",l.appendChild(t),t}function o(t){var e,n,r=document.querySelector("style["+y+'~="'+t.id+'"]');if(r){if(p)return m;r.parentNode.removeChild(r)}if(g){var o=d++;r=f||(f=i()),e=s.bind(null,r,o,!1),n=s.bind(null,r,o,!0)}else r=i(),e=a.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}function s(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function a(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),v.ssrId&&t.setAttribute(y,e.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var u="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!u)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=n(43),h={},l=u&&(document.head||document.getElementsByTagName("head")[0]),f=null,d=0,p=!1,m=function(){},v=null,y="data-vue-ssr-id",g="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n,i){p=n,v=i||{};var o=c(t,e);return r(o),function(e){for(var n=[],i=0;i<o.length;i++){var s=o[i],a=h[s.id];a.refs--,n.push(a)}e?(o=c(t,e),r(o)):o=[];for(var i=0;i<n.length;i++){var a=n[i];if(0===a.refs){for(var u=0;u<a.parts.length;u++)a.parts[u]();delete h[a.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t,e,n,r,i,o){var s,a=t=t||{},u=typeof t.default;"object"!==u&&"function"!==u||(s=t,a=t.default);var c="function"==typeof a?a.options:a;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId=i);var h;if(o?(h=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=h):r&&(h=r),h){var l=c.functional,f=l?c.render:c.beforeCreate;l?(c._injectStyles=h,c.render=function(t,e){return h.call(e),f(t,e)}):c.beforeCreate=f?[].concat(f,h):[h]}return{esModule:s,exports:a,options:c}}},function(t,e,n){"use strict";function r(t){n(55)}var i=n(13),o=n(57),s=n(2),a=r,u=s(i.a,o.a,!1,a,null,null);e.a=u.exports},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){e.msToString=function(t){return t=parseInt(t),t<1e3?"0s":t<6e4?Math.round(t/1e3)+"s":t<36e5?Math.round(t/1e3/60)+"m":t<864e5?Math.round(t/1e3/60/60)+"h":t<2592e6?Math.round(t/1e3/60/60/24)+"d":t<31104e6?Math.round(t/1e3/60/60/24/30)+"mo":Math.round(t/1e3/60/60/24/365)+"y"}},function(t,e,n){"use strict";(function(t,n){function r(t){return void 0===t||null===t}function i(t){return void 0!==t&&null!==t}function o(t){return!0===t}function s(t){return!1===t}function a(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function u(t){return null!==t&&"object"==typeof t}function c(t){return"[object Object]"===ao.call(t)}function h(t){return"[object RegExp]"===ao.call(t)}function l(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function f(t){return null==t?"":"object"==typeof t?JSON.stringify(t,null,2):String(t)}function d(t){var e=parseFloat(t);return isNaN(e)?t:e}function p(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}function m(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}function v(t,e){return ho.call(t,e)}function y(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}function g(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function b(t,e){return t.bind(e)}function w(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r}function _(t,e){for(var n in e)t[n]=e[n];return t}function S(t){for(var e={},n=0;n<t.length;n++)t[n]&&_(e,t[n]);return e}function T(t,e,n){}function E(t,e){if(t===e)return!0;var n=u(t),r=u(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every(function(t,n){return E(t,e[n])});if(i||o)return!1;var s=Object.keys(t),a=Object.keys(e);return s.length===a.length&&s.every(function(n){return E(t[n],e[n])})}catch(t){return!1}}function C(t,e){for(var n=0;n<t.length;n++)if(E(t[n],e))return n;return-1}function I(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function k(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function x(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function D(t){if(!Eo.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}function A(t){return"function"==typeof t&&/native code/.test(t.toString())}function N(t){Wo.target&&Ko.push(Wo.target),Wo.target=t}function O(){Wo.target=Ko.pop()}function R(t){return new Qo(void 0,void 0,void 0,String(t))}function L(t){var e=new Qo(t.tag,t.data,t.children,t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.isCloned=!0,e}function M(t){Jo=t}function P(t,e,n){t.__proto__=e}function F(t,e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];x(t,o,e[o])}}function U(t,e){if(u(t)&&!(t instanceof Qo)){var n;return v(t,"__ob__")&&t.__ob__ instanceof Zo?n=t.__ob__:Jo&&!Bo()&&(Array.isArray(t)||c(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Zo(t)),e&&n&&n.vmCount++,n}}function B(t,e,n,r,i){var o=new Wo,s=Object.getOwnPropertyDescriptor(t,e);if(!s||!1!==s.configurable){var a=s&&s.get;a||2!==arguments.length||(n=t[e]);var u=s&&s.set,c=!i&&U(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=a?a.call(t):n;return Wo.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(e)&&j(e))),e},set:function(e){var r=a?a.call(t):n;e===r||e!==e&&r!==r||(u?u.call(t,e):n=e,c=!i&&U(e),o.notify())}})}}function q(t,e,n){if(Array.isArray(t)&&l(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(B(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function V(t,e){if(Array.isArray(t)&&l(e))return void t.splice(e,1);var n=t.__ob__;t._isVue||n&&n.vmCount||v(t,e)&&(delete t[e],n&&n.dep.notify())}function j(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&j(e)}function $(t,e){if(!e)return t;for(var n,r,i,o=Object.keys(e),s=0;s<o.length;s++)n=o[s],r=t[n],i=e[n],v(t,n)?c(r)&&c(i)&&$(r,i):q(t,n,i);return t}function W(t,e,n){return n?function(){var r="function"==typeof e?e.call(n,n):e,i="function"==typeof t?t.call(n,n):t;return r?$(r,i):i}:e?t?function(){return $("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function K(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t}function Q(t,e,n,r){var i=Object.create(t||null);return e?_(i,e):i}function H(t,e){var n=t.props;if(n){var r,i,o,s={};if(Array.isArray(n))for(r=n.length;r--;)"string"==typeof(i=n[r])&&(o=fo(i),s[o]={type:null});else if(c(n))for(var a in n)i=n[a],o=fo(a),s[o]=c(i)?i:{type:i};t.props=s}}function z(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(c(n))for(var o in n){var s=n[o];r[o]=c(s)?_({from:o},s):{from:s}}}}function G(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"==typeof r&&(e[n]={bind:r,update:r})}}function X(t,e,n){function r(r){var i=ts[r]||rs;u[r]=i(t[r],e[r],n,r)}"function"==typeof e&&(e=e.options),H(e,n),z(e,n),G(e);var i=e.extends;if(i&&(t=X(t,i,n)),e.mixins)for(var o=0,s=e.mixins.length;o<s;o++)t=X(t,e.mixins[o],n);var a,u={};for(a in t)r(a);for(a in e)v(t,a)||r(a);return u}function Y(t,e,n,r){if("string"==typeof n){var i=t[e];if(v(i,n))return i[n];var o=fo(n);if(v(i,o))return i[o];var s=po(o);if(v(i,s))return i[s];return i[n]||i[o]||i[s]}}function J(t,e,n,r){var i=e[t],o=!v(n,t),s=n[t],a=nt(Boolean,i.type);if(a>-1)if(o&&!v(i,"default"))s=!1;else if(""===s||s===vo(t)){var u=nt(String,i.type);(u<0||a<u)&&(s=!0)}if(void 0===s){s=Z(r,i,t);var c=Jo;M(!0),U(s),M(c)}return s}function Z(t,e,n){if(v(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"==typeof r&&"Function"!==tt(e.type)?r.call(t):r}}function tt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function et(t,e){return tt(t)===tt(e)}function nt(t,e){if(!Array.isArray(e))return et(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(et(e[n],t))return n;return-1}function rt(t,e,n){if(e)for(var r=e;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var s=!1===i[o].call(r,t,e,n);if(s)return}catch(t){it(t,r,"errorCaptured hook")}}it(t,e,n)}function it(t,e,n){if(To.errorHandler)try{return To.errorHandler.call(null,t,e,n)}catch(t){ot(t,null,"config.errorHandler")}ot(t,e,n)}function ot(t,e,n){if(!Io&&!ko||"undefined"==typeof console)throw t;console.error(t)}function st(){os=!1;var t=is.slice(0);is.length=0;for(var e=0;e<t.length;e++)t[e]()}function at(t){return t._withTask||(t._withTask=function(){ss=!0;var e=t.apply(null,arguments);return ss=!1,e})}function ut(t,e){var n;if(is.push(function(){if(t)try{t.call(e)}catch(t){rt(t,e,"nextTick")}else n&&n(e)}),os||(os=!0,ss?ns():es()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){n=t})}function ct(t){ht(t,ls),ls.clear()}function ht(t,e){var n,r,i=Array.isArray(t);if(!(!i&&!u(t)||Object.isFrozen(t)||t instanceof Qo)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(i)for(n=t.length;n--;)ht(t[n],e);else for(r=Object.keys(t),n=r.length;n--;)ht(t[r[n]],e)}}function lt(t){function e(){var t=arguments,n=e.fns;if(!Array.isArray(n))return n.apply(null,arguments);for(var r=n.slice(),i=0;i<r.length;i++)r[i].apply(null,t)}return e.fns=t,e}function ft(t,e,n,i,o){var s,a,u,c;for(s in t)a=t[s],u=e[s],c=fs(s),r(a)||(r(u)?(r(a.fns)&&(a=t[s]=lt(a)),n(c.name,a,c.once,c.capture,c.passive,c.params)):a!==u&&(u.fns=a,t[s]=u));for(s in e)r(t[s])&&(c=fs(s),i(c.name,e[s],c.capture))}function dt(t,e,n){function s(){n.apply(this,arguments),m(a.fns,s)}t instanceof Qo&&(t=t.data.hook||(t.data.hook={}));var a,u=t[e];r(u)?a=lt([s]):i(u.fns)&&o(u.merged)?(a=u,a.fns.push(s)):a=lt([u,s]),a.merged=!0,t[e]=a}function pt(t,e,n){var o=e.options.props;if(!r(o)){var s={},a=t.attrs,u=t.props;if(i(a)||i(u))for(var c in o){var h=vo(c);mt(s,u,c,h,!0)||mt(s,a,c,h,!1)}return s}}function mt(t,e,n,r,o){if(i(e)){if(v(e,n))return t[n]=e[n],o||delete e[n],!0;if(v(e,r))return t[n]=e[r],o||delete e[r],!0}return!1}function vt(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function yt(t){return a(t)?[R(t)]:Array.isArray(t)?bt(t):void 0}function gt(t){return i(t)&&i(t.text)&&s(t.isComment)}function bt(t,e){var n,s,u,c,h=[];for(n=0;n<t.length;n++)s=t[n],r(s)||"boolean"==typeof s||(u=h.length-1,c=h[u],Array.isArray(s)?s.length>0&&(s=bt(s,(e||"")+"_"+n),gt(s[0])&&gt(c)&&(h[u]=R(c.text+s[0].text),s.shift()),h.push.apply(h,s)):a(s)?gt(c)?h[u]=R(c.text+s):""!==s&&h.push(R(s)):gt(s)&&gt(c)?h[u]=R(c.text+s.text):(o(t._isVList)&&i(s.tag)&&r(s.key)&&i(e)&&(s.key="__vlist"+e+"_"+n+"__"),h.push(s)));return h}function wt(t,e){return(t.__esModule||Vo&&"Module"===t[Symbol.toStringTag])&&(t=t.default),u(t)?e.extend(t):t}function _t(t,e,n,r,i){var o=zo();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}function St(t,e,n){if(o(t.error)&&i(t.errorComp))return t.errorComp;if(i(t.resolved))return t.resolved;if(o(t.loading)&&i(t.loadingComp))return t.loadingComp;if(!i(t.contexts)){var s=t.contexts=[n],a=!0,c=function(){for(var t=0,e=s.length;t<e;t++)s[t].$forceUpdate()},h=I(function(n){t.resolved=wt(n,e),a||c()}),l=I(function(e){i(t.errorComp)&&(t.error=!0,c())}),f=t(h,l);return u(f)&&("function"==typeof f.then?r(t.resolved)&&f.then(h,l):i(f.component)&&"function"==typeof f.component.then&&(f.component.then(h,l),i(f.error)&&(t.errorComp=wt(f.error,e)),i(f.loading)&&(t.loadingComp=wt(f.loading,e),0===f.delay?t.loading=!0:setTimeout(function(){r(t.resolved)&&r(t.error)&&(t.loading=!0,c())},f.delay||200)),i(f.timeout)&&setTimeout(function(){r(t.resolved)&&l(null)},f.timeout))),a=!1,t.loading?t.loadingComp:t.resolved}t.contexts.push(n)}function Tt(t){return t.isComment&&t.asyncFactory}function Et(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(i(n)&&(i(n.componentOptions)||Tt(n)))return n}}function Ct(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&xt(t,e)}function It(t,e,n){n?hs.$once(t,e):hs.$on(t,e)}function kt(t,e){hs.$off(t,e)}function xt(t,e,n){hs=t,ft(e,n||{},It,kt,t),hs=void 0}function Dt(t,e){var n={};if(!t)return n;for(var r=0,i=t.length;r<i;r++){var o=t[r],s=o.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,o.context!==e&&o.fnContext!==e||!s||null==s.slot)(n.default||(n.default=[])).push(o);else{var a=s.slot,u=n[a]||(n[a]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(At)&&delete n[c];return n}function At(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Nt(t,e){e=e||{};for(var n=0;n<t.length;n++)Array.isArray(t[n])?Nt(t[n],e):e[t[n].key]=t[n].fn;return e}function Ot(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function Rt(t,e,n){t.$el=e,t.$options.render||(t.$options.render=zo),Ut(t,"beforeMount");var r;return r=function(){t._update(t._render(),n)},new _s(t,r,T,null,!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Ut(t,"mounted")),t}function Lt(t,e,n,r,i){var o=!!(i||t.$options._renderChildren||r.data.scopedSlots||t.$scopedSlots!==so);if(t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r),t.$options._renderChildren=i,t.$attrs=r.data.attrs||so,t.$listeners=n||so,e&&t.$options.props){M(!1);for(var s=t._props,a=t.$options._propKeys||[],u=0;u<a.length;u++){var c=a[u],h=t.$options.props;s[c]=J(c,h,e,t)}M(!0),t.$options.propsData=e}n=n||so;var l=t.$options._parentListeners;t.$options._parentListeners=n,xt(t,n,l),o&&(t.$slots=Dt(i,r.context),t.$forceUpdate())}function Mt(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Pt(t,e){if(e){if(t._directInactive=!1,Mt(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Pt(t.$children[n]);Ut(t,"activated")}}function Ft(t,e){if(!(e&&(t._directInactive=!0,Mt(t))||t._inactive)){t._inactive=!0;for(var n=0;n<t.$children.length;n++)Ft(t.$children[n]);Ut(t,"deactivated")}}function Ut(t,e){N();var n=t.$options[e];if(n)for(var r=0,i=n.length;r<i;r++)try{n[r].call(t)}catch(n){rt(n,t,e+" hook")}t._hasHookEvent&&t.$emit("hook:"+e),O()}function Bt(){bs=ps.length=ms.length=0,vs={},ys=gs=!1}function qt(){gs=!0;var t,e;for(ps.sort(function(t,e){return t.id-e.id}),bs=0;bs<ps.length;bs++)t=ps[bs],e=t.id,vs[e]=null,t.run();var n=ms.slice(),r=ps.slice();Bt(),$t(n),Vt(r),qo&&To.devtools&&qo.emit("flush")}function Vt(t){for(var e=t.length;e--;){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&Ut(r,"updated")}}function jt(t){t._inactive=!1,ms.push(t)}function $t(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Pt(t[e],!0)}function Wt(t){var e=t.id;if(null==vs[e]){if(vs[e]=!0,gs){for(var n=ps.length-1;n>bs&&ps[n].id>t.id;)n--;ps.splice(n+1,0,t)}else ps.push(t);ys||(ys=!0,ut(qt))}}function Kt(t,e,n){Ss.get=function(){return this[e][n]},Ss.set=function(t){this[e][n]=t},Object.defineProperty(t,n,Ss)}function Qt(t){t._watchers=[];var e=t.$options;e.props&&Ht(t,e.props),e.methods&&Zt(t,e.methods),e.data?zt(t):U(t._data={},!0),e.computed&&Xt(t,e.computed),e.watch&&e.watch!==Lo&&te(t,e.watch)}function Ht(t,e){var n=t.$options.propsData||{},r=t._props={},i=t.$options._propKeys=[];!t.$parent||M(!1);for(var o in e)!function(o){i.push(o);var s=J(o,e,n,t);B(r,o,s),o in t||Kt(t,"_props",o)}(o);M(!0)}function zt(t){var e=t.$options.data;e=t._data="function"==typeof e?Gt(e,t):e||{},c(e)||(e={});for(var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);i--;){var o=n[i];r&&v(r,o)||k(o)||Kt(t,"_data",o)}U(e,!0)}function Gt(t,e){N();try{return t.call(e,e)}catch(t){return rt(t,e,"data()"),{}}finally{O()}}function Xt(t,e){var n=t._computedWatchers=Object.create(null),r=Bo();for(var i in e){var o=e[i],s="function"==typeof o?o:o.get;r||(n[i]=new _s(t,s||T,T,Ts)),i in t||Yt(t,i,o)}}function Yt(t,e,n){var r=!Bo();"function"==typeof n?(Ss.get=r?Jt(e):n,Ss.set=T):(Ss.get=n.get?r&&!1!==n.cache?Jt(e):n.get:T,Ss.set=n.set?n.set:T),Object.defineProperty(t,e,Ss)}function Jt(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),Wo.target&&e.depend(),e.value}}function Zt(t,e){t.$options.props;for(var n in e)t[n]=null==e[n]?T:yo(e[n],t)}function te(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)ee(t,n,r[i]);else ee(t,n,r)}}function ee(t,e,n,r){return c(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,r)}function ne(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}function re(t){var e=ie(t.$options.inject,t);e&&(M(!1),Object.keys(e).forEach(function(n){B(t,n,e[n])}),M(!0))}function ie(t,e){if(t){for(var n=Object.create(null),r=Vo?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):Object.keys(t),i=0;i<r.length;i++){for(var o=r[i],s=t[o].from,a=e;a;){if(a._provided&&v(a._provided,s)){n[o]=a._provided[s];break}a=a.$parent}if(!a&&"default"in t[o]){var u=t[o].default;n[o]="function"==typeof u?u.call(e):u}}return n}}function oe(t,e){var n,r,o,s,a;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),r=0,o=t.length;r<o;r++)n[r]=e(t[r],r);else if("number"==typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(u(t))for(s=Object.keys(t),n=new Array(s.length),r=0,o=s.length;r<o;r++)a=s[r],n[r]=e(t[a],a,r);return i(n)&&(n._isVList=!0),n}function se(t,e,n,r){var i,o=this.$scopedSlots[t];if(o)n=n||{},r&&(n=_(_({},r),n)),i=o(n)||e;else{var s=this.$slots[t];s&&(s._rendered=!0),i=s||e}var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function ae(t){return Y(this.$options,"filters",t,!0)||bo}function ue(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function ce(t,e,n,r,i){var o=To.keyCodes[e]||n;return i&&r&&!To.keyCodes[e]?ue(i,r):o?ue(o,t):r?vo(r)!==e:void 0}function he(t,e,n,r,i){if(n)if(u(n)){Array.isArray(n)&&(n=S(n));var o;for(var s in n)!function(s){if("class"===s||"style"===s||co(s))o=t;else{var a=t.attrs&&t.attrs.type;o=r||To.mustUseProp(e,a,s)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}if(!(s in o)&&(o[s]=n[s],i)){(t.on||(t.on={}))["update:"+s]=function(t){n[s]=t}}}(s)}else;return t}function le(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e?r:(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),de(r,"__static__"+t,!1),r)}function fe(t,e,n){return de(t,"__once__"+e+(n?"_"+n:""),!0),t}function de(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&pe(t[r],e+"_"+r,n);else pe(t,e,n)}function pe(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function me(t,e){if(e)if(c(e)){var n=t.on=t.on?_({},t.on):{};for(var r in e){var i=n[r],o=e[r];n[r]=i?[].concat(i,o):o}}else;return t}function ve(t){t._o=fe,t._n=d,t._s=f,t._l=oe,t._t=se,t._q=E,t._i=C,t._m=le,t._f=ae,t._k=ce,t._b=he,t._v=R,t._e=zo,t._u=Nt,t._g=me}function ye(t,e,n,r,i){var s,a=i.options;v(r,"_uid")?(s=Object.create(r),s._original=r):(s=r,r=r._original);var u=o(a._compiled),c=!u;this.data=t,this.props=e,this.children=n,this.parent=r,this.listeners=t.on||so,this.injections=ie(a.inject,r),this.slots=function(){return Dt(n,r)},u&&(this.$options=a,this.$slots=this.slots(),this.$scopedSlots=t.scopedSlots||so),a._scopeId?this._c=function(t,e,n,i){var o=Ce(s,t,e,n,i,c);return o&&!Array.isArray(o)&&(o.fnScopeId=a._scopeId,o.fnContext=r),o}:this._c=function(t,e,n,r){return Ce(s,t,e,n,r,c)}}function ge(t,e,n,r,o){var s=t.options,a={},u=s.props;if(i(u))for(var c in u)a[c]=J(c,u,e||so);else i(n.attrs)&&we(a,n.attrs),i(n.props)&&we(a,n.props);var h=new ye(n,a,o,r,t),l=s.render.call(null,h._c,h);if(l instanceof Qo)return be(l,n,h.parent,s);if(Array.isArray(l)){for(var f=yt(l)||[],d=new Array(f.length),p=0;p<f.length;p++)d[p]=be(f[p],n,h.parent,s);return d}}function be(t,e,n,r){var i=L(t);return i.fnContext=n,i.fnOptions=r,e.slot&&((i.data||(i.data={})).slot=e.slot),i}function we(t,e){for(var n in e)t[fo(n)]=e[n]}function _e(t,e,n,s,a){if(!r(t)){var c=n.$options._base;if(u(t)&&(t=c.extend(t)),"function"==typeof t){var h;if(r(t.cid)&&(h=t,void 0===(t=St(h,c,n))))return _t(h,e,n,s,a);e=e||{},Ne(t),i(e.model)&&Ee(t.options,e);var l=pt(e,t,a);if(o(t.options.functional))return ge(t,l,e,n,s);var f=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var d=e.slot;e={},d&&(e.slot=d)}Te(e);var p=t.options.name||a;return new Qo("vue-component-"+t.cid+(p?"-"+p:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:l,listeners:f,tag:a,children:s},h)}}}function Se(t,e,n,r){var o={_isComponent:!0,parent:e,_parentVnode:t,_parentElm:n||null,_refElm:r||null},s=t.data.inlineTemplate;return i(s)&&(o.render=s.render,o.staticRenderFns=s.staticRenderFns),new t.componentOptions.Ctor(o)}function Te(t){for(var e=t.hook||(t.hook={}),n=0;n<Cs.length;n++){var r=Cs[n];e[r]=Es[r]}}function Ee(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.props||(e.props={}))[n]=e.model.value;var o=e.on||(e.on={});i(o[r])?o[r]=[e.model.callback].concat(o[r]):o[r]=e.model.callback}function Ce(t,e,n,r,i,s){return(Array.isArray(n)||a(n))&&(i=r,r=n,n=void 0),o(s)&&(i=ks),Ie(t,e,n,r,i)}function Ie(t,e,n,r,o){if(i(n)&&i(n.__ob__))return zo();if(i(n)&&i(n.is)&&(e=n.is),!e)return zo();Array.isArray(r)&&"function"==typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===ks?r=yt(r):o===Is&&(r=vt(r));var s,a;if("string"==typeof e){var u;a=t.$vnode&&t.$vnode.ns||To.getTagNamespace(e),s=To.isReservedTag(e)?new Qo(To.parsePlatformTagName(e),n,r,void 0,void 0,t):i(u=Y(t.$options,"components",e))?_e(u,n,t,r,e):new Qo(e,n,r,void 0,void 0,t)}else s=_e(e,n,t,r);return Array.isArray(s)?s:i(s)?(i(a)&&ke(s,a),i(n)&&xe(n),s):zo()}function ke(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),i(t.children))for(var s=0,a=t.children.length;s<a;s++){var u=t.children[s];i(u.tag)&&(r(u.ns)||o(n)&&"svg"!==u.tag)&&ke(u,e,n)}}function xe(t){u(t.style)&&ct(t.style),u(t.class)&&ct(t.class)}function De(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,r=n&&n.context;t.$slots=Dt(e._renderChildren,r),t.$scopedSlots=so,t._c=function(e,n,r,i){return Ce(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return Ce(t,e,n,r,i,!0)};var i=n&&n.data;B(t,"$attrs",i&&i.attrs||so,null,!0),B(t,"$listeners",e._parentListeners||so,null,!0)}function Ae(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r,n._parentElm=e._parentElm,n._refElm=e._refElm;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function Ne(t){var e=t.options;if(t.super){var n=Ne(t.super);if(n!==t.superOptions){t.superOptions=n;var r=Oe(t);r&&_(t.extendOptions,r),e=t.options=X(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function Oe(t){var e,n=t.options,r=t.extendOptions,i=t.sealedOptions;for(var o in n)n[o]!==i[o]&&(e||(e={}),e[o]=Re(n[o],r[o],i[o]));return e}function Re(t,e,n){if(Array.isArray(t)){var r=[];n=Array.isArray(n)?n:[n],e=Array.isArray(e)?e:[e];for(var i=0;i<t.length;i++)(e.indexOf(t[i])>=0||n.indexOf(t[i])<0)&&r.push(t[i]);return r}return t}function Le(t){this._init(t)}function Me(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=w(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}function Pe(t){t.mixin=function(t){return this.options=X(this.options,t),this}}function Fe(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var o=t.name||n.options.name,s=function(t){this._init(t)};return s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.cid=e++,s.options=X(n.options,t),s.super=n,s.options.props&&Ue(s),s.options.computed&&Be(s),s.extend=n.extend,s.mixin=n.mixin,s.use=n.use,_o.forEach(function(t){s[t]=n[t]}),o&&(s.options.components[o]=s),s.superOptions=n.options,s.extendOptions=t,s.sealedOptions=_({},s.options),i[r]=s,s}}function Ue(t){var e=t.options.props;for(var n in e)Kt(t.prototype,"_props",n)}function Be(t){var e=t.options.computed;for(var n in e)Yt(t.prototype,n,e[n])}function qe(t){_o.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&c(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}function Ve(t){return t&&(t.Ctor.options.name||t.tag)}function je(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!h(t)&&t.test(e)}function $e(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var s=n[o];if(s){var a=Ve(s.componentOptions);a&&!e(a)&&We(n,o,r,i)}}}function We(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,m(n,e)}function Ke(t){for(var e=t.data,n=t,r=t;i(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=Qe(r.data,e));for(;i(n=n.parent);)n&&n.data&&(e=Qe(e,n.data));return He(e.staticClass,e.class)}function Qe(t,e){return{staticClass:ze(t.staticClass,e.staticClass),class:i(t.class)?[t.class,e.class]:e.class}}function He(t,e){return i(t)||i(e)?ze(t,Ge(e)):""}function ze(t,e){return t?e?t+" "+e:t:e||""}function Ge(t){return Array.isArray(t)?Xe(t):u(t)?Ye(t):"string"==typeof t?t:""}function Xe(t){for(var e,n="",r=0,o=t.length;r<o;r++)i(e=Ge(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function Ye(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}function Je(t){return Js(t)?"svg":"math"===t?"math":void 0}function Ze(t){if(!Io)return!0;if(ta(t))return!1;if(t=t.toLowerCase(),null!=ea[t])return ea[t];var e=document.createElement(t);return t.indexOf("-")>-1?ea[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:ea[t]=/HTMLUnknownElement/.test(e.toString())}function tn(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function en(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)}function nn(t,e){return document.createElementNS(Xs[t],e)}function rn(t){return document.createTextNode(t)}function on(t){return document.createComment(t)}function sn(t,e,n){t.insertBefore(e,n)}function an(t,e){t.removeChild(e)}function un(t,e){t.appendChild(e)}function cn(t){return t.parentNode}function hn(t){return t.nextSibling}function ln(t){return t.tagName}function fn(t,e){t.textContent=e}function dn(t,e){t.setAttribute(e,"")}function pn(t,e){var n=t.data.ref;if(i(n)){var r=t.context,o=t.componentInstance||t.elm,s=r.$refs;e?Array.isArray(s[n])?m(s[n],o):s[n]===o&&(s[n]=void 0):t.data.refInFor?Array.isArray(s[n])?s[n].indexOf(o)<0&&s[n].push(o):s[n]=[o]:s[n]=o}}function mn(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&i(t.data)===i(e.data)&&vn(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&r(e.asyncFactory.error))}function vn(t,e){if("input"!==t.tag)return!0;var n,r=i(n=t.data)&&i(n=n.attrs)&&n.type,o=i(n=e.data)&&i(n=n.attrs)&&n.type;return r===o||na(r)&&na(o)}function yn(t,e,n){var r,o,s={};for(r=e;r<=n;++r)o=t[r].key,i(o)&&(s[o]=r);return s}function gn(t,e){(t.data.directives||e.data.directives)&&bn(t,e)}function bn(t,e){var n,r,i,o=t===oa,s=e===oa,a=wn(t.data.directives,t.context),u=wn(e.data.directives,e.context),c=[],h=[];for(n in u)r=a[n],i=u[n],r?(i.oldValue=r.value,Sn(i,"update",e,t),i.def&&i.def.componentUpdated&&h.push(i)):(Sn(i,"bind",e,t),i.def&&i.def.inserted&&c.push(i));if(c.length){var l=function(){for(var n=0;n<c.length;n++)Sn(c[n],"inserted",e,t)};o?dt(e,"insert",l):l()}if(h.length&&dt(e,"postpatch",function(){for(var n=0;n<h.length;n++)Sn(h[n],"componentUpdated",e,t)}),!o)for(n in a)u[n]||Sn(a[n],"unbind",t,t,s)}function wn(t,e){var n=Object.create(null);if(!t)return n;var r,i;for(r=0;r<t.length;r++)i=t[r],i.modifiers||(i.modifiers=ua),n[_n(i)]=i,i.def=Y(e.$options,"directives",i.name,!0);return n}function _n(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Sn(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(r){rt(r,n.context,"directive "+t.name+" "+e+" hook")}}function Tn(t,e){var n=e.componentOptions;if(!(i(n)&&!1===n.Ctor.options.inheritAttrs||r(t.data.attrs)&&r(e.data.attrs))){var o,s,a=e.elm,u=t.data.attrs||{},c=e.data.attrs||{};i(c.__ob__)&&(c=e.data.attrs=_({},c));for(o in c)s=c[o],u[o]!==s&&En(a,o,s);(Ao||Oo)&&c.value!==u.value&&En(a,"value",c.value);for(o in u)r(c[o])&&(Hs(o)?a.removeAttributeNS(Qs,zs(o)):Ws(o)||a.removeAttribute(o))}}function En(t,e,n){t.tagName.indexOf("-")>-1?Cn(t,e,n):Ks(e)?Gs(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Ws(e)?t.setAttribute(e,Gs(n)||"false"===n?"false":"true"):Hs(e)?Gs(n)?t.removeAttributeNS(Qs,zs(e)):t.setAttributeNS(Qs,e,n):Cn(t,e,n)}function Cn(t,e,n){if(Gs(n))t.removeAttribute(e);else{if(Ao&&!No&&"TEXTAREA"===t.tagName&&"placeholder"===e&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}function In(t,e){var n=e.elm,o=e.data,s=t.data;if(!(r(o.staticClass)&&r(o.class)&&(r(s)||r(s.staticClass)&&r(s.class)))){var a=Ke(e),u=n._transitionClasses;i(u)&&(a=ze(a,Ge(u))),a!==n._prevClass&&(n.setAttribute("class",a),n._prevClass=a)}}function kn(t){function e(){(s||(s=[])).push(t.slice(p,i).trim()),p=i+1}var n,r,i,o,s,a=!1,u=!1,c=!1,h=!1,l=0,f=0,d=0,p=0;for(i=0;i<t.length;i++)if(r=n,n=t.charCodeAt(i),a)39===n&&92!==r&&(a=!1);else if(u)34===n&&92!==r&&(u=!1);else if(c)96===n&&92!==r&&(c=!1);else if(h)47===n&&92!==r&&(h=!1);else if(124!==n||124===t.charCodeAt(i+1)||124===t.charCodeAt(i-1)||l||f||d){switch(n){case 34:u=!0;break;case 39:a=!0;break;case 96:c=!0;break;case 40:d++;break;case 41:d--;break;case 91:f++;break;case 93:f--;break;case 123:l++;break;case 125:l--}if(47===n){for(var m=i-1,v=void 0;m>=0&&" "===(v=t.charAt(m));m--);v&&fa.test(v)||(h=!0)}}else void 0===o?(p=i+1,o=t.slice(0,i).trim()):e();if(void 0===o?o=t.slice(0,i).trim():0!==p&&e(),s)for(i=0;i<s.length;i++)o=xn(o,s[i]);return o}function xn(t,e){var n=e.indexOf("(");if(n<0)return'_f("'+e+'")('+t+")";var r=e.slice(0,n),i=e.slice(n+1);return'_f("'+r+'")('+t+(")"!==i?","+i:i)}function Dn(t){console.error("[Vue compiler]: "+t)}function An(t,e){return t?t.map(function(t){return t[e]}).filter(function(t){return t}):[]}function Nn(t,e,n){(t.props||(t.props=[])).push({name:e,value:n}),t.plain=!1}function On(t,e,n){(t.attrs||(t.attrs=[])).push({name:e,value:n}),t.plain=!1}function Rn(t,e,n){t.attrsMap[e]=n,t.attrsList.push({name:e,value:n})}function Ln(t,e,n,r,i,o){(t.directives||(t.directives=[])).push({name:e,rawName:n,value:r,arg:i,modifiers:o}),t.plain=!1}function Mn(t,e,n,r,i,o){r=r||so,r.capture&&(delete r.capture,e="!"+e),r.once&&(delete r.once,e="~"+e),r.passive&&(delete r.passive,e="&"+e),"click"===e&&(r.right?(e="contextmenu",delete r.right):r.middle&&(e="mouseup"));var s;r.native?(delete r.native,s=t.nativeEvents||(t.nativeEvents={})):s=t.events||(t.events={});var a={value:n.trim()};r!==so&&(a.modifiers=r);var u=s[e];Array.isArray(u)?i?u.unshift(a):u.push(a):s[e]=u?i?[a,u]:[u,a]:a,t.plain=!1}function Pn(t,e,n){var r=Fn(t,":"+e)||Fn(t,"v-bind:"+e);if(null!=r)return kn(r);if(!1!==n){var i=Fn(t,e);if(null!=i)return JSON.stringify(i)}}function Fn(t,e,n){var r;if(null!=(r=t.attrsMap[e]))for(var i=t.attrsList,o=0,s=i.length;o<s;o++)if(i[o].name===e){i.splice(o,1);break}return n&&delete t.attrsMap[e],r}function Un(t,e,n){var r=n||{},i=r.number,o=r.trim,s="$$v";o&&(s="(typeof $$v === 'string'? $$v.trim(): $$v)"),i&&(s="_n("+s+")");var a=Bn(e,s);t.model={value:"("+e+")",expression:'"'+e+'"',callback:"function ($$v) {"+a+"}"}}function Bn(t,e){var n=qn(t);return null===n.key?t+"="+e:"$set("+n.exp+", "+n.key+", "+e+")"}function qn(t){if(t=t.trim(),Os=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<Os-1)return Ms=t.lastIndexOf("."),Ms>-1?{exp:t.slice(0,Ms),key:'"'+t.slice(Ms+1)+'"'}:{exp:t,key:null};for(Rs=t,Ms=Ps=Fs=0;!jn();)Ls=Vn(),$n(Ls)?Kn(Ls):91===Ls&&Wn(Ls);return{exp:t.slice(0,Ps),key:t.slice(Ps+1,Fs)}}function Vn(){return Rs.charCodeAt(++Ms)}function jn(){return Ms>=Os}function $n(t){return 34===t||39===t}function Wn(t){var e=1;for(Ps=Ms;!jn();)if(t=Vn(),$n(t))Kn(t);else if(91===t&&e++,93===t&&e--,0===e){Fs=Ms;break}}function Kn(t){for(var e=t;!jn()&&(t=Vn())!==e;);}function Qn(t,e,n){Us=n;var r=e.value,i=e.modifiers,o=t.tag,s=t.attrsMap.type;if(t.component)return Un(t,r,i),!1;if("select"===o)Gn(t,r,i);else if("input"===o&&"checkbox"===s)Hn(t,r,i);else if("input"===o&&"radio"===s)zn(t,r,i);else if("input"===o||"textarea"===o)Xn(t,r,i);else if(!To.isReservedTag(o))return Un(t,r,i),!1;return!0}function Hn(t,e,n){var r=n&&n.number,i=Pn(t,"value")||"null",o=Pn(t,"true-value")||"true",s=Pn(t,"false-value")||"false";Nn(t,"checked","Array.isArray("+e+")?_i("+e+","+i+")>-1"+("true"===o?":("+e+")":":_q("+e+","+o+")")),Mn(t,"change","var $$a="+e+",$$el=$event.target,$$c=$$el.checked?("+o+"):("+s+");if(Array.isArray($$a)){var $$v="+(r?"_n("+i+")":i)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Bn(e,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Bn(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Bn(e,"$$c")+"}",null,!0)}function zn(t,e,n){var r=n&&n.number,i=Pn(t,"value")||"null";i=r?"_n("+i+")":i,Nn(t,"checked","_q("+e+","+i+")"),Mn(t,"change",Bn(e,i),null,!0)}function Gn(t,e,n){var r=n&&n.number,i='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(r?"_n(val)":"val")+"})",o="var $$selectedVal = "+i+";";o=o+" "+Bn(e,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),Mn(t,"change",o,null,!0)}function Xn(t,e,n){var r=t.attrsMap.type,i=n||{},o=i.lazy,s=i.number,a=i.trim,u=!o&&"range"!==r,c=o?"change":"range"===r?da:"input",h="$event.target.value";a&&(h="$event.target.value.trim()"),s&&(h="_n("+h+")");var l=Bn(e,h);u&&(l="if($event.target.composing)return;"+l),Nn(t,"value","("+e+")"),Mn(t,c,l,null,!0),(a||s)&&Mn(t,"blur","$forceUpdate()")}function Yn(t){if(i(t[da])){var e=Ao?"change":"input";t[e]=[].concat(t[da],t[e]||[]),delete t[da]}i(t[pa])&&(t.change=[].concat(t[pa],t.change||[]),delete t[pa])}function Jn(t,e,n){var r=Bs;return function i(){null!==t.apply(null,arguments)&&tr(e,i,n,r)}}function Zn(t,e,n,r,i){e=at(e),n&&(e=Jn(e,t,r)),Bs.addEventListener(t,e,Mo?{capture:r,passive:i}:r)}function tr(t,e,n,r){(r||Bs).removeEventListener(t,e._withTask||e,n)}function er(t,e){if(!r(t.data.on)||!r(e.data.on)){var n=e.data.on||{},i=t.data.on||{};Bs=e.elm,Yn(n),ft(n,i,Zn,tr,e.context),Bs=void 0}}function nr(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var n,o,s=e.elm,a=t.data.domProps||{},u=e.data.domProps||{};i(u.__ob__)&&(u=e.data.domProps=_({},u));for(n in a)r(u[n])&&(s[n]="");for(n in u){if(o=u[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),o===a[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n){s._value=o;var c=r(o)?"":String(o);rr(s,c)&&(s.value=c)}else s[n]=o}}}function rr(t,e){return!t.composing&&("OPTION"===t.tagName||ir(t,e)||or(t,e))}function ir(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}function or(t,e){var n=t.value,r=t._vModifiers;if(i(r)){if(r.lazy)return!1;if(r.number)return d(n)!==d(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}function sr(t){var e=ar(t.style);return t.staticStyle?_(t.staticStyle,e):e}function ar(t){return Array.isArray(t)?S(t):"string"==typeof t?ya(t):t}function ur(t,e){var n,r={};if(e)for(var i=t;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=sr(i.data))&&_(r,n);(n=sr(t.data))&&_(r,n);for(var o=t;o=o.parent;)o.data&&(n=sr(o.data))&&_(r,n);return r}function cr(t,e){var n=e.data,o=t.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var s,a,u=e.elm,c=o.staticStyle,h=o.normalizedStyle||o.style||{},l=c||h,f=ar(e.data.style)||{};e.data.normalizedStyle=i(f.__ob__)?_({},f):f;var d=ur(e,!0);for(a in l)r(d[a])&&wa(u,a,"");for(a in d)(s=d[a])!==l[a]&&wa(u,a,null==s?"":s)}}function hr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function lr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";n.indexOf(r)>=0;)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function fr(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&_(e,Ea(t.name||"v")),_(e,t),e}return"string"==typeof t?Ea(t):void 0}}function dr(t){Oa(function(){Oa(t)})}function pr(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),hr(t,e))}function mr(t,e){t._transitionClasses&&m(t._transitionClasses,e),lr(t,e)}function vr(t,e,n){var r=yr(t,e),i=r.type,o=r.timeout,s=r.propCount;if(!i)return n();var a=i===Ia?Da:Na,u=0,c=function(){t.removeEventListener(a,h),n()},h=function(e){e.target===t&&++u>=s&&c()};setTimeout(function(){u<s&&c()},o+1),t.addEventListener(a,h)}function yr(t,e){var n,r=window.getComputedStyle(t),i=r[xa+"Delay"].split(", "),o=r[xa+"Duration"].split(", "),s=gr(i,o),a=r[Aa+"Delay"].split(", "),u=r[Aa+"Duration"].split(", "),c=gr(a,u),h=0,l=0;return e===Ia?s>0&&(n=Ia,h=s,l=o.length):e===ka?c>0&&(n=ka,h=c,l=u.length):(h=Math.max(s,c),n=h>0?s>c?Ia:ka:null,l=n?n===Ia?o.length:u.length:0),{type:n,timeout:h,propCount:l,hasTransform:n===Ia&&Ra.test(r[xa+"Property"])}}function gr(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return br(e)+br(t[n])}))}function br(t){return 1e3*Number(t.slice(0,-1))}function wr(t,e){var n=t.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=fr(t.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){for(var s=o.css,a=o.type,c=o.enterClass,h=o.enterToClass,l=o.enterActiveClass,f=o.appearClass,p=o.appearToClass,m=o.appearActiveClass,v=o.beforeEnter,y=o.enter,g=o.afterEnter,b=o.enterCancelled,w=o.beforeAppear,_=o.appear,S=o.afterAppear,T=o.appearCancelled,E=o.duration,C=ds,k=ds.$vnode;k&&k.parent;)k=k.parent,C=k.context;var x=!C._isMounted||!t.isRootInsert;if(!x||_||""===_){var D=x&&f?f:c,A=x&&m?m:l,N=x&&p?p:h,O=x?w||v:v,R=x&&"function"==typeof _?_:y,L=x?S||g:g,M=x?T||b:b,P=d(u(E)?E.enter:E),F=!1!==s&&!No,U=Tr(R),B=n._enterCb=I(function(){F&&(mr(n,N),mr(n,A)),B.cancelled?(F&&mr(n,D),M&&M(n)):L&&L(n),n._enterCb=null});t.data.show||dt(t,"insert",function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),R&&R(n,B)}),O&&O(n),F&&(pr(n,D),pr(n,A),dr(function(){mr(n,D),B.cancelled||(pr(n,N),U||(Sr(P)?setTimeout(B,P):vr(n,a,B)))})),t.data.show&&(e&&e(),R&&R(n,B)),F||U||B()}}}function _r(t,e){function n(){T.cancelled||(t.data.show||((o.parentNode._pending||(o.parentNode._pending={}))[t.key]=t),p&&p(o),w&&(pr(o,h),pr(o,f),dr(function(){mr(o,h),T.cancelled||(pr(o,l),_||(Sr(S)?setTimeout(T,S):vr(o,c,T)))})),m&&m(o,T),w||_||T())}var o=t.elm;i(o._enterCb)&&(o._enterCb.cancelled=!0,o._enterCb());var s=fr(t.data.transition);if(r(s)||1!==o.nodeType)return e();if(!i(o._leaveCb)){var a=s.css,c=s.type,h=s.leaveClass,l=s.leaveToClass,f=s.leaveActiveClass,p=s.beforeLeave,m=s.leave,v=s.afterLeave,y=s.leaveCancelled,g=s.delayLeave,b=s.duration,w=!1!==a&&!No,_=Tr(m),S=d(u(b)?b.leave:b),T=o._leaveCb=I(function(){o.parentNode&&o.parentNode._pending&&(o.parentNode._pending[t.key]=null),w&&(mr(o,l),mr(o,f)),T.cancelled?(w&&mr(o,h),y&&y(o)):(e(),v&&v(o)),o._leaveCb=null});g?g(n):n()}}function Sr(t){return"number"==typeof t&&!isNaN(t)}function Tr(t){if(r(t))return!1;var e=t.fns;return i(e)?Tr(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Er(t,e){!0!==e.data.show&&wr(e)}function Cr(t,e,n){Ir(t,e,n),(Ao||Oo)&&setTimeout(function(){Ir(t,e,n)},0)}function Ir(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var o,s,a=0,u=t.options.length;a<u;a++)if(s=t.options[a],i)o=C(r,xr(s))>-1,s.selected!==o&&(s.selected=o);else if(E(xr(s),r))return void(t.selectedIndex!==a&&(t.selectedIndex=a));i||(t.selectedIndex=-1)}}function kr(t,e){return e.every(function(e){return!E(e,t)})}function xr(t){return"_value"in t?t._value:t.value}function Dr(t){t.target.composing=!0}function Ar(t){t.target.composing&&(t.target.composing=!1,Nr(t.target,"input"))}function Nr(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function Or(t){return!t.componentInstance||t.data&&t.data.transition?t:Or(t.componentInstance._vnode)}function Rr(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Rr(Et(e.children)):t}function Lr(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var o in i)e[fo(o)]=i[o];return e}function Mr(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function Pr(t){for(;t=t.parent;)if(t.data.transition)return!0}function Fr(t,e){return e.key===t.key&&e.tag===t.tag}function Ur(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function Br(t){t.data.newPos=t.elm.getBoundingClientRect()}function qr(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}function Vr(t,e){var n=e?Ga(e):Ha;if(n.test(t)){for(var r,i,o,s=[],a=[],u=n.lastIndex=0;r=n.exec(t);){i=r.index,i>u&&(a.push(o=t.slice(u,i)),s.push(JSON.stringify(o)));var c=kn(r[1].trim());s.push("_s("+c+")"),a.push({"@binding":c}),u=i+r[0].length}return u<t.length&&(a.push(o=t.slice(u)),s.push(JSON.stringify(o))),{expression:s.join("+"),tokens:a}}}function jr(t,e){var n=(e.warn,Fn(t,"class"));n&&(t.staticClass=JSON.stringify(n));var r=Pn(t,"class",!1);r&&(t.classBinding=r)}function $r(t){var e="";return t.staticClass&&(e+="staticClass:"+t.staticClass+","),t.classBinding&&(e+="class:"+t.classBinding+","),e}function Wr(t,e){var n=(e.warn,Fn(t,"style"));if(n){t.staticStyle=JSON.stringify(ya(n))}var r=Pn(t,"style",!1);r&&(t.styleBinding=r)}function Kr(t){var e="";return t.staticStyle&&(e+="staticStyle:"+t.staticStyle+","),t.styleBinding&&(e+="style:("+t.styleBinding+"),"),e}function Qr(t,e){var n=e?ku:Iu;return t.replace(n,function(t){return Cu[t]})}function Hr(t,e){function n(e){h+=e,t=t.substring(e)}function r(t,n,r){var i,a;if(null==n&&(n=h),null==r&&(r=h),t&&(a=t.toLowerCase()),t)for(i=s.length-1;i>=0&&s[i].lowerCasedTag!==a;i--);else i=0;if(i>=0){for(var u=s.length-1;u>=i;u--)e.end&&e.end(s[u].tag,n,r);s.length=i,o=i&&s[i-1].tag}else"br"===a?e.start&&e.start(t,[],!0,n,r):"p"===a&&(e.start&&e.start(t,[],!1,n,r),e.end&&e.end(t,n,r))}for(var i,o,s=[],a=e.expectHTML,u=e.isUnaryTag||go,c=e.canBeLeftOpenTag||go,h=0;t;){if(i=t,o&&Tu(o)){var l=0,f=o.toLowerCase(),d=Eu[f]||(Eu[f]=new RegExp("([\\s\\S]*?)(</"+f+"[^>]*>)","i")),p=t.replace(d,function(t,n,r){return l=r.length,Tu(f)||"noscript"===f||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Du(f,n)&&(n=n.slice(1)),e.chars&&e.chars(n),""});h+=t.length-p.length,t=p,r(f,h-l,h)}else{var m=t.indexOf("<");if(0===m){if(cu.test(t)){var v=t.indexOf("--\x3e");if(v>=0){e.shouldKeepComment&&e.comment(t.substring(4,v)),n(v+3);continue}}if(hu.test(t)){var y=t.indexOf("]>");if(y>=0){n(y+2);continue}}var g=t.match(uu);if(g){n(g[0].length);continue}var b=t.match(au);if(b){var w=h;n(b[0].length),r(b[1],w,h);continue}var _=function(){var e=t.match(ou);if(e){var r={tagName:e[1],attrs:[],start:h};n(e[0].length);for(var i,o;!(i=t.match(su))&&(o=t.match(nu));)n(o[0].length),r.attrs.push(o);if(i)return r.unarySlash=i[1],n(i[0].length),r.end=h,r}}();if(_){!function(t){var n=t.tagName,i=t.unarySlash;a&&("p"===o&&eu(n)&&r(o),c(n)&&o===n&&r(n));for(var h=u(n)||!!i,l=t.attrs.length,f=new Array(l),d=0;d<l;d++){var p=t.attrs[d];lu&&-1===p[0].indexOf('""')&&(""===p[3]&&delete p[3],""===p[4]&&delete p[4],""===p[5]&&delete p[5]);var m=p[3]||p[4]||p[5]||"",v="a"===n&&"href"===p[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;f[d]={name:p[1],value:Qr(m,v)}}h||(s.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:f}),o=n),e.start&&e.start(n,f,h,t.start,t.end)}(_),Du(o,t)&&n(1);continue}}var S=void 0,T=void 0,E=void 0;if(m>=0){for(T=t.slice(m);!(au.test(T)||ou.test(T)||cu.test(T)||hu.test(T)||(E=T.indexOf("<",1))<0);)m+=E,T=t.slice(m);S=t.substring(0,m),n(m)}m<0&&(S=t,t=""),e.chars&&S&&e.chars(S)}if(t===i){e.chars&&e.chars(t);break}}r()}function zr(t,e,n){return{type:1,tag:t,attrsList:e,attrsMap:di(e),parent:n,children:[]}}function Gr(t,e){function n(t){t.pre&&(a=!1),yu(t.tag)&&(u=!1);for(var n=0;n<vu.length;n++)vu[n](t,e)}fu=e.warn||Dn,yu=e.isPreTag||go,gu=e.mustUseProp||go,bu=e.getTagNamespace||go,pu=An(e.modules,"transformNode"),mu=An(e.modules,"preTransformNode"),vu=An(e.modules,"postTransformNode"),du=e.delimiters;var r,i,o=[],s=!1!==e.preserveWhitespace,a=!1,u=!1;return Hr(t,{warn:fu,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,start:function(t,s,c){var h=i&&i.ns||bu(t);Ao&&"svg"===h&&(s=vi(s));var l=zr(t,s,i);h&&(l.ns=h),mi(l)&&!Bo()&&(l.forbidden=!0);for(var f=0;f<mu.length;f++)l=mu[f](l,e)||l;if(a||(Xr(l),l.pre&&(a=!0)),yu(l.tag)&&(u=!0),a?Yr(l):l.processed||(ei(l),ri(l),ai(l),Jr(l,e)),r?o.length||r.if&&(l.elseif||l.else)&&si(r,{exp:l.elseif,block:l}):r=l,i&&!l.forbidden)if(l.elseif||l.else)ii(l,i);else if(l.slotScope){i.plain=!1;var d=l.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[d]=l}else i.children.push(l),l.parent=i;c?n(l):(i=l,o.push(l))},end:function(){var t=o[o.length-1],e=t.children[t.children.length-1];e&&3===e.type&&" "===e.text&&!u&&t.children.pop(),o.length-=1,i=o[o.length-1],n(t)},chars:function(t){if(i&&(!Ao||"textarea"!==i.tag||i.attrsMap.placeholder!==t)){var e=i.children;if(t=u||t.trim()?pi(i)?t:Uu(t):s&&e.length?" ":""){var n;!a&&" "!==t&&(n=Vr(t,du))?e.push({type:2,expression:n.expression,tokens:n.tokens,text:t}):" "===t&&e.length&&" "===e[e.length-1].text||e.push({type:3,text:t})}}},comment:function(t){i.children.push({type:3,text:t,isComment:!0})}}),r}function Xr(t){null!=Fn(t,"v-pre")&&(t.pre=!0)}function Yr(t){var e=t.attrsList.length;if(e)for(var n=t.attrs=new Array(e),r=0;r<e;r++)n[r]={name:t.attrsList[r].name,value:JSON.stringify(t.attrsList[r].value)};else t.pre||(t.plain=!0)}function Jr(t,e){Zr(t),t.plain=!t.key&&!t.attrsList.length,ti(t),ui(t),ci(t);for(var n=0;n<pu.length;n++)t=pu[n](t,e)||t;hi(t)}function Zr(t){var e=Pn(t,"key");e&&(t.key=e)}function ti(t){var e=Pn(t,"ref");e&&(t.ref=e,t.refInFor=li(t))}function ei(t){var e;if(e=Fn(t,"v-for")){var n=ni(e);n&&_(t,n)}}function ni(t){var e=t.match(Ou);if(e){var n={};n.for=e[2].trim();var r=e[1].trim().replace(Lu,""),i=r.match(Ru);return i?(n.alias=r.replace(Ru,""),n.iterator1=i[1].trim(),i[2]&&(n.iterator2=i[2].trim())):n.alias=r,n}}function ri(t){var e=Fn(t,"v-if");if(e)t.if=e,si(t,{exp:e,block:t});else{null!=Fn(t,"v-else")&&(t.else=!0);var n=Fn(t,"v-else-if");n&&(t.elseif=n)}}function ii(t,e){var n=oi(e.children);n&&n.if&&si(n,{exp:t.elseif,block:t})}function oi(t){for(var e=t.length;e--;){if(1===t[e].type)return t[e];t.pop()}}function si(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function ai(t){null!=Fn(t,"v-once")&&(t.once=!0)}function ui(t){if("slot"===t.tag)t.slotName=Pn(t,"name");else{var e;"template"===t.tag?(e=Fn(t,"scope"),t.slotScope=e||Fn(t,"slot-scope")):(e=Fn(t,"slot-scope"))&&(t.slotScope=e);var n=Pn(t,"slot");n&&(t.slotTarget='""'===n?'"default"':n,"template"===t.tag||t.slotScope||On(t,"slot",n))}}function ci(t){var e;(e=Pn(t,"is"))&&(t.component=e),null!=Fn(t,"inline-template")&&(t.inlineTemplate=!0)}function hi(t){var e,n,r,i,o,s,a,u=t.attrsList;for(e=0,n=u.length;e<n;e++)if(r=i=u[e].name,o=u[e].value,Nu.test(r))if(t.hasBindings=!0,s=fi(r),s&&(r=r.replace(Fu,"")),Pu.test(r))r=r.replace(Pu,""),o=kn(o),a=!1,s&&(s.prop&&(a=!0,"innerHtml"===(r=fo(r))&&(r="innerHTML")),s.camel&&(r=fo(r)),s.sync&&Mn(t,"update:"+fo(r),Bn(o,"$event"))),a||!t.component&&gu(t.tag,t.attrsMap.type,r)?Nn(t,r,o):On(t,r,o);else if(Au.test(r))r=r.replace(Au,""),Mn(t,r,o,s,!1,fu);else{r=r.replace(Nu,"");var c=r.match(Mu),h=c&&c[1];h&&(r=r.slice(0,-(h.length+1))),Ln(t,r,i,o,h,s)}else{On(t,r,JSON.stringify(o)),!t.component&&"muted"===r&&gu(t.tag,t.attrsMap.type,r)&&Nn(t,r,"true")}}function li(t){for(var e=t;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}function fi(t){var e=t.match(Fu);if(e){var n={};return e.forEach(function(t){n[t.slice(1)]=!0}),n}}function di(t){for(var e={},n=0,r=t.length;n<r;n++)e[t[n].name]=t[n].value;return e}function pi(t){return"script"===t.tag||"style"===t.tag}function mi(t){return"style"===t.tag||"script"===t.tag&&(!t.attrsMap.type||"text/javascript"===t.attrsMap.type)}function vi(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];Bu.test(r.name)||(r.name=r.name.replace(qu,""),e.push(r))}return e}function yi(t,e){if("input"===t.tag){var n=t.attrsMap;if(!n["v-model"])return;var r;if((n[":type"]||n["v-bind:type"])&&(r=Pn(t,"type")),n.type||r||!n["v-bind"]||(r="("+n["v-bind"]+").type"),r){var i=Fn(t,"v-if",!0),o=i?"&&("+i+")":"",s=null!=Fn(t,"v-else",!0),a=Fn(t,"v-else-if",!0),u=gi(t);ei(u),Rn(u,"type","checkbox"),Jr(u,e),u.processed=!0,u.if="("+r+")==='checkbox'"+o,si(u,{exp:u.if,block:u});var c=gi(t);Fn(c,"v-for",!0),Rn(c,"type","radio"),Jr(c,e),si(u,{exp:"("+r+")==='radio'"+o,block:c});var h=gi(t);return Fn(h,"v-for",!0),Rn(h,":type",r),Jr(h,e),si(u,{exp:i,block:h}),s?u.else=!0:a&&(u.elseif=a),u}}}function gi(t){return zr(t.tag,t.attrsList.slice(),t.parent)}function bi(t,e){e.value&&Nn(t,"textContent","_s("+e.value+")")}function wi(t,e){e.value&&Nn(t,"innerHTML","_s("+e.value+")")}function _i(t,e){t&&(wu=Ku(e.staticKeys||""),_u=e.isReservedTag||go,Ti(t),Ei(t,!1))}function Si(t){return p("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(t?","+t:""))}function Ti(t){if(t.static=Ci(t),1===t.type){if(!_u(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var e=0,n=t.children.length;e<n;e++){var r=t.children[e];Ti(r),r.static||(t.static=!1)}if(t.ifConditions)for(var i=1,o=t.ifConditions.length;i<o;i++){var s=t.ifConditions[i].block;Ti(s),s.static||(t.static=!1)}}}function Ei(t,e){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=e),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var n=0,r=t.children.length;n<r;n++)Ei(t.children[n],e||!!t.for);if(t.ifConditions)for(var i=1,o=t.ifConditions.length;i<o;i++)Ei(t.ifConditions[i].block,e)}}function Ci(t){return 2!==t.type&&(3===t.type||!(!t.pre&&(t.hasBindings||t.if||t.for||uo(t.tag)||!_u(t.tag)||Ii(t)||!Object.keys(t).every(wu))))}function Ii(t){for(;t.parent;){if(t=t.parent,"template"!==t.tag)return!1;if(t.for)return!0}return!1}function ki(t,e,n){var r=e?"nativeOn:{":"on:{";for(var i in t)r+='"'+i+'":'+xi(i,t[i])+",";return r.slice(0,-1)+"}"}function xi(t,e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map(function(e){return xi(t,e)}).join(",")+"]";var n=Hu.test(e.value),r=Qu.test(e.value);if(e.modifiers){var i="",o="",s=[];for(var a in e.modifiers)if(Yu[a])o+=Yu[a],zu[a]&&s.push(a);else if("exact"===a){var u=e.modifiers;o+=Xu(["ctrl","shift","alt","meta"].filter(function(t){return!u[t]}).map(function(t){return"$event."+t+"Key"}).join("||"))}else s.push(a);s.length&&(i+=Di(s)),o&&(i+=o);return"function($event){"+i+(n?"return "+e.value+"($event)":r?"return ("+e.value+")($event)":e.value)+"}"}return n||r?e.value:"function($event){"+e.value+"}"}function Di(t){return"if(!('button' in $event)&&"+t.map(Ai).join("&&")+")return null;"}function Ai(t){var e=parseInt(t,10);if(e)return"$event.keyCode!=="+e;var n=zu[t],r=Gu[t];return"_k($event.keyCode,"+JSON.stringify(t)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(r)+")"}function Ni(t,e){t.wrapListeners=function(t){return"_g("+t+","+e.value+")"}}function Oi(t,e){t.wrapData=function(n){return"_b("+n+",'"+t.tag+"',"+e.value+","+(e.modifiers&&e.modifiers.prop?"true":"false")+(e.modifiers&&e.modifiers.sync?",true":"")+")"}}function Ri(t,e){var n=new Zu(e);return{render:"with(this){return "+(t?Li(t,n):'_c("div")')+"}",staticRenderFns:n.staticRenderFns}}function Li(t,e){if(t.staticRoot&&!t.staticProcessed)return Mi(t,e);if(t.once&&!t.onceProcessed)return Pi(t,e);if(t.for&&!t.forProcessed)return Bi(t,e);if(t.if&&!t.ifProcessed)return Fi(t,e);if("template"!==t.tag||t.slotTarget){if("slot"===t.tag)return Ji(t,e);var n;if(t.component)n=Zi(t.component,t,e);else{var r=t.plain?void 0:qi(t,e),i=t.inlineTemplate?null:Qi(t,e,!0);n="_c('"+t.tag+"'"+(r?","+r:"")+(i?","+i:"")+")"}for(var o=0;o<e.transforms.length;o++)n=e.transforms[o](t,n);return n}return Qi(t,e)||"void 0"}function Mi(t,e){return t.staticProcessed=!0,e.staticRenderFns.push("with(this){return "+Li(t,e)+"}"),"_m("+(e.staticRenderFns.length-1)+(t.staticInFor?",true":"")+")"}function Pi(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return Fi(t,e);if(t.staticInFor){for(var n="",r=t.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o("+Li(t,e)+","+e.onceId+++","+n+")":Li(t,e)}return Mi(t,e)}function Fi(t,e,n,r){return t.ifProcessed=!0,Ui(t.ifConditions.slice(),e,n,r)}function Ui(t,e,n,r){function i(t){return n?n(t,e):t.once?Pi(t,e):Li(t,e)}if(!t.length)return r||"_e()";var o=t.shift();return o.exp?"("+o.exp+")?"+i(o.block)+":"+Ui(t,e,n,r):""+i(o.block)}function Bi(t,e,n,r){var i=t.for,o=t.alias,s=t.iterator1?","+t.iterator1:"",a=t.iterator2?","+t.iterator2:"";return t.forProcessed=!0,(r||"_l")+"(("+i+"),function("+o+s+a+"){return "+(n||Li)(t,e)+"})"}function qi(t,e){var n="{",r=Vi(t,e);r&&(n+=r+","),t.key&&(n+="key:"+t.key+","),t.ref&&(n+="ref:"+t.ref+","),t.refInFor&&(n+="refInFor:true,"),t.pre&&(n+="pre:true,"),t.component&&(n+='tag:"'+t.tag+'",');for(var i=0;i<e.dataGenFns.length;i++)n+=e.dataGenFns[i](t);if(t.attrs&&(n+="attrs:{"+to(t.attrs)+"},"),t.props&&(n+="domProps:{"+to(t.props)+"},"),t.events&&(n+=ki(t.events,!1,e.warn)+","),t.nativeEvents&&(n+=ki(t.nativeEvents,!0,e.warn)+","),t.slotTarget&&!t.slotScope&&(n+="slot:"+t.slotTarget+","),t.scopedSlots&&(n+=$i(t.scopedSlots,e)+","),t.model&&(n+="model:{value:"+t.model.value+",callback:"+t.model.callback+",expression:"+t.model.expression+"},"),t.inlineTemplate){var o=ji(t,e);o&&(n+=o+",")}return n=n.replace(/,$/,"")+"}",t.wrapData&&(n=t.wrapData(n)),t.wrapListeners&&(n=t.wrapListeners(n)),n}function Vi(t,e){var n=t.directives;if(n){var r,i,o,s,a="directives:[",u=!1;for(r=0,i=n.length;r<i;r++){o=n[r],s=!0;var c=e.directives[o.name];c&&(s=!!c(t,o,e.warn)),s&&(u=!0,a+='{name:"'+o.name+'",rawName:"'+o.rawName+'"'+(o.value?",value:("+o.value+"),expression:"+JSON.stringify(o.value):"")+(o.arg?',arg:"'+o.arg+'"':"")+(o.modifiers?",modifiers:"+JSON.stringify(o.modifiers):"")+"},")}return u?a.slice(0,-1)+"]":void 0}}function ji(t,e){var n=t.children[0];if(1===n.type){var r=Ri(n,e.options);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map(function(t){return"function(){"+t+"}"}).join(",")+"]}"}}function $i(t,e){return"scopedSlots:_u(["+Object.keys(t).map(function(n){return Wi(n,t[n],e)}).join(",")+"])"}function Wi(t,e,n){return e.for&&!e.forProcessed?Ki(t,e,n):"{key:"+t+",fn:function("+String(e.slotScope)+"){return "+("template"===e.tag?e.if?e.if+"?"+(Qi(e,n)||"undefined")+":undefined":Qi(e,n)||"undefined":Li(e,n))+"}}"}function Ki(t,e,n){var r=e.for,i=e.alias,o=e.iterator1?","+e.iterator1:"",s=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,"_l(("+r+"),function("+i+o+s+"){return "+Wi(t,e,n)+"})"}function Qi(t,e,n,r,i){var o=t.children;if(o.length){var s=o[0];if(1===o.length&&s.for&&"template"!==s.tag&&"slot"!==s.tag)return(r||Li)(s,e);var a=n?Hi(o,e.maybeComponent):0,u=i||Gi;return"["+o.map(function(t){return u(t,e)}).join(",")+"]"+(a?","+a:"")}}function Hi(t,e){for(var n=0,r=0;r<t.length;r++){var i=t[r];if(1===i.type){if(zi(i)||i.ifConditions&&i.ifConditions.some(function(t){return zi(t.block)})){n=2;break}(e(i)||i.ifConditions&&i.ifConditions.some(function(t){return e(t.block)}))&&(n=1)}}return n}function zi(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function Gi(t,e){return 1===t.type?Li(t,e):3===t.type&&t.isComment?Yi(t):Xi(t)}function Xi(t){return"_v("+(2===t.type?t.expression:eo(JSON.stringify(t.text)))+")"}function Yi(t){return"_e("+JSON.stringify(t.text)+")"}function Ji(t,e){var n=t.slotName||'"default"',r=Qi(t,e),i="_t("+n+(r?","+r:""),o=t.attrs&&"{"+t.attrs.map(function(t){return fo(t.name)+":"+t.value}).join(",")+"}",s=t.attrsMap["v-bind"];return!o&&!s||r||(i+=",null"),o&&(i+=","+o),s&&(i+=(o?"":",null")+","+s),i+")"}function Zi(t,e,n){var r=e.inlineTemplate?null:Qi(e,n,!0);return"_c("+t+","+qi(e,n)+(r?","+r:"")+")"}function to(t){for(var e="",n=0;n<t.length;n++){var r=t[n];e+='"'+r.name+'":'+eo(r.value)+","}return e.slice(0,-1)}function eo(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function no(t,e){try{return new Function(t)}catch(n){return e.push({err:n,code:t}),T}}function ro(t){var e=Object.create(null);return function(n,r,i){r=_({},r);r.warn;delete r.warn;var o=r.delimiters?String(r.delimiters)+n:n;if(e[o])return e[o];var s=t(n,r),a={},u=[];return a.render=no(s.render,u),a.staticRenderFns=s.staticRenderFns.map(function(t){return no(t,u)}),e[o]=a}}function io(t){return Su=Su||document.createElement("div"),Su.innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',Su.innerHTML.indexOf("&#10;")>0}function oo(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}/*!
 * Vue.js v2.5.17
 * (c) 2014-2018 Evan You
 * Released under the MIT License.
 */
var so=Object.freeze({}),ao=Object.prototype.toString,uo=p("slot,component",!0),co=p("key,ref,slot,slot-scope,is"),ho=Object.prototype.hasOwnProperty,lo=/-(\w)/g,fo=y(function(t){return t.replace(lo,function(t,e){return e?e.toUpperCase():""})}),po=y(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),mo=/\B([A-Z])/g,vo=y(function(t){return t.replace(mo,"-$1").toLowerCase()}),yo=Function.prototype.bind?b:g,go=function(t,e,n){return!1},bo=function(t){return t},wo="data-server-rendered",_o=["component","directive","filter"],So=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],To={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:go,isReservedAttr:go,isUnknownElement:go,getTagNamespace:T,parsePlatformTagName:bo,mustUseProp:go,_lifecycleHooks:So},Eo=/[^\w.$]/,Co="__proto__"in{},Io="undefined"!=typeof window,ko="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,xo=ko&&WXEnvironment.platform.toLowerCase(),Do=Io&&window.navigator.userAgent.toLowerCase(),Ao=Do&&/msie|trident/.test(Do),No=Do&&Do.indexOf("msie 9.0")>0,Oo=Do&&Do.indexOf("edge/")>0,Ro=(Do&&Do.indexOf("android"),Do&&/iphone|ipad|ipod|ios/.test(Do)||"ios"===xo),Lo=(Do&&/chrome\/\d+/.test(Do),{}.watch),Mo=!1;if(Io)try{var Po={};Object.defineProperty(Po,"passive",{get:function(){Mo=!0}}),window.addEventListener("test-passive",null,Po)}catch(t){}var Fo,Uo,Bo=function(){return void 0===Fo&&(Fo=!Io&&!ko&&void 0!==t&&"server"===t.process.env.VUE_ENV),Fo},qo=Io&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Vo="undefined"!=typeof Symbol&&A(Symbol)&&"undefined"!=typeof Reflect&&A(Reflect.ownKeys);Uo="undefined"!=typeof Set&&A(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var jo=T,$o=0,Wo=function(){this.id=$o++,this.subs=[]};Wo.prototype.addSub=function(t){this.subs.push(t)},Wo.prototype.removeSub=function(t){m(this.subs,t)},Wo.prototype.depend=function(){Wo.target&&Wo.target.addDep(this)},Wo.prototype.notify=function(){for(var t=this.subs.slice(),e=0,n=t.length;e<n;e++)t[e].update()},Wo.target=null;var Ko=[],Qo=function(t,e,n,r,i,o,s,a){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Ho={child:{configurable:!0}};Ho.child.get=function(){return this.componentInstance},Object.defineProperties(Qo.prototype,Ho);var zo=function(t){void 0===t&&(t="");var e=new Qo;return e.text=t,e.isComment=!0,e},Go=Array.prototype,Xo=Object.create(Go);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=Go[t];x(Xo,t,function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var i,o=e.apply(this,n),s=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&s.observeArray(i),s.dep.notify(),o})});var Yo=Object.getOwnPropertyNames(Xo),Jo=!0,Zo=function(t){if(this.value=t,this.dep=new Wo,this.vmCount=0,x(t,"__ob__",this),Array.isArray(t)){(Co?P:F)(t,Xo,Yo),this.observeArray(t)}else this.walk(t)};Zo.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)B(t,e[n])},Zo.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)U(t[e])};var ts=To.optionMergeStrategies;ts.data=function(t,e,n){return n?W(t,e,n):e&&"function"!=typeof e?t:W(t,e)},So.forEach(function(t){ts[t]=K}),_o.forEach(function(t){ts[t+"s"]=Q}),ts.watch=function(t,e,n,r){if(t===Lo&&(t=void 0),e===Lo&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};_(i,t);for(var o in e){var s=i[o],a=e[o];s&&!Array.isArray(s)&&(s=[s]),i[o]=s?s.concat(a):Array.isArray(a)?a:[a]}return i},ts.props=ts.methods=ts.inject=ts.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return _(i,t),e&&_(i,e),i},ts.provide=W;var es,ns,rs=function(t,e){return void 0===e?t:e},is=[],os=!1,ss=!1;if(void 0!==n&&A(n))ns=function(){n(st)};else if("undefined"==typeof MessageChannel||!A(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())ns=function(){setTimeout(st,0)};else{var as=new MessageChannel,us=as.port2;as.port1.onmessage=st,ns=function(){us.postMessage(1)}}if("undefined"!=typeof Promise&&A(Promise)){var cs=Promise.resolve();es=function(){cs.then(st),Ro&&setTimeout(T)}}else es=ns;var hs,ls=new Uo,fs=y(function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}),ds=null,ps=[],ms=[],vs={},ys=!1,gs=!1,bs=0,ws=0,_s=function(t,e,n,r,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++ws,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new Uo,this.newDepIds=new Uo,this.expression="","function"==typeof e?this.getter=e:(this.getter=D(e),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};_s.prototype.get=function(){N(this);var t,e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;rt(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ct(t),O(),this.cleanupDeps()}return t},_s.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},_s.prototype.cleanupDeps=function(){for(var t=this,e=this.deps.length;e--;){var n=t.deps[e];t.newDepIds.has(n.id)||n.removeSub(t)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},_s.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Wt(this)},_s.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||u(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){rt(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},_s.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},_s.prototype.depend=function(){for(var t=this,e=this.deps.length;e--;)t.deps[e].depend()},_s.prototype.teardown=function(){var t=this;if(this.active){this.vm._isBeingDestroyed||m(this.vm._watchers,this);for(var e=this.deps.length;e--;)t.deps[e].removeSub(t);this.active=!1}};var Ss={enumerable:!0,configurable:!0,get:T,set:T},Ts={lazy:!0};ve(ye.prototype);var Es={init:function(t,e,n,r){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var i=t;Es.prepatch(i,i)}else{(t.componentInstance=Se(t,ds,n,r)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions;Lt(e.componentInstance=t.componentInstance,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,Ut(n,"mounted")),t.data.keepAlive&&(e._isMounted?jt(n):Pt(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Ft(e,!0):e.$destroy())}},Cs=Object.keys(Es),Is=1,ks=2,xs=0;!function(t){t.prototype._init=function(t){var e=this;e._uid=xs++,e._isVue=!0,t&&t._isComponent?Ae(e,t):e.$options=X(Ne(e.constructor),t||{},e),e._renderProxy=e,e._self=e,Ot(e),Ct(e),De(e),Ut(e,"beforeCreate"),re(e),Qt(e),ne(e),Ut(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Le),function(t){var e={};e.get=function(){return this._data};var n={};n.get=function(){return this._props},Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=q,t.prototype.$delete=V,t.prototype.$watch=function(t,e,n){var r=this;if(c(e))return ee(r,t,e,n);n=n||{},n.user=!0;var i=new _s(r,t,e,n);return n.immediate&&e.call(r,i.value),function(){i.teardown()}}}(Le),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this,i=this;if(Array.isArray(t))for(var o=0,s=t.length;o<s;o++)r.$on(t[o],n);else(i._events[t]||(i._events[t]=[])).push(n),e.test(t)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(t,e){function n(){r.$off(t,n),e.apply(r,arguments)}var r=this;return n.fn=e,r.$on(t,n),r},t.prototype.$off=function(t,e){var n=this,r=this;if(!arguments.length)return r._events=Object.create(null),r;if(Array.isArray(t)){for(var i=0,o=t.length;i<o;i++)n.$off(t[i],e);return r}var s=r._events[t];if(!s)return r;if(!e)return r._events[t]=null,r;if(e)for(var a,u=s.length;u--;)if((a=s[u])===e||a.fn===e){s.splice(u,1);break}return r},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?w(n):n;for(var r=w(arguments,1),i=0,o=n.length;i<o;i++)try{n[i].apply(e,r)}catch(n){rt(n,e,'event handler for "'+t+'"')}}return e}}(Le),function(t){t.prototype._update=function(t,e){var n=this;n._isMounted&&Ut(n,"beforeUpdate");var r=n.$el,i=n._vnode,o=ds;ds=n,n._vnode=t,i?n.$el=n.__patch__(i,t):(n.$el=n.__patch__(n.$el,t,e,!1,n.$options._parentElm,n.$options._refElm),n.$options._parentElm=n.$options._refElm=null),ds=o,r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Ut(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||m(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Ut(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(Le),function(t){ve(t.prototype),t.prototype.$nextTick=function(t){return ut(t,this)},t.prototype._render=function(){var t=this,e=t.$options,n=e.render,r=e._parentVnode;r&&(t.$scopedSlots=r.data.scopedSlots||so),t.$vnode=r;var i;try{i=n.call(t._renderProxy,t.$createElement)}catch(e){rt(e,t,"render"),i=t._vnode}return i instanceof Qo||(i=zo()),i.parent=r,i}}(Le);var Ds=[String,RegExp,Array],As={name:"keep-alive",abstract:!0,props:{include:Ds,exclude:Ds,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){var t=this;for(var e in t.cache)We(t.cache,e,t.keys)},mounted:function(){var t=this;this.$watch("include",function(e){$e(t,function(t){return je(e,t)})}),this.$watch("exclude",function(e){$e(t,function(t){return!je(e,t)})})},render:function(){var t=this.$slots.default,e=Et(t),n=e&&e.componentOptions;if(n){var r=Ve(n),i=this,o=i.include,s=i.exclude;if(o&&(!r||!je(o,r))||s&&r&&je(s,r))return e;var a=this,u=a.cache,c=a.keys,h=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;u[h]?(e.componentInstance=u[h].componentInstance,m(c,h),c.push(h)):(u[h]=e,c.push(h),this.max&&c.length>parseInt(this.max)&&We(u,c[0],c,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},Ns={KeepAlive:As};!function(t){var e={};e.get=function(){return To},Object.defineProperty(t,"config",e),t.util={warn:jo,extend:_,mergeOptions:X,defineReactive:B},t.set=q,t.delete=V,t.nextTick=ut,t.options=Object.create(null),_o.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,_(t.options.components,Ns),Me(t),Pe(t),Fe(t),qe(t)}(Le),Object.defineProperty(Le.prototype,"$isServer",{get:Bo}),Object.defineProperty(Le.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Le,"FunctionalRenderContext",{value:ye}),Le.version="2.5.17";var Os,Rs,Ls,Ms,Ps,Fs,Us,Bs,qs,Vs=p("style,class"),js=p("input,textarea,option,select,progress"),$s=function(t,e,n){return"value"===n&&js(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Ws=p("contenteditable,draggable,spellcheck"),Ks=p("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Qs="http://www.w3.org/1999/xlink",Hs=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},zs=function(t){return Hs(t)?t.slice(6,t.length):""},Gs=function(t){return null==t||!1===t},Xs={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Ys=p("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Js=p("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Zs=function(t){return"pre"===t},ta=function(t){return Ys(t)||Js(t)},ea=Object.create(null),na=p("text,number,password,search,email,tel,url"),ra=Object.freeze({createElement:en,createElementNS:nn,createTextNode:rn,createComment:on,insertBefore:sn,removeChild:an,appendChild:un,parentNode:cn,nextSibling:hn,tagName:ln,setTextContent:fn,setStyleScope:dn}),ia={create:function(t,e){pn(e)},update:function(t,e){t.data.ref!==e.data.ref&&(pn(t,!0),pn(e))},destroy:function(t){pn(t,!0)}},oa=new Qo("",{},[]),sa=["create","activate","update","remove","destroy"],aa={create:gn,update:gn,destroy:function(t){gn(t,oa)}},ua=Object.create(null),ca=[ia,aa],ha={create:Tn,update:Tn},la={create:In,update:In},fa=/[\w).+\-_$\]]/,da="__r",pa="__c",ma={create:er,update:er},va={create:nr,update:nr},ya=y(function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach(function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}),ga=/^--/,ba=/\s*!important$/,wa=function(t,e,n){if(ga.test(e))t.style.setProperty(e,n);else if(ba.test(n))t.style.setProperty(e,n.replace(ba,""),"important");else{var r=Sa(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},_a=["Webkit","Moz","ms"],Sa=y(function(t){if(qs=qs||document.createElement("div").style,"filter"!==(t=fo(t))&&t in qs)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<_a.length;n++){var r=_a[n]+e;if(r in qs)return r}}),Ta={create:cr,update:cr},Ea=y(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),Ca=Io&&!No,Ia="transition",ka="animation",xa="transition",Da="transitionend",Aa="animation",Na="animationend";Ca&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(xa="WebkitTransition",Da="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Aa="WebkitAnimation",Na="webkitAnimationEnd"));var Oa=Io?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()},Ra=/\b(transform|all)(,|$)/,La=Io?{create:Er,activate:Er,remove:function(t,e){!0!==t.data.show?_r(t,e):e()}}:{},Ma=[ha,la,ma,va,Ta,La],Pa=Ma.concat(ca),Fa=function(t){function e(t){return new Qo(N.tagName(t).toLowerCase(),{},[],void 0,t)}function n(t,e){function n(){0==--n.listeners&&s(t)}return n.listeners=e,n}function s(t){var e=N.parentNode(t);i(e)&&N.removeChild(e,t)}function u(t,e,n,r,s,a,u){if(i(t.elm)&&i(a)&&(t=a[u]=L(t)),t.isRootInsert=!s,!c(t,e,n,r)){var h=t.data,l=t.children,p=t.tag;i(p)?(t.elm=t.ns?N.createElementNS(t.ns,p):N.createElement(p,t),y(t),d(t,l,e),i(h)&&v(t,e),f(n,t.elm,r)):o(t.isComment)?(t.elm=N.createComment(t.text),f(n,t.elm,r)):(t.elm=N.createTextNode(t.text),f(n,t.elm,r))}}function c(t,e,n,r){var s=t.data;if(i(s)){var a=i(t.componentInstance)&&s.keepAlive;if(i(s=s.hook)&&i(s=s.init)&&s(t,!1,n,r),i(t.componentInstance))return h(t,e),o(a)&&l(t,e,n,r),!0}}function h(t,e){i(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,m(t)?(v(t,e),y(t)):(pn(t),e.push(t))}function l(t,e,n,r){for(var o,s=t;s.componentInstance;)if(s=s.componentInstance._vnode,i(o=s.data)&&i(o=o.transition)){for(o=0;o<D.activate.length;++o)D.activate[o](oa,s);e.push(s);break}f(n,t.elm,r)}function f(t,e,n){i(t)&&(i(n)?n.parentNode===t&&N.insertBefore(t,e,n):N.appendChild(t,e))}function d(t,e,n){if(Array.isArray(e))for(var r=0;r<e.length;++r)u(e[r],n,t.elm,null,!0,e,r);else a(t.text)&&N.appendChild(t.elm,N.createTextNode(String(t.text)))}function m(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return i(t.tag)}function v(t,e){for(var n=0;n<D.create.length;++n)D.create[n](oa,t);k=t.data.hook,i(k)&&(i(k.create)&&k.create(oa,t),i(k.insert)&&e.push(t))}function y(t){var e;if(i(e=t.fnScopeId))N.setStyleScope(t.elm,e);else for(var n=t;n;)i(e=n.context)&&i(e=e.$options._scopeId)&&N.setStyleScope(t.elm,e),n=n.parent;i(e=ds)&&e!==t.context&&e!==t.fnContext&&i(e=e.$options._scopeId)&&N.setStyleScope(t.elm,e)}function g(t,e,n,r,i,o){for(;r<=i;++r)u(n[r],o,t,e,!1,n,r)}function b(t){var e,n,r=t.data;if(i(r))for(i(e=r.hook)&&i(e=e.destroy)&&e(t),e=0;e<D.destroy.length;++e)D.destroy[e](t);if(i(e=t.children))for(n=0;n<t.children.length;++n)b(t.children[n])}function w(t,e,n,r){for(;n<=r;++n){var o=e[n];i(o)&&(i(o.tag)?(_(o),b(o)):s(o.elm))}}function _(t,e){if(i(e)||i(t.data)){var r,o=D.remove.length+1;for(i(e)?e.listeners+=o:e=n(t.elm,o),i(r=t.componentInstance)&&i(r=r._vnode)&&i(r.data)&&_(r,e),r=0;r<D.remove.length;++r)D.remove[r](t,e);i(r=t.data.hook)&&i(r=r.remove)?r(t,e):e()}else s(t.elm)}function S(t,e,n,o,s){for(var a,c,h,l,f=0,d=0,p=e.length-1,m=e[0],v=e[p],y=n.length-1,b=n[0],_=n[y],S=!s;f<=p&&d<=y;)r(m)?m=e[++f]:r(v)?v=e[--p]:mn(m,b)?(E(m,b,o),m=e[++f],b=n[++d]):mn(v,_)?(E(v,_,o),v=e[--p],_=n[--y]):mn(m,_)?(E(m,_,o),S&&N.insertBefore(t,m.elm,N.nextSibling(v.elm)),m=e[++f],_=n[--y]):mn(v,b)?(E(v,b,o),S&&N.insertBefore(t,v.elm,m.elm),v=e[--p],b=n[++d]):(r(a)&&(a=yn(e,f,p)),c=i(b.key)?a[b.key]:T(b,e,f,p),r(c)?u(b,o,t,m.elm,!1,n,d):(h=e[c],mn(h,b)?(E(h,b,o),e[c]=void 0,S&&N.insertBefore(t,h.elm,m.elm)):u(b,o,t,m.elm,!1,n,d)),b=n[++d]);f>p?(l=r(n[y+1])?null:n[y+1].elm,g(t,l,n,d,y,o)):d>y&&w(t,e,f,p)}function T(t,e,n,r){for(var o=n;o<r;o++){var s=e[o];if(i(s)&&mn(t,s))return o}}function E(t,e,n,s){if(t!==e){var a=e.elm=t.elm;if(o(t.isAsyncPlaceholder))return void(i(e.asyncFactory.resolved)?I(t.elm,e,n):e.isAsyncPlaceholder=!0);if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))return void(e.componentInstance=t.componentInstance);var u,c=e.data;i(c)&&i(u=c.hook)&&i(u=u.prepatch)&&u(t,e);var h=t.children,l=e.children;if(i(c)&&m(e)){for(u=0;u<D.update.length;++u)D.update[u](t,e);i(u=c.hook)&&i(u=u.update)&&u(t,e)}r(e.text)?i(h)&&i(l)?h!==l&&S(a,h,l,n,s):i(l)?(i(t.text)&&N.setTextContent(a,""),g(a,null,l,0,l.length-1,n)):i(h)?w(a,h,0,h.length-1):i(t.text)&&N.setTextContent(a,""):t.text!==e.text&&N.setTextContent(a,e.text),i(c)&&i(u=c.hook)&&i(u=u.postpatch)&&u(t,e)}}function C(t,e,n){if(o(n)&&i(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}function I(t,e,n,r){var s,a=e.tag,u=e.data,c=e.children;if(r=r||u&&u.pre,e.elm=t,o(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(u)&&(i(s=u.hook)&&i(s=s.init)&&s(e,!0),i(s=e.componentInstance)))return h(e,n),!0;if(i(a)){if(i(c))if(t.hasChildNodes())if(i(s=u)&&i(s=s.domProps)&&i(s=s.innerHTML)){if(s!==t.innerHTML)return!1}else{for(var l=!0,f=t.firstChild,p=0;p<c.length;p++){if(!f||!I(f,c[p],n,r)){l=!1;break}f=f.nextSibling}if(!l||f)return!1}else d(e,c,n);if(i(u)){var m=!1;for(var y in u)if(!O(y)){m=!0,v(e,n);break}!m&&u.class&&ct(u.class)}}else t.data!==e.text&&(t.data=e.text);return!0}var k,x,D={},A=t.modules,N=t.nodeOps;for(k=0;k<sa.length;++k)for(D[sa[k]]=[],x=0;x<A.length;++x)i(A[x][sa[k]])&&D[sa[k]].push(A[x][sa[k]]);var O=p("attrs,class,staticClass,staticStyle,key");return function(t,n,s,a,c,h){if(r(n))return void(i(t)&&b(t));var l=!1,f=[];if(r(t))l=!0,u(n,f,c,h);else{var d=i(t.nodeType);if(!d&&mn(t,n))E(t,n,f,a);else{if(d){if(1===t.nodeType&&t.hasAttribute(wo)&&(t.removeAttribute(wo),s=!0),o(s)&&I(t,n,f))return C(n,f,!0),t;t=e(t)}var p=t.elm,v=N.parentNode(p);if(u(n,f,p._leaveCb?null:v,N.nextSibling(p)),i(n.parent))for(var y=n.parent,g=m(n);y;){for(var _=0;_<D.destroy.length;++_)D.destroy[_](y);if(y.elm=n.elm,g){for(var S=0;S<D.create.length;++S)D.create[S](oa,y);var T=y.data.hook.insert;if(T.merged)for(var k=1;k<T.fns.length;k++)T.fns[k]()}else pn(y);y=y.parent}i(v)?w(v,[t],0,0):i(t.tag)&&b(t)}}return C(n,f,l),n.elm}}({nodeOps:ra,modules:Pa});No&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&Nr(t,"input")});var Ua={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?dt(n,"postpatch",function(){Ua.componentUpdated(t,e,n)}):Cr(t,e,n.context),t._vOptions=[].map.call(t.options,xr)):("textarea"===n.tag||na(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",Dr),t.addEventListener("compositionend",Ar),t.addEventListener("change",Ar),No&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Cr(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,xr);if(i.some(function(t,e){return!E(t,r[e])})){(t.multiple?e.value.some(function(t){return kr(t,i)}):e.value!==e.oldValue&&kr(e.value,i))&&Nr(t,"change")}}}},Ba={bind:function(t,e,n){var r=e.value;n=Or(n);var i=n.data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,wr(n,function(){t.style.display=o})):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value;!r!=!e.oldValue&&(n=Or(n),n.data&&n.data.transition?(n.data.show=!0,r?wr(n,function(){t.style.display=t.__vOriginalDisplay}):_r(n,function(){t.style.display="none"})):t.style.display=r?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}},qa={model:Ua,show:Ba},Va={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]},ja={name:"transition",props:Va,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(function(t){return t.tag||Tt(t)}),n.length)){var r=this.mode,i=n[0];if(Pr(this.$vnode))return i;var o=Rr(i);if(!o)return i;if(this._leaving)return Mr(t,i);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var u=(o.data||(o.data={})).transition=Lr(this),c=this._vnode,h=Rr(c);if(o.data.directives&&o.data.directives.some(function(t){return"show"===t.name})&&(o.data.show=!0),h&&h.data&&!Fr(o,h)&&!Tt(h)&&(!h.componentInstance||!h.componentInstance._vnode.isComment)){var l=h.data.transition=_({},u);if("out-in"===r)return this._leaving=!0,dt(l,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),Mr(t,i);if("in-out"===r){if(Tt(o))return c;var f,d=function(){f()};dt(u,"afterEnter",d),dt(u,"enterCancelled",d),dt(l,"delayLeave",function(t){f=t})}}return i}}},$a=_({tag:String,moveClass:String},Va);delete $a.mode;var Wa={props:$a,render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],s=Lr(this),a=0;a<i.length;a++){var u=i[a];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),n[u.key]=u,(u.data||(u.data={})).transition=s;else;}if(r){for(var c=[],h=[],l=0;l<r.length;l++){var f=r[l];f.data.transition=s,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?c.push(f):h.push(f)}this.kept=t(e,null,c),this.removed=h}return t(e,null,o)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Ur),t.forEach(Br),t.forEach(qr),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,r=n.style;pr(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Da,n._moveCb=function t(r){r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Da,t),n._moveCb=null,mr(n,e))})}}))},methods:{hasMove:function(t,e){if(!Ca)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){lr(n,t)}),hr(n,e),n.style.display="none",this.$el.appendChild(n);var r=yr(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}},Ka={Transition:ja,TransitionGroup:Wa};Le.config.mustUseProp=$s,Le.config.isReservedTag=ta,Le.config.isReservedAttr=Vs,Le.config.getTagNamespace=Je,Le.config.isUnknownElement=Ze,_(Le.options.directives,qa),_(Le.options.components,Ka),Le.prototype.__patch__=Io?Fa:T,Le.prototype.$mount=function(t,e){return t=t&&Io?tn(t):void 0,Rt(this,t,e)},Io&&setTimeout(function(){To.devtools&&qo&&qo.emit("init",Le)},0);var Qa,Ha=/\{\{((?:.|\n)+?)\}\}/g,za=/[-.*+?^${}()|[\]\/\\]/g,Ga=y(function(t){var e=t[0].replace(za,"\\$&"),n=t[1].replace(za,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+n,"g")}),Xa={staticKeys:["staticClass"],transformNode:jr,genData:$r},Ya={staticKeys:["staticStyle"],transformNode:Wr,genData:Kr},Ja={decode:function(t){return Qa=Qa||document.createElement("div"),Qa.innerHTML=t,Qa.textContent}},Za=p("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),tu=p("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),eu=p("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),nu=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,ru="[a-zA-Z_][\\w\\-\\.]*",iu="((?:"+ru+"\\:)?"+ru+")",ou=new RegExp("^<"+iu),su=/^\s*(\/?)>/,au=new RegExp("^<\\/"+iu+"[^>]*>"),uu=/^<!DOCTYPE [^>]+>/i,cu=/^<!\--/,hu=/^<!\[/,lu=!1;"x".replace(/x(.)?/g,function(t,e){lu=""===e});var fu,du,pu,mu,vu,yu,gu,bu,wu,_u,Su,Tu=p("script,style,textarea",!0),Eu={},Cu={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t"},Iu=/&(?:lt|gt|quot|amp);/g,ku=/&(?:lt|gt|quot|amp|#10|#9);/g,xu=p("pre,textarea",!0),Du=function(t,e){return t&&xu(t)&&"\n"===e[0]},Au=/^@|^v-on:/,Nu=/^v-|^@|^:/,Ou=/([^]*?)\s+(?:in|of)\s+([^]*)/,Ru=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Lu=/^\(|\)$/g,Mu=/:(.*)$/,Pu=/^:|^v-bind:/,Fu=/\.[^.]+/g,Uu=y(Ja.decode),Bu=/^xmlns:NS\d+/,qu=/^NS\d+:/,Vu={preTransformNode:yi},ju=[Xa,Ya,Vu],$u={model:Qn,text:bi,html:wi},Wu={expectHTML:!0,modules:ju,directives:$u,isPreTag:Zs,isUnaryTag:Za,mustUseProp:$s,canBeLeftOpenTag:tu,isReservedTag:ta,getTagNamespace:Je,staticKeys:function(t){return t.reduce(function(t,e){return t.concat(e.staticKeys||[])},[]).join(",")}(ju)},Ku=y(Si),Qu=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,Hu=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,zu={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Gu={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete"]},Xu=function(t){return"if("+t+")return null;"},Yu={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Xu("$event.target !== $event.currentTarget"),ctrl:Xu("!$event.ctrlKey"),shift:Xu("!$event.shiftKey"),alt:Xu("!$event.altKey"),meta:Xu("!$event.metaKey"),left:Xu("'button' in $event && $event.button !== 0"),middle:Xu("'button' in $event && $event.button !== 1"),right:Xu("'button' in $event && $event.button !== 2")},Ju={on:Ni,bind:Oi,cloak:T},Zu=function(t){this.options=t,this.warn=t.warn||Dn,this.transforms=An(t.modules,"transformCode"),this.dataGenFns=An(t.modules,"genData"),this.directives=_(_({},Ju),t.directives);var e=t.isReservedTag||go;this.maybeComponent=function(t){return!e(t.tag)},this.onceId=0,this.staticRenderFns=[]},tc=(new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)"),function(t){return function(e){function n(n,r){var i=Object.create(e),o=[],s=[];if(i.warn=function(t,e){(e?s:o).push(t)},r){r.modules&&(i.modules=(e.modules||[]).concat(r.modules)),r.directives&&(i.directives=_(Object.create(e.directives||null),r.directives));for(var a in r)"modules"!==a&&"directives"!==a&&(i[a]=r[a])}var u=t(n,i);return u.errors=o,u.tips=s,u}return{compile:n,compileToFunctions:ro(n)}}}(function(t,e){var n=Gr(t.trim(),e);!1!==e.optimize&&_i(n,e);var r=Ri(n,e);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}})),ec=tc(Wu),nc=ec.compileToFunctions,rc=!!Io&&io(!1),ic=!!Io&&io(!0),oc=y(function(t){var e=tn(t);return e&&e.innerHTML}),sc=Le.prototype.$mount;Le.prototype.$mount=function(t,e){if((t=t&&tn(t))===document.body||t===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(r=oc(r));else{if(!r.nodeType)return this;r=r.innerHTML}else t&&(r=oo(t));if(r){var i=nc(r,{shouldDecodeNewlines:rc,shouldDecodeNewlinesForHref:ic,delimiters:n.delimiters,comments:n.comments},this),o=i.render,s=i.staticRenderFns;n.render=o,n.staticRenderFns=s}}return sc.call(this,t,e)},Le.compile=nc,e.a=Le}).call(e,n(4),n(7).setImmediate)},function(t,e,n){(function(t){function r(t,e){this._id=t,this._clearFn=e}var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;e.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(38),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,n(4))},function(t,e,n){"use strict";var r=n(44),i=n(48),o=n(52),s=n(114);e.a={components:{SetView:o.a,UserView:s.a,UserAndSetPicker:r.a,RefreshHandler:i.a},computed:{isMobile:function(){return this.$store.state.isMobile},currentSet:function(){return this.$store.state.setList[this.$store.state.currentSetId]},appState:function(){return this.$store.state.appState}},mounted:function(){var t=this;this.$nextTick(function(){return t.$el.focus()}),window.addEventListener("resize",this.checkWidth),this.checkWidth()},methods:{checkWidth:function(){this.$store.commit("setAppWidth",window.innerWidth)}}}},function(t,e,n){"use strict";var r=n(10),i=r.get;e.a={props:{},components:{},data:function(){return{isLoading:!1,inputUsername:"",dueReviews:{},setPickerOpen:!1}},computed:function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({currentUser:function(){return this.$store.state.currentUser},appState:function(){return this.$store.state.appState},setList:function(){return this.$store.state.setList},currentSetId:function(){return this.$store.state.currentSetId},currentCards:function(){return this.$store.state.setList[this.$store.state.currentSetId]?this.$store.state.setList[this.$store.state.currentSetId].cards:[]},isMobile:function(){return this.$store.state.isMobile}},"appState",function(){return this.$store.state.appState}),watch:{currentUser:function(t){this.isLoading=!1;var e=i("currentSetId");e&&""!==e&&this.$store.commit("setCurrentSetId",e),t||this.$nextTick(this.focusInput)},setList:function(){this.isLoading=!1,this.updateDueReviews()},currentCards:function(){this.updateDueReviews()},currentSetId:function(){this.isLoading=!1,this.updateDueReviews()}},mounted:function(){window.addEventListener("keydown",this.keyDown),this.updateDueReviews(),window.setInterval(this.updateDueReviews,6e5);var t=i("currentUser");t&&""!==t?(this.$store.dispatch("logInAs",t),this.isLoading=!0):this.$nextTick(this.focusInput)},beforeDestroy:function(){window.removeEventListener("keydown",this.keyDown)},methods:{logInAs:function(){""!==this.inputUserName&&(this.isLoading=!0,this.$store.dispatch("logInAs",this.inputUsername))},logOut:function(){this.$store.commit("logOut")},keyDown:function(t){if(this.currentUser)return this.updateDueReviews();"Enter"===t.key&&this.logInAs()},focusInput:function(){this.$refs.usernameInput.focus()},switchSet:function(t){this.$store.commit("setAppState","study"),this.$store.commit("setCurrentSetId",t)},updateDueReviews:function(){var t=Date.now();this.dueReviews={};for(var e in this.setList){new Date(this.setList[e].lastUpdated).getDate()!==(new Date).getDate()&&this.$store.commit("resetSetDay",e);var n=this.setList[e].settings.maxNewPerDay,r=this.setList[e].newToday,i=this.setList[e].cards.reduce(function(e,n){return n.nextReview<t&&n.totalReviews&&n.totalReviews>0&&!n.suspended?e+1:e},0),o=this.setList[e].cards.reduce(function(t,e){return e.totalReviews&&0!==e.totalReviews||e.suspended?t:t+1},0);this.dueReviews[e]=i+Math.min(n-Math.min(r,n),o)}}}}},function(t,e){function n(){if("object"===("undefined"==typeof localStorage?"undefined":o(localStorage)))try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage"),s=!0}catch(t){s=!1,console.log("LocalStorage is unavailable. Reverting to Cookies as a fallback.")}else s=!1}function r(t){for(var e=t+"=",n=decodeURIComponent(document.cookie),r=n.split(";"),i=0;i<r.length;i++){for(var o=r[i];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Date;r.setTime(r.getTime()+31536e6*(n?-1:1));var i="expires="+r.toUTCString();document.cookie=t+"="+e+";"+i+";path=/"}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=void 0;e.list=function(t){for(var e=[],n=Object.keys(localStorage),r=n.length;r--;)e.push(localStorage.getItem(n[r]));return e},e.set=function(t,e){var r=Array.isArray(e)||"object"===(void 0===e?"undefined":o(e))?encodeURI(JSON.stringify(e)):e;void 0===s&&n(),s?localStorage.setItem(t,r):i(t,e)},e.remove=function(t){void 0===s&&n(),s?localStorage.removeItem(t):i(t,"",!0)},e.get=function(t){return void 0===s&&n(),s?localStorage.getItem(t):r(t)}},function(t,e,n){"use strict";e.a={data:function(){return{startTime:null,requireRefreshTime:3e5,refreshing:!1}},computed:{currentUser:function(){return this.$store.state.currentUser},pauseDbSets:function(){return this.$store.state.pauseDbSets}},mounted:function(){this.startTime=Date.now(),window.addEventListener("focus",this.checkIfRefreshNeeded)},beforeDestroy:function(){window.removeEventListener("focus",this.checkIfRefreshNeeded)},methods:{checkIfRefreshNeeded:function(){this.currentUser&&Date.now()-this.startTime>this.requireRefreshTime&&this.refresh(),this.startTime=Date.now()},refresh:function(){this.startTime=Date.now(),this.$store.commit("setPauseDbSets",!0),this.$store.dispatch("logInAs",this.currentUser)}}}},function(t,e,n){"use strict";var r=n(3),i=n(58),o=n(65),s=n(90),a=n(101),u=n(109);e.a={props:{id:{},name:{},cards:{},lastStudied:{default:function(){return new Date}},newToday:{default:0},reviewsToday:{default:0}},components:{EditableTextField:r.a,SetSettings:a.a,SetStats:u.a,CardCreator:i.a,StudyFrame:o.a,SetBrowser:s.a},data:function(){return{newCardsToday:0,reviewCardsToday:0}},computed:{appState:function(){return this.$store.state.appState},isEditingText:function(){return this.$store.state.isEditingText}},mounted:function(){window.addEventListener("keyup",this.keyUp)},beforeDestroy:function(){window.removeEventListener("keyup",this.keyUp)},methods:{startEditName:function(){this.$store.commit("setIsEditingText",!0)},saveEditedName:function(t){this.$store.commit("updateSetName",t),this.$store.commit("setIsEditingText",!1)},keyUp:function(t){this.isEditingText||("s"===t.key&&this.$store.commit("setAppState","study"),"a"===t.key&&this.$store.commit("setAppState","addCard"),"b"===t.key&&this.$store.commit("setAppState","setBrowse"),"t"===t.key&&this.$store.commit("setAppState","setStats"),"e"===t.key&&this.$store.commit("setAppState","setSettings"))}}}},function(t,e,n){"use strict";e.a={props:{text:{required:!1,default:"",type:String},lineBreaksAllowed:{required:!1,default:!0,type:Boolean},acceptBlank:{required:!1,default:!1,type:Boolean},disableEdits:{required:!1,default:!1,type:Boolean},placeholder:{required:!1,default:"",type:String},focus:{required:!1,default:!1,type:Boolean}},components:{},data:function(){return{displayText:this.text,isEditing:!1,metaDown:!1,shiftDown:!1,isPlaceholder:0===this.text.length}},model:{prop:"text",event:"changeText"},computed:{},watch:{text:function(t){this.isEditing||this.resetTextTo(t)},disableEdits:function(t){this.isEditing=!1,this.metaDown=!1,this.shiftDown=!1},focus:function(t){var e=this;t&&this.$nextTick(function(){e.startEdit()})}},mounted:function(){window.addEventListener("keydown",this.keyDown),window.addEventListener("keyup",this.keyUp),this.isPlaceholder&&(this.displayText=this.placeholder),this.focus&&this.startEdit()},beforeDestroy:function(){window.removeEventListener("keydown",this.keyDown),window.removeEventListener("keyup",this.keyUp)},methods:{startEdit:function(){var t=this;this.isEditing||this.disableEdits||(this.isEditing=!0,this.isPlaceholder&&(this.displayText=""),this.isPlaceholder=!1,this.metaDown=!1,this.shiftDown=!1,this.$nextTick(function(){t.$el.focus(),t.$nextTick(t.selectText)}),this.$emit("startEdit",this.displayText))},resetTextTo:function(t){var e=this;this.displayText="",this.$el.innerHTML="",this.$nextTick(function(){e.displayText=t,t||!e.placeholder||e.isEditing||(e.displayText=e.placeholder,e.isPlaceholder=!0)})},commitEdit:function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.isEditing=!1,this.metaDown=!1,this.shiftDown=!1;var t=this.sanitize(this.$el.innerHTML);t.length>0?this.$emit("endEdit",t):this.resetTextTo(this.text)},keyDown:function(t){this.isEditing&&!this.disableEdits&&("Meta"===t.key&&(this.metaDown=!0),"Shift"===t.key&&(this.shiftDown=!0),"Enter"!==t.key||this.lineBreaksAllowed||this.commitEdit(),"Enter"===t.key&&this.metaDown&&this.commitEdit(),"Tab"===t.key&&this.shiftDown&&this.$emit("prev",t),"Tab"===t.key&&this.$emit("next",t),"Escape"===t.key&&(this.resetTextTo(this.text),this.$nextTick(this.commitEdit)))},keyUp:function(t){this.isEditing&&!this.disableEdits&&("Meta"===t.key&&(this.metaDown=!1),"Shift"===t.key&&(this.shiftDown=!1))},selectText:function(){if(document.body.createTextRange){var t=document.body.createTextRange();t.moveToElementText(this.$el),t.select()}else if(window.getSelection){var e=window.getSelection(),n=document.createRange();n.selectNodeContents(this.$el),e.removeAllRanges(),e.addRange(n)}},sanitize:function(t){return t.replace(/<div>/g,"\n").replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/^[\s\n\t]*/g,"").replace(/[\s\n\t]*$/g,"")},paste:function(t){t.stopPropagation(),t.preventDefault();var e=t.clipboardData||window.clipboardData,n=this.sanitize(e.getData("Text")),r=this.sanitize(this.$el.innerHTML),i=0,o=void 0,s=void 0;if(window.getSelection)o=window.getSelection(),o.rangeCount&&(s=o.getRangeAt(0),s.commonAncestorContainer.parentNode==this.$el&&(i=s.endOffset));else if(document.selection&&document.selection.createRange&&(s=document.selection.createRange(),s.parentElement()==this.$el)){var a=document.createElement("span");this.$el.insertBefore(a,this.$el.firstChild);var u=s.duplicate();u.moveToElementText(a),u.setEndPoint("EndToEnd",s),i=u.text.length}var c=r.substring(0,i)+n+r.substring(i);this.displayText=c,this.$emit("changeText",this.displayText)}}}},function(t,e,n){"use strict";var r=n(15),i=n(3);e.a={props:{},data:function(){return{front:"",back:"",metaDown:!1,floatText:"",isDuplicate:!1,setFocus:"front"}},components:{FloatingText:r.a,EditableTextField:i.a},computed:{cards:function(){return this.$store.state.setList[this.$store.state.currentSetId].cards}},watch:{front:function(t){if(t.length<2)return this.isDuplicate=!1;this.isDuplicate=this.cards.find(function(e){return e.front.toLowerCase()===t.toLowerCase()})}},mounted:function(){window.addEventListener("keydown",this.keyDown),window.addEventListener("keyup",this.keyUp),this.$store.commit("setAppState","addCard")},beforeDestroy:function(){window.removeEventListener("keydown",this.keyDown),window.removeEventListener("keyup",this.keyUp),this.$store.commit("setIsEditingText",!1)},methods:{newCard:function(){var t=this;this.front&&this.back&&(this.$store.commit("addCard",{id:Date.now(),front:this.front,back:this.back,nextReview:0,set:parseInt(this.$store.state.currentSetId)}),this.floatText="Card added.",setTimeout(function(){return t.floatText=""},1500),this.$nextTick(function(){t.front="",t.back="",t.isDuplicate=!1,t.setFocus=null,t.$nextTick(function(){return t.setFocus="front"})}))},keyDown:function(t){"Meta"===t.key&&(this.metaDown=!0),"Enter"===t.key&&this.metaDown&&this.$nextTick(this.newCard)},keyUp:function(t){"Meta"===t.key&&(this.metaDown=!1)},focus:function(){this.$store.commit("setIsEditingText",!0)},tab:function(t){var e=this;t.preventDefault(),this.setFocus=null,this.$nextTick(function(){return e.setFocus="back"})},shiftTab:function(t){var e=this;t.preventDefault(),this.setFocus=null,this.$nextTick(function(){return e.setFocus="front"})}}}},function(t,e,n){"use strict";function r(t){n(61)}var i=n(16),o=n(63),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-207684e4",null);e.a=u.exports},function(t,e,n){"use strict";e.a={props:{text:{},offset:{default:0},color:{default:"green"}},data:function(){return{textToFloat:null}},watch:{text:function(t){var e=this;this.textToFloat=null,this.$nextTick(function(){return e.textToFloat=e.text})}}}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=n(68),o=n(3),s=n(82),a=n(25),u=n(15),c=n(5);n.n(c);e.a={props:{cards:{}},components:{SingleCardStudy:i.a,ReviewGraph:a.a,FloatingText:u.a,EditableTextField:o.a,RemainingCardIndicator:s.a},data:function(){return{refreshCardsTimer:null,startedWith:0,displayTimeMod:null,updatedCards:[],cardsToStudy:[]}},computed:{appState:function(){return this.$store.state.appState},currentSetId:function(){return this.$store.state.currentSetId},settings:function(){return this.$store.state.setList[this.$store.state.currentSetId].settings||{}},newToday:function(){return this.$store.state.setList[this.$store.state.currentSetId].newToday},reviewsToday:function(){return this.$store.state.setList[this.$store.state.currentSetId].reviewsToday},doneForDay:function(){return this.doneReviewing&&this.doneWithNewCards},newCards:function(){var t=(this.settings.maxNewPerDay||0)-(this.newToday||0);return this.updatedCards.filter(function(t){return!t.totalReviews}).sort(function(t,e){return t.id>e.id?1:-1}).slice(0,t>0?t:0)},doneWithNewCards:function(){return this.newToday>=this.settings.maxNewPerDay||0===this.newCards.length},newCardsAreLeftOver:function(){return this.updatedCards.filter(function(t){return 0===t.totalReviews||!t.totalReviews}).length+this.newToday>this.settings.maxNewPerDay},newCardsLeftOver:function(){return this.newCardsAreLeftOver?this.updatedCards.filter(function(t){return 0===t.totalReviews||!t.totalReviews}).length:0},dueCards:function(){var t=Date.now();return this.updatedCards.filter(function(e){return e.totalReviews&&e.totalReviews>0&&e.nextReview<t}).sort(function(t,e){return t.nextReview>e.nextReview?1:-1})},doneReviewing:function(){return 0===this.dueCards.length||this.settings.maxReviewsPerDay&&this.reviewsToday>=this.settings.maxReviewsPerDay},reviewsAreLeftOver:function(){return this.doneReviewing&&this.dueCards.length},reviewsLeftOver:function(){return this.dueCards.length},allStudyableCards:function(){return this.doneWithNewCards?[].concat(r(this.dueCards)):[].concat(r(this.newCards),r(this.dueCards))},cardToStudy:function(){return this.cardsToStudy[0]},nextReviewIn:function(){if(this.settings.maxReviewsPerDay&&this.reviewsToday>=this.settings.maxReviewsPerDay)return"a day";var t=this.doneForDay?this.updatedCards.filter(function(t){return t.totalReviews&&t.totalReviews>0}):this.updatedCards,e=t.reduce(function(t,e){var n=e.nextReview;return n<t?n:t},1e19);return Object(c.msToString)(e-Date.now())}},watch:{currentSetId:function(){var t=this;this.toReview=[],this.$nextTick(function(){t.refreshCards(),t.startedWith=t.dueCards.length+t.newCards.length})},cards:function(){this.$nextTick(this.refreshCards)},doneForDay:function(t){t&&(this.$nextTick(this.refreshCards),this.startedWith=0)},allStudyableCards:function(t){var e=this,n=function(t){return t.sort(function(){return Math.random()-.5})},i=t.filter(function(t){return!e.cardsToStudy.find(function(e){return e.id===t.id})});if(!!this.cardsToStudy.find(function(e){return!t.find(function(t){return e.id===t.id})}))return this.cardsToStudy=this.settings.shuffleCards?n(t):t;if(0!==i.length){var o=[].concat(r(this.cardsToStudy),r(this.settings.shuffleCards?n(i):i));this.cardsToStudy=this.settings.shuffleCards?function(t){return[].concat(r(t.slice(0,1)),r(n(t.slice(1,t.length-2))),r(t.slice(t.length-2)))}(o):o.sort(function(t,e){return t.nextReview-e.nextReview})}}},mounted:function(){void 0!==this.settings.maxNewPerDay&&null!==this.settings.maxNewPerDay||this.$store.commit("updateSetSettings",{maxNewPerDay:10}),void 0!==this.settings.studyReverse&&null!==this.settings.studyReverse||this.$store.commit("updateSetSettings",{studyReverse:!1}),this.refreshCardsTimer=setInterval(this.refreshCards,1e4),this.refreshCards(),this.startedWith=this.dueCards.length+this.newCards.length},beforeDestroy:function(){clearInterval(this.refreshCardsTimer)},methods:{finishedCurrentCard:function(t){var e=this;if(this.cardsToStudy.shift(),void 0!==t){var n=t?"+"+Object(c.msToString)(t):"Again!";this.displayTimeMod=null,this.$nextTick(function(){return e.displayTimeMod=n})}},postponeCurrentCard:function(){var t=this;this.cardsToStudy.push(this.cardsToStudy.shift());this.displayTimeMod=null,this.$nextTick(function(){return t.displayTimeMod="Postponed!"})},refreshCards:function(){this.updatedCards=[].concat(r(this.cards.filter(function(t){return!t.suspended})))},updateMaxNewPerDay:function(t){var e=parseInt(t)||10;this.$store.commit("updateSetSettings",{maxNewPerDay:e})},updateMaxReviewsPerDay:function(t){var e=parseInt(t)||0;this.$store.commit("updateSetSettings",{maxReviewsPerDay:e})}}}},function(t,e,n){"use strict";var r=(n(3),n(19)),i=n(5),o=(n.n(i),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),s={ok:2,again:.1},a=[300,3e4];e.a={props:{reverse:{},front:{},back:{},id:{},set:{},timeMod:{default:0},nextReview:{default:0},totalReviews:{default:0},imageURL:{},created:{default:function(){return(new Date).getTime()}},ok:{default:0},again:{default:0}},components:{Card:r.a},data:function(){return{showBack:!1,startedCardTime:new Date,revealedBackTime:new Date,averageTime:7e3,reviewsSoFar:0}},computed:{settings:function(){return this.$store.state.setList[this.$store.state.currentSetId].settings},isStudying:function(){return"study"===this.$store.state.appState},isEditing:function(){return"editCard"===this.$store.state.appState},isMobile:function(){return this.$store.state.isMobile},isEditingText:function(){return this.$store.state.isEditingText},isNewCard:function(){return!this.totalReviews||0===this.totalReviews},timeBonuses:function(){return{ok:this.getTimeBonus("ok"),again:this.getTimeBonus("again")}},formattedTimeBonuses:function(){var t=o({},this.timeBonuses);for(var e in t)t[e]=Math.ceil(t[e]/1e3/60)+"m";return t}},watch:{id:function(t){this.startedCardTime=new Date,this.showBack=!1}},mounted:function(){window.addEventListener("keydown",this.keyDown),window.addEventListener("keyup",this.keyUp)},beforeDestroy:function(){window.removeEventListener("keydown",this.keyDown),window.removeEventListener("keyup",this.keyUp)},methods:{showBackAction:function(){this.showBack=!0,this.revealedBackTime=new Date},answer:function(t){this.showBack=!1,this.reviewsSoFar++;var e=this.revealedBackTime-this.startedCardTime,n=e<a[0]||e>a[1];n||(this.averageTime=this.averageTime*((this.reviewsSoFar-1)/this.reviewsSoFar)+e*(1/this.reviewsSoFar));var r={};r.answerTime=n?0:1-(e-a[0])/a[1];r.maturity=this.totalReviews>30?1:this.totalReviews/30;var o=.2*(this.ok||0)/(this.again||1);r.successRatio=o>1?1:o;var s=this.front.length+this.back.length-5;s<0&&(s=0);r.length=s>40?1:s/40;var u={answerTime:1,maturity:.8,successRatio:.8,length:.3},c=this.timeBonuses[t];for(var h in r)console.log(h+" bonus:",(r[h]*u[h]).toFixed(2)),c+=r[h]*u[h]*this.timeBonuses[t];c=Math.floor(c),console.log("old time mod:",Object(i.msToString)(this.timeMod)),console.log("new time mod:",Object(i.msToString)(c)),console.log("");var l=new Date(Date.now()+c).getTime(),f=this.totalReviews+1,d=this.again+("again"===t?1:0),p=f-d;this.$store.commit("studyCard",{id:this.id,lastStudied:Date.now(),timeMod:c,nextReview:l,totalReviews:f,ok:p,again:d}),this.$emit("done",c)},getTimeBonus:function(t){var e=(!this.timeMod||isNaN(this.timeMod)?0:this.timeMod)*s[t];return e<18e5&&(e=18e5),"again"===t&&(e=0),e},keyDown:function(t){this.isStudying&&!this.isEditingText&&("1"===t.key&&this.showBack?this.answer("again"):" "===t.key?(t.preventDefault(),this.showBack?this.answer("ok"):this.showBackAction()):"Enter"===t.key?this.showBack?this.answer("ok"):this.showBackAction():"2"===t.key&&this.showBack?this.answer("ok"):"p"===t.key&&this.$emit("postpone"))}}}},function(t,e,n){"use strict";function r(t){n(71)}var i=n(20),o=n(80),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-6ccc12f9",null);e.a=u.exports},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(3),o=n(21),s=n(76);e.a={props:{reverse:{default:!1},front:{},back:{},id:{required:!0},set:{required:!0},timeMod:{default:0},nextReview:{default:0},totalReviews:{default:0},created:{default:function(){return(new Date).getTime()}},ok:{default:0},again:{default:0},suspended:{default:!1},imageURL:{},forStudy:{default:!0},showBack:{default:!1},mini:{default:!1}},components:{EditableTextField:i.a,CardTools:o.a,StudyExtras:s.a},computed:{settings:function(){return this.$store.state.setList[this.$store.state.currentSetId].settings},isEditingText:function(){return this.$store.state.isEditingText},isNewCard:function(){return!this.totalReviews||0===this.totalReviews}},watch:{},mounted:function(){window.addEventListener("keydown",this.keyDown),window.addEventListener("keyup",this.keyUp)},beforeDestroy:function(){window.removeEventListener("keydown",this.keyDown),window.removeEventListener("keyup",this.keyUp)},methods:{startEdit:function(){"study"===this.$store.state.appState&&this.$store.commit("setAppState","editCard"),this.$store.commit("setIsEditingText",!0)},saveEditedCard:function(t,e){"editCard"===this.$store.state.appState&&this.$store.commit("setAppState","study"),this.$store.commit("setIsEditingText",!1),this[t]!==e&&this.$store.commit("updateCard",r({id:this.id},t,e))},setImageURL:function(t){this.$store.commit("updateCard",{id:this.id,imageURL:t})}}}},function(t,e,n){"use strict";function r(t){n(73)}var i=n(22),o=n(75),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-c924f178",null);e.a=u.exports},function(t,e,n){"use strict";var r=n(5);n.n(r);e.a={props:{id:{required:!0},setId:{required:!0},totalReviews:{default:0},ok:{default:0},front:{},back:{},nextReview:{},suspended:{},left:{default:!1},imageURL:{}},data:function(){return{open:!1,moveToSetOpen:!1,realSetId:this.setId}},computed:{isMobile:function(){return this.$store.state.isMobile},settings:function(){return this.$store.state.setList[this.$store.state.currentSetId].settings},allSets:function(){var t=this.$store.state.setList,e=[];for(var n in t)e.push({id:n,name:t[n].name});return e}},watch:{id:function(){this.open=!1}},mounted:function(){},methods:{msToString:r.msToString,toggle:function(t){this.$store.state.isMobile&&!t.path.includes(this.$refs.movetobutton)&&(this.open=!this.open),this.open?window.addEventListener("click",this.checkClickToClose):window.removeEventListener("click",this.checkClickToClose)},mouseover:function(){this.$store.state.isMobile||(this.open=!0)},mouseout:function(){this.$store.state.isMobile||(this.open=!1)},swapSides:function(){this.$store.commit("updateCard",{id:this.id,front:this.back,back:this.front}),this.open=!1},moveToSet:function(t){this.$store.commit("moveCard",{id:this.id,from:this.realSetId,to:t}),this.open=!1,this.realSetId=t},suspendCard:function(){this.$store.commit("updateCard",{id:this.id,suspended:!this.suspended}),this.open=!1},deleteCard:function(){var t=this;this.$store.commit("deleteCard",this.id),this.$emit("done"),this.showBack=!1,this.$nextTick(function(){try{t.$refs.deleteButton.blur()}catch(t){}}),this.open=!1},checkClickToClose:function(t){t.path.includes(this.$el)||(this.open=!1)},addImageURL:function(){var t=window.prompt("Enter an image url!");t&&this.$emit("setImageURL",t)},removeImageURL:function(){this.$emit("setImageURL","")}}}},function(t,e,n){"use strict";e.a={props:{text:{default:""},autoSpeak:{default:!1}},data:function(){return{speaker:null}},computed:{settings:function(){return this.$store.state.setList[this.$store.state.currentSetId].settings},searchString:function(){var t=this.text,e=this.text.indexOf("\n");return-1!==e&&(t=this.text.substring(0,e)),t},searchWord:function(){return this.searchString.toLowerCase().split(/[ \/;.,?!+]/).reduce(function(t,e){return e.length>t.length?e:t},"")},pronunciationLink:function(){return"https://forvo.com/word/"+this.searchWord+"/#"+this.settings.languageTools},translationLink:function(){return"https://translate.google.com/#"+this.settings.languageTools+"/en/"+this.searchString}},watch:{settings:function(t){this.speaker.lang=t.languageTools}},mounted:function(){window.speechSynthesis&&(this.speaker=new SpeechSynthesisUtterance,this.speaker.lang=this.settings.languageTools,this.speaker.volume=.4),this.settings.autoSpeak&&this.speakWord()},methods:{speakWord:function(){this.speaker&&(this.speaker.text=this.searchString,window.speechSynthesis.speak(this.speaker))}}}},function(t,e,n){"use strict";e.a={props:{toStudy:{},startedWith:{}},components:{},data:function(){return{}},computed:{adjustedStartedWith:function(){return this.toStudy.length>this.startedWith?this.toStudy.length:this.startedWith}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{}}},function(t,e,n){"use strict";function r(t){n(86)}var i=n(26),o=n(88),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-0fbd4bea",null);e.a=u.exports},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=n(5);n.n(i);e.a={props:{cards:{},slots:{default:10},maxTime:{default:null},title:{default:"All upcoming reviews:"}},components:{},data:function(){return{updateGraphTimer:null,reviewGraph:{},firstFrame:!0}},watch:{cards:function(){this.updateGraph()}},mounted:function(){var t=this;this.updateGraphTimer=setInterval(this.updateGraph,3e4),this.updateGraph(),setTimeout(function(){return t.firstFrame=!1},100)},beforeDestroy:function(){clearInterval(this.updateGraphTimer)},methods:{updateGraph:function(){if(this.cards&&0!==this.cards.length){for(var t=Date.now(),e=this.cards.map(function(e){return parseInt(e.nextReview)-t}),n=this.maxTime?this.maxTime:Math.max.apply(Math,r(e)),o=[],s=[],a=0;a<this.slots;a++)o[a]=0,s[this.slots-1-a]=Object(i.msToString)(n-n/this.slots*(a+.5));var u=!0,c=!1,h=void 0;try{for(var l,f=e[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var d=l.value,p=Math.floor(d/n*(this.slots-1));p>=this.slots||(o[p]?o[p]++:o[p]=1)}}catch(t){c=!0,h=t}finally{try{!u&&f.return&&f.return()}finally{if(c)throw h}}var m=Math.max.apply(Math,o);this.reviewGraph={graphPoints:o,labels:s,maxValue:m}}}}}},function(t,e,n){"use strict";var r=n(28);e.a={components:{Browser:r.a},computed:{setCards:function(){return this.$store.state.setList[this.$store.state.currentSetId].cards}}}},function(t,e,n){"use strict";function r(t){n(93)}var i=n(29),o=n(99),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-08adeb58",null);e.a=u.exports},function(t,e,n){"use strict";var r=n(95),i=n(19);e.a={props:{cards:{default:[]},inline:{default:!1}},components:{CardInline:r.a,Card:i.a},data:function(){return{shownCount:this.inline?40:20,typeFilter:"all",setFilter:"all",sortBy:"newest",searchTerm:"",selectedCards:[],forceDeselect:!1,moveAllPaneOpen:!1}},computed:{isMobile:function(){return this.$store.state.isMobile},allPresentSets:function(){var t=this;return Object.keys(this.$store.state.setList).filter(function(e){return t.cards.find(function(t){return t.set===parseInt(e)})}).map(function(e){return{id:parseInt(e),name:t.$store.state.setList[e].name}})},sortedCards:function(){var t=this;return this.cards.sort(function(e,n){return"oldest"===t.sortBy?e.id-n.id:"sets"===t.sortBy?n.set-e.set:n.id-e.id})},filteredCards:function(){var t=this;return this.sortedCards.filter(function(e){return"all"===t.setFilter||t.setFilter===e.set}).filter(function(e){return!t.searchTerm||-1!==e.front.toLowerCase().indexOf(t.searchTerm.toLowerCase())||-1!==e.back.toLowerCase().indexOf(t.searchTerm.toLowerCase())}).filter(function(e){return!!("all"===t.typeFilter||"new"===t.typeFilter&&(!e.totalReviews||0===e.totalReviews)||"notnew"===t.typeFilter&&e.totalReviews&&e.totalReviews>0||"mastered"===t.typeFilter&&e.ok&&e.ok>5&&e.ok/(e.again?e.again:0)>4||"trouble"===t.typeFilter&&e.again&&e.again>3&&e.again/(e.ok?e.ok:0)>=.5||"suspended"===t.typeFilter&&e.suspended||"notsuspended"===t.typeFilter&&!e.suspended)})},clampedCards:function(){return this.filteredCards.slice(0,this.shownCount)}},mounted:function(){var t=this;this.$refs.searchbar&&this.$nextTick(function(){return t.$refs.searchbar.focus()}),window.addEventListener("scroll",this.scroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.scroll)},methods:{showMore:function(){this.shownCount<this.cards.length&&(this.shownCount+=20)},scroll:function(){Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight-window.pageYOffset<500&&this.showMore()},select:function(t){var e=this.cards.find(function(e){return e.id===t});if(!e)return console.log("Unable to find card to check by the id",t);this.selectedCards.push(e)},deselect:function(t){var e=this.selectedCards.length;this.selectedCards=this.selectedCards.filter(function(e){return e.id!==t}),this.selectedCards.length!==e-1&&console.log("Unable to find card",t,"to deselect.")},deselectAll:function(){var t=this;this.forceDeselect=!1,this.$nextTick(function(){return t.forceDeselect=!0})},moveAll:function(t){var e=this;this.selectedCards.forEach(function(n){e.$store.commit("moveCard",{id:n.id,from:n.set,to:t})})},suspendAll:function(){var t=this,e=this.selectedCards[0].suspended;this.selectedCards.forEach(function(n){t.$store.commit("updateCard",{id:n.id,suspended:!e})})},deleteAll:function(){var t=this;confirm("Are you sure you want to delete "+this.selectedCards.length+" card"+(1===this.selectedCards.length?"":"s")+"?")&&(this.selectedCards.forEach(function(e){t.$store.commit("deleteCard",e.id)}),this.selectedCards=[])}}}},function(t,e,n){"use strict";var r=n(21);e.a={props:{front:{},back:{},id:{required:!0},set:{required:!0},timeMod:{default:0},nextReview:{default:0},totalReviews:{default:0},created:{default:function(){return(new Date).getTime()}},ok:{default:0},again:{default:0},suspended:{default:!1},imageURL:{},forceDeselect:{default:!1},showSet:{default:!1}},components:{CardTools:r.a},data:function(){return{selected:!1,shownFront:"",shownBack:""}},computed:{isNewCard:function(){return!this.totalReviews||0===this.totalReviews}},watch:{front:function(){this.updateText()},back:function(){this.updateText()},selected:function(t){t?this.$emit("select",this.id):this.$emit("deselect",this.id)},forceDeselect:function(t){t&&(this.selected=!1)}},mounted:function(){this.updateText()},methods:{click:function(t){var e=!1;t.path.forEach(function(t){t.classList&&t.classList.contains("cardtools")&&(e=!0)}),e||(this.selected=!this.selected)},updateText:function(){var t=document.createElement("textarea");t.innerHTML=this.front,this.shownFront=t.value,t.innerHTML=this.back,this.shownBack=t.value},setImageURL:function(t){this.$store.commit("updateCard",{id:this.id,imageURL:t})}}}},function(t,e,n){"use strict";function r(t,e){var n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",e+".json"),document.body.appendChild(r),r.click(),r.remove()}var i=n(3),o=n(104),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.a={props:{},components:{EditableTextField:i.a,Toggle:o.a},data:function(){return{selectedLanguageTools:null,languages:{none:"None",ar:"Arabic",zh:"Chinese",da:"Danish",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",ko:"Korean",es:"Spanish"}}},computed:{currentSet:function(){return this.$store.state.setList[this.$store.state.currentSetId]},settings:function(){return this.$store.state.setList[this.$store.state.currentSetId].settings||{}}},mounted:function(){this.selectedLanguageTools=this.settings.languageTools||"none"},beforeDestroy:function(){},watch:{selectedLanguageTools:function(t){var e="none"===t?null:t;this.updateSettings({languageTools:e})}},methods:{deleteSet:function(){confirm('Do you really want to delete the set "'+this.currentSet.name+'" with '+this.currentSet.cards.length+" cards?")&&(this.$store.commit("deleteSet",this.currentSet.id),this.$store.commit("setAppState","study"))},updateSettings:function(t){this.$store.commit("updateSetSettings",s({},t))},updateMaxNewPerDay:function(t){var e=0===parseInt(t)?0:parseInt(t)||10;this.$store.commit("updateSetSettings",{maxNewPerDay:e})},updateMaxReviewsPerDay:function(t){var e=0===parseInt(t)?0:parseInt(t)||0;this.$store.commit("updateSetSettings",{maxReviewsPerDay:e})},downloadSet:function(){r(this.currentSet,this.currentSet.name+" "+(new Date).toLocaleDateString()+" "+(new Date).toLocaleTimeString())}}}},function(t,e,n){"use strict";e.a={props:{setTo:{required:!1,type:Boolean,default:!1},label:{required:!1,type:String}},components:{},data:function(){return{on:this.setTo}},computed:{},watch:{setTo:function(t){this.on!==t&&this.toggle()}},methods:{toggle:function(){this.on=!this.on,this.$emit("toggled",this.on)}}}},function(t,e,n){"use strict";var r=n(25);e.a={props:{id:{}},components:{ReviewGraph:r.a},data:function(){return{}},computed:{currentSet:function(){return this.$store.state.setList[this.$store.state.currentSetId]},totalReviews:function(){return this.oks+this.agains},newCards:function(){return this.currentSet.cards.reduce(function(t,e){return t+(e.totalReviews&&0!==e.totalReviews?0:1)},0)},oks:function(){return this.currentSet.cards.reduce(function(t,e){return t+(e.ok?e.ok:0)},0)},agains:function(){return this.currentSet.cards.reduce(function(t,e){return t+(e.again?e.again:0)},0)},masteredCards:function(){return this.currentSet.cards.reduce(function(t,e){return t+(e.ok&&e.ok>5&&e.ok/(e.again?e.again:0)>4?1:0)},0)}},mounted:function(){},beforeDestroy:function(){},watch:{},methods:{}}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=n(28);e.a={props:{},components:{Browser:i.a},computed:{allSets:function(){return this.$store.state.setList},allCards:function(){var t=[];for(var e in this.allSets)t.push.apply(t,r(this.allSets[e].cards));return t}}}},function(t,e,n){"use strict";function r(){function t(t){f(p[t],"delete"),delete p[t]}function e(t){return t=t||a,s(p,t)||i("no-app",{name:t}),p[t]}function n(t,e){if(void 0===e&&(e={}),"object"!=typeof e||null===e){e={name:e}}var n=e;void 0===n.name&&(n.name=a);var r=n.name;"string"==typeof r&&r||i("bad-app-name",{name:r+""}),s(p,r)&&i("duplicate-app",{name:r});var o=new c(t,n,y);return p[r]=o,f(o,"create"),o}function u(){return Object.keys(p).map(function(t){return p[t]})}function h(t,n,r,s,a){m[t]&&i("duplicate-service",{name:t}),m[t]=n,s&&(v[t]=s,u().forEach(function(t){s("create",t)}));var h=function(n){return void 0===n&&(n=e()),"function"!=typeof n[t]&&i("invalid-app-argument",{name:t}),n[t]()};return void 0!==r&&o.deepExtend(h,r),y[t]=h,c.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,a?e:[])},h}function l(t){o.deepExtend(y,t)}function f(t,e){Object.keys(m).forEach(function(n){var r=d(t,n);null!==r&&v[r]&&v[r](e,t)})}function d(t,e){if("serverAuth"===e)return null;var n=e;t.options;return n}var p={},m={},v={},y={__esModule:!0,initializeApp:n,app:e,apps:null,Promise:Promise,SDK_VERSION:"5.5.0",INTERNAL:{registerService:h,createFirebaseNamespace:r,extendNamespace:l,createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,removeApp:t,factories:m,useAsService:d,Promise:Promise,deepExtend:o.deepExtend}};return o.patchProperty(y,"default",y),Object.defineProperty(y,"apps",{get:u}),o.patchProperty(e,"App",c),y}function i(t,e){throw l.create(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(127),s=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a="[DEFAULT]",u=[],c=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){u.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){u=u.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=a),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==a?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;o.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(u.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),u=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&i("app-deleted",{name:this.name_})},t}();c.prototype.name&&c.prototype.options||c.prototype.delete||console.log("dc");var h={"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."},l=new o.ErrorFactory("app","Firebase",h),f=r();e.firebase=f,e.default=f},function(t,e,n){"use strict";function r(t,e){function n(){this.constructor=t}_(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n}function o(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function s(t,e){return function(n,r){e(n,r,t)}}function a(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})}function c(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function h(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function l(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function d(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}function p(t){return this instanceof p?(this.v=t,this):new p(t)}function m(t,e,n){function r(t){h[t]&&(c[t]=function(e){return new Promise(function(n,r){l.push([t,e,n,r])>1||i(t,e)})})}function i(t,e){try{o(h[t](e))}catch(t){u(l[0][3],t)}}function o(t){t.value instanceof p?Promise.resolve(t.value.v).then(s,a):u(l[0][2],t)}function s(t){i("next",t)}function a(t){i("throw",t)}function u(t,e){t(e),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,h=n.apply(t,e||[]),l=[];return c={},r("next"),r("throw"),r("return"),c[Symbol.asyncIterator]=function(){return this},c}function v(t){function e(e,i){t[e]&&(n[e]=function(n){return(r=!r)?{value:p(t[e](n)),done:"return"===e}:i?i(n):n})}var n,r;return n={},e("next"),e("throw",function(t){throw t}),e("return"),n[Symbol.iterator]=function(){return this},n}function y(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):"function"==typeof l?l(t):t[Symbol.iterator]()}function g(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function b(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function w(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.__extends=r,n.d(e,"__assign",function(){return S}),e.__rest=i,e.__decorate=o,e.__param=s,e.__metadata=a,e.__awaiter=u,e.__generator=c,e.__exportStar=h,e.__values=l,e.__read=f,e.__spread=d,e.__await=p,e.__asyncGenerator=m,e.__asyncDelegator=v,e.__asyncValues=y,e.__makeTemplateObject=g,e.__importStar=b,e.__importDefault=w;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},S=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(40),o=n(119);new r.a({el:"#app",store:o.a,render:function(t){return t(i.a)}})},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return c[u]=r,a(u),u++}function i(t){delete c[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function s(t){if(h)setTimeout(s,0,t);else{var e=c[t];if(e){h=!0;try{o(e)}finally{i(t),h=!1}}}}if(!t.setImmediate){var a,u=1,c={},h=!1,l=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?function(){a=function(t){e.nextTick(function(){s(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&s(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),a=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){s(t.data)},a=function(e){t.port2.postMessage(e)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var t=l.documentElement;a=function(e){var n=l.createElement("script");n.onreadystatechange=function(){s(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){a=function(t){setTimeout(s,0,t)}}(),f.setImmediate=r,f.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(4),n(39))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function s(){m&&d&&(m=!1,d.length?p=d.concat(p):v=-1,p.length&&a())}function a(){if(!m){var t=i(s);m=!0;for(var e=p.length;e;){for(d=p,p=[];++v<e;)d&&d[v].run();v=-1,e=p.length}d=null,m=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var h,l,f=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var d,p=[],m=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||m||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){n(41)}var i=n(8),o=n(118),s=n(2),a=r,u=s(i.a,o.a,!1,a,null,null);e.a=u.exports},function(t,e,n){var r=n(42);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("7dfaa01e",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,"@import url(https://fonts.googleapis.com/css?family=Raleway);",""]),e.push([t.i,"body,html{margin:0;font-family:Avenir Neue,Avenir,Raleway,Helvetica,sans-serif}*{box-sizing:border-box}.app{min-height:120vh}.app.mobile{font-size:14.5px}.content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}a,a:active,a:hover,a:visited{color:#555}.sub{font-size:.85rem;opacity:.6;font-weight:500}.centertext,.keyicon{text-align:center}.keyicon{display:inline-block;border:1px solid rgba(0,0,0,.3);background:rgba(0,0,0,.05);color:rgba(0,0,0,.7);text-transform:uppercase;font-weight:600;font-size:.7em;padding:1px 5px;min-width:18px;border-radius:4px;box-shadow:0 2px 0 rgba(0,0,0,.2);margin-bottom:2px}@media (max-width:768px){.keyicon{display:none}}.visibletextfield{background:#fff;border:1px solid #bbb;border-radius:5px;text-align:center;padding:5px 0;position:relative}button{margin:0;border:1px solid rgba(0,0,0,.1);background:#fff;font-size:.85rem;font-weight:400;padding:10px;border-radius:10px;font-family:Avenir,sans-serif;cursor:pointer;transition:.2s}button.active,button:hover{background:#f8f8f8;border:1px solid transparent}.buttonlist{display:-ms-flexbox;display:flex;border-radius:10px;overflow:visible;border:1px solid rgba(0,0,0,.1);border-bottom:3px solid rgba(0,0,0,.1);-ms-flex-wrap:nowrap;flex-wrap:nowrap}.buttonlist button,.buttonlist select{-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:0;flex-shrink:0;border-radius:0;outline:0;border:none;box-shadow:inset -1px -1px 0 0 rgba(0,0,0,.1);position:relative;overflow:visible}.buttonlist button:first-of-type,.buttonlist select:first-of-type{border-top-left-radius:8px;border-bottom-left-radius:8px}.buttonlist button:last-of-type,.buttonlist select:last-of-type{border-top-right-radius:8px;border-bottom-right-radius:8px;border-right:none}.buttonlist select{padding-left:15px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url(\"data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='24' height='24' viewBox='0 0 24 24'><path fill='#444' d='M7.406 7.828l4.594 4.594 4.594-4.594 1.406 1.406-6 6-6-6z'></path></svg>\");background-position:98% 50%;background-repeat:no-repeat}.buttonlist.primary button,.buttonlist.primary select{font-size:1rem;padding:15px}select{border:1px solid #bbb;background:#fff;font-size:1rem;font-family:Avenir Neue,Avenir,Helvetica,sans-serif;height:37px}.roundframe{overflow:hidden;border-radius:10px}",""])},function(t,e){t.exports=function(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],s=o[0],a=o[1],u=o[2],c=o[3],h={id:t+":"+i,css:a,media:u,sourceMap:c};r[s]?r[s].parts.push(h):n.push(r[s]={id:s,parts:[h]})}return n}},function(t,e,n){"use strict";function r(t){n(45)}var i=n(9),o=n(47),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-251c4b02",null);e.a=u.exports},function(t,e,n){var r=n(46);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("65a8e1bc",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,".userandsetpicker[data-v-251c4b02]{padding:0 50px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;background:#eee;margin-bottom:30px;height:70px;transition:.5s;position:relative;z-index:10}@media (max-width:768px){.userandsetpicker[data-v-251c4b02]{padding:0 20px}}.userandsetpicker.fullscreen[data-v-251c4b02]{height:100vh;-ms-flex-pack:center;justify-content:center}.userandsetpicker.vertical[data-v-251c4b02]{-ms-flex-direction:column;flex-direction:column}.userandsetpicker.vertical>[data-v-251c4b02]{margin-bottom:20px}button:not(.active).duecards[data-v-251c4b02]{background:#fd8}.inlineblock[data-v-251c4b02]{display:inline-block}.flex-ai[data-v-251c4b02]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.buttonlist[data-v-251c4b02]{overflow:visible}button.mainbutton[data-v-251c4b02]{min-width:40vw}button.open[data-v-251c4b02]{border-bottom-right-radius:0;border-bottom-left-radius:0}.secondarypanel[data-v-251c4b02]{position:absolute;top:100%;left:0;width:100%}.secondarypanel button[data-v-251c4b02]{width:100%;border-radius:0;border:0;box-shadow:0 0 0 1px #eee}.secondarypanel button[data-v-251c4b02]:last-of-type{border-bottom-right-radius:10px;border-bottom-left-radius:10px}",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"userandsetpicker",class:{fullscreen:!t.currentUser||t.isLoading,vertical:!t.currentUser}},[t.currentUser||t.isLoading?t.isLoading?[n("div",{staticClass:"sub"},[t._v("Loading...")])]:[t.isMobile?n("div",{staticClass:"buttonlist"},["user"===t.appState?n("button",{staticClass:"mainbutton",on:{click:function(e){t.$store.commit("setAppState","study")}}},[t._v("\n         Back to Studying\n      ")]):n("button",{key:t.setList[t.currentSetId].id,staticClass:"mainbutton",class:{open:t.setPickerOpen},staticStyle:{position:"relative"},on:{click:function(e){t.setPickerOpen=!t.setPickerOpen}}},[t._v("\n        "+t._s(t.setList[t.currentSetId].name)+" \n        "),t.setPickerOpen?n("div",{staticClass:"secondarypanel"},[t._l(t.setList,function(e){return e.id!=t.currentSetId?n("button",{class:{duecards:t.dueReviews[e.id]>0},on:{key:e.id,click:function(n){t.switchSet(e.id)}}},[t._v("\n            "+t._s(e.name)+"\n          ")]):t._e()}),t._v(" "),n("button",{on:{click:function(e){t.$store.commit("addSet")}}},[t._v("+ Add Set")])],2):t._e()])]):n("div",{staticClass:"buttonlist inlineblock"},[t._l(t.setList,function(e){return n("button",{key:e.id,class:{active:parseInt(t.currentSetId)===parseInt(e.id)&&"user"!==t.appState},on:{click:function(n){t.switchSet(e.id)}}},[t._v("\n        "+t._s(e.name)+"\n        "),!t.isMobile&&t.dueReviews[e.id]>0&&(parseInt(t.currentSetId)!==parseInt(e.id)||"user"===t.appState)?n("span",{staticClass:"sub"},[t._v("\n          ("+t._s(t.dueReviews[e.id])+")\n        ")]):t._e()])}),n("button",{on:{click:function(e){t.$store.commit("addSet")}}},[t._v("+ Add Set")])],2),t._v(" "),n("div",{staticClass:"flex-ai"},[n("div",{staticClass:"buttonlist inlineblock"},[n("button",{class:{active:"user"===t.appState},on:{click:function(e){t.$store.commit("setAppState","user")}}},[t._v("\n          "+t._s(t.currentUser))]),n("button",{on:{click:t.logOut}},[t._v("Log out")])])])]:[t._m(0),t._v(" "),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputUsername,expression:"inputUsername"}],ref:"usernameInput",attrs:{placeholder:"username"},domProps:{value:t.inputUsername},on:{input:function(e){e.target.composing||(t.inputUsername=e.target.value)}}})]),t._v(" "),n("div",[n("button",{on:{click:t.logInAs}},[t._v("Go")])])]],2)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b",[t._v("Enter your username.")])])}],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";function r(t){n(49)}var i=n(11),o=n(51),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-564e876e",null);e.a=u.exports},function(t,e,n){var r=n(50);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("223c25fd",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,".refreshtakeover[data-v-564e876e]{position:fixed;z-index:2000;top:0;left:0;width:100vw;height:100vh;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;pointer-events:none;background:hsla(0,0%,100%,0);font-size:1.5em;transition:.4s}.refreshtakeover>[data-v-564e876e]{opacity:0;transition:.4s}.refreshtakeover.on[data-v-564e876e]{pointer-events:auto;background:hsla(0,0%,100%,.95)}.refreshtakeover.on>[data-v-564e876e]{opacity:1}",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"refreshtakeover",class:{on:t.pauseDbSets}},[n("span",[t._v("Loading data...")])])},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";function r(t){n(53)}var i=n(12),o=n(113),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-c52a86ce",null);e.a=u.exports},function(t,e,n){var r=n(54);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("c9b1a1bc",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,"h1[data-v-c52a86ce]{margin-bottom:.75rem}@media (max-width:768px){h1[data-v-c52a86ce]{margin-top:.5rem}}h1 div[data-v-c52a86ce]{display:inline-block}.padright[data-v-c52a86ce]{padding-right:10px}.setview[data-v-c52a86ce]{width:550px;max-width:100vw;padding:0 20px}.setelements[data-v-c52a86ce]{display:block;position:relative}.setelements>*>[data-v-c52a86ce],.setelements>[data-v-c52a86ce]{width:100%;position:absolute;top:0}",""])},function(t,e,n){var r=n(56);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("4da59d75",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,".editabletext{cursor:pointer;white-space:pre-wrap}.editabletext.placeholder{color:rgba(0,0,0,.2)}.editabletext.editabletextediting{cursor:text}",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"editabletext",class:{editabletextediting:t.isEditing,placeholder:t.isPlaceholder},attrs:{contenteditable:t.isEditing,tabindex:"0"},domProps:{innerHTML:t._s(t.displayText)},on:{focus:t.startEdit,click:t.startEdit,input:function(e){t.$emit("changeText",t.sanitize(t.$el.innerHTML))},blur:t.commitEdit,paste:t.paste}})},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";function r(t){n(59)}var i=n(14),o=n(64),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-13aafd53",null);e.a=u.exports},function(t,e,n){var r=n(60);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("0c01a9e9",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,'.cardcreator[data-v-13aafd53]{position:relative;margin:0 auto;opacity:1;transition:all .5s}.cardcreator>[data-v-13aafd53]{display:block}.cardcreator .textfield[data-v-13aafd53]{background:#f8f8f8;padding:50px 20px;white-space:pre-wrap;font-size:1.5rem;text-align:center;transition:background .2s;outline:0}.cardcreator .textfield.editabletextediting[data-v-13aafd53]{background:rgba(0,0,0,.05)}.cardcreator .textfield[data-v-13aafd53]:after{position:absolute;top:10px;right:-10px;opacity:0;content:"";transition:all .4s;font-weight:600;font-size:.5em}.cardcreator .textfield[data-v-13aafd53]:hover:not(.editabletextediting){position:relative;background:rgba(0,0,0,.05)}.cardcreator .textfield[data-v-13aafd53]:hover:not(.editabletextediting):after{right:10px;content:"Click to Edit";opacity:1;color:rgba(0,0,0,.2)}.cardcreator .textfield.duplicate[data-v-13aafd53]:after{right:10px;content:"Duplicate card!"!important;color:#f52!important;opacity:1}.cardcreator .back[data-v-13aafd53]{border-top:1px solid #ddd;transition:.2s}.cardcreator button[data-v-13aafd53]{width:100%;margin-top:20px}',""])},function(t,e,n){var r=n(62);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("356ed245",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,".floattext[data-v-207684e4]{z-index:1000;width:100%;left:0;position:absolute;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;font-weight:600;animation:pointsscroll-data-v-207684e4 1.5s normal forwards ease-out}@keyframes pointsscroll-data-v-207684e4{0%{opacity:0;bottom:0}50%{opacity:1}to{opacity:0;bottom:100px}}",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.textToFloat?n("div",{staticClass:"floattext",style:{transform:"translateY("+t.offset+"px)",color:t.color}},[t._v("\n\t\t"+t._s(t.textToFloat)+"\n\t")]):t._e()},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cardcreator"},[n("EditableTextField",{staticClass:"textfield front",class:{duplicate:t.isDuplicate},attrs:{focus:"front"===t.setFocus,placeholder:"Hint"},on:{startEdit:t.focus,next:t.tab},model:{value:t.front,callback:function(e){t.front=e},expression:"front"}}),t._v(" "),n("EditableTextField",{staticClass:"textfield back",attrs:{focus:"back"===t.setFocus,placeholder:"Answer"},on:{startEdit:t.focus,prev:t.shiftTab},model:{value:t.back,callback:function(e){t.back=e},expression:"back"}}),t._v(" "),n("FloatingText",{attrs:{text:t.floatText,offset:"-30"}}),t._v(" "),n("button",{on:{click:t.newCard}},[n("div",[t._v("Add Card")]),t._v(" "),n("div",{staticClass:"keyicon"},[t._v("-Enter")])])],1)},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";function r(t){n(66)}var i=n(17),o=n(89),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-5bf3ade2",null);e.a=u.exports},function(t,e,n){var r=n(67);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("39866047",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,".studyframe[data-v-5bf3ade2]{position:relative;opacity:.3;transition:all .5s}.studyframe.focus[data-v-5bf3ade2]{opacity:1}.padt-small[data-v-5bf3ade2]{padding-top:15px}.padtb-small[data-v-5bf3ade2]{padding-top:15px;padding-bottom:15px}.padtb[data-v-5bf3ade2]{padding:100px 0}.progressbar[data-v-5bf3ade2]{position:relative;width:100%;height:0}.progressbar div[data-v-5bf3ade2]{background:#ccc;transition:.5s;height:5px}.singlesetting[data-v-5bf3ade2]{display:inline-block;border-radius:5px;padding:15px 20px;background:#eee}.singlesetting>[data-v-5bf3ade2]{min-width:50px;display:inline-block}",""])},function(t,e,n){"use strict";function r(t){n(69)}var i=n(18),o=n(81),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-cc35958e",null);e.a=u.exports},function(t,e,n){var r=n(70);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("d7487480",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,".card[data-v-cc35958e]{margin-bottom:20px}.showback[data-v-cc35958e]{width:100%}",""])},function(t,e,n){var r=n(72);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("cb9674c4",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,'.card[data-v-6ccc12f9]{text-align:center;position:relative;overflow:initial}.topleft[data-v-6ccc12f9]{position:absolute;top:0;left:0}.back[data-v-6ccc12f9],.front[data-v-6ccc12f9]{transition:.2s;overflow:hidden;background:#f8f8f8;position:relative}.front[data-v-6ccc12f9]{border-top-right-radius:10px;border-top-left-radius:10px}.back[data-v-6ccc12f9]{border-bottom-right-radius:10px;border-bottom-left-radius:10px}.back img[data-v-6ccc12f9]{margin:0 auto;max-width:100%;max-height:300px}.textfield[data-v-6ccc12f9]{padding:45px 30px;white-space:pre-wrap;font-size:1.5rem}.textfield.editabletextediting[data-v-6ccc12f9]{background:rgba(0,0,0,.05)}.textfield[data-v-6ccc12f9]:hover:not(.editabletextediting){position:relative;background:rgba(0,0,0,.05)}.textfield[data-v-6ccc12f9]:hover:not(.editabletextediting):after{position:absolute;top:10px;right:10px;content:"CLICK TO EDIT";font-weight:600;font-size:.7rem;opacity:.2}.newcard[data-v-6ccc12f9]{color:#09c}.back[data-v-6ccc12f9]{border-top:1px solid rgba(0,0,0,.15);transition:.2s}.back.pointer[data-v-6ccc12f9]{cursor:pointer}.back .hideanswer[data-v-6ccc12f9]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;opacity:.15;filter:blur(7px)}.card.mini .textfield[data-v-6ccc12f9]{font-size:1rem;padding:20px 30px;line-height:1.2}.card.mini .back .textfield[data-v-6ccc12f9]{padding:20px 15px}.card.suspended[data-v-6ccc12f9]{position:relative}.card.suspended .textfield[data-v-6ccc12f9]{background:#f5f5f5;color:#bbb}.card.suspended[data-v-6ccc12f9]:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);content:"SUSPENDED";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;font-weight:600;font-size:1.7rem;opacity:1;color:#888}',""])},function(t,e,n){var r=n(74);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("125e2f8d",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,'.button[data-v-c924f178]{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:12px 5px;border-top:1px solid #ddd;cursor:pointer;text-align:center;width:150px;background:#eee}.button[data-v-c924f178]:hover{background:#ddd}.button[data-v-c924f178]:first-of-type{border-top-right-radius:10px}.button[data-v-c924f178]:last-of-type{border-bottom-right-radius:10px;border-bottom-left-radius:10px}.button[data-v-c924f178]:first-of-type:last-of-type{border-bottom-left-radius:0}.button[data-v-c924f178]:first-child{border-top:none}.cardtools .icon[data-v-c924f178]{cursor:pointer;width:30px;height:30px;border-radius:10px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;position:relative;z-index:2}.cardtools .icon svg[data-v-c924f178]{z-index:2;width:50%;height:50%;opacity:.1}.cardtools .icon.open[data-v-c924f178]{z-index:3;background:#eee;border-bottom-left-radius:0;border-bottom-right-radius:0}.cardtools .panel[data-v-c924f178]{color:#000;position:absolute;top:100%;left:0;width:150px;border-radius:10px;border-top-left-radius:0;background:#eee}.cardtools .panel[data-v-c924f178]:not(.open){display:none}.cardtools .panel.left[data-v-c924f178]{left:auto;right:0;border-radius:10px;border-top-right-radius:0}.cardtools .panel .stats[data-v-c924f178]{padding:10px 20px}.secondarypanel[data-v-c924f178]{position:absolute;left:100%;top:0}.secondarypanel.mobile[data-v-c924f178]{position:relative;left:-5px;top:12px;color:#555;font-size:.85em}.secondarypanel.mobile .button[data-v-c924f178]{border-radius:0}.secondarypanel.mobile .button[data-v-c924f178]:before{color:#555;content:"\\2192"}',""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.id?n("div",{staticClass:"cardtools",on:{mouseover:t.mouseover,click:t.toggle,mouseout:t.mouseout}},[n("div",{staticClass:"icon",class:{open:t.open}},[n("svg",{attrs:{width:"50px",height:"50px",viewBox:"0 0 50 50",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("g",{attrs:{fill:"#000000","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M25,33.76 C26.5600078,33.76 28.0199932,33.360004 29.38,32.56 C30.7400068,31.759996 31.819996,30.6900067 32.62,29.35 C33.420004,28.0099933 33.82,26.5600078 33.82,25 C33.82,23.4399922 33.420004,21.9800068 32.62,20.62 C31.819996,19.2599932 30.7400068,18.180004 29.38,17.38 C28.0199932,16.579996 26.5600078,16.18 25,16.18 C23.4399922,16.18 21.9900067,16.579996 20.65,17.38 C19.3099933,18.180004 18.240004,19.2599932 17.44,20.62 C16.639996,21.9800068 16.24,23.4399922 16.24,25 C16.24,26.5600078 16.639996,28.0099933 17.44,29.35 C18.240004,30.6900067 19.3099933,31.759996 20.65,32.56 C21.9900067,33.360004 23.4399922,33.76 25,33.76 Z M43.66,27.46 L48.88,31.54 C49.1200012,31.740001 49.2599998,31.9999984 49.3,32.32 C49.3400002,32.6400016 49.2800008,32.9399986 49.12,33.22 L44.08,41.86 C43.9199992,42.1400014 43.7100013,42.3199996 43.45,42.4 C43.1899987,42.4800004 42.9000016,42.4600006 42.58,42.34 L36.4,39.88 C34.799992,41.0400058 33.3800062,41.8599976 32.14,42.34 L31.24,48.88 C31.1599996,49.2000016 31.0100011,49.459999 30.79,49.66 C30.5699989,49.860001 30.3200014,49.96 30.04,49.96 L19.96,49.96 C19.6799986,49.96 19.4300011,49.860001 19.21,49.66 C18.9899989,49.459999 18.8600002,49.2000016 18.82,48.88 L17.86,42.34 C16.1799916,41.6599966 14.7800056,40.8400048 13.66,39.88 L7.42,42.34 C6.7799968,42.6200014 6.2800018,42.460003 5.92,41.86 L0.88,33.22 C0.7199992,32.9399986 0.6599998,32.6400016 0.7,32.32 C0.7400002,31.9999984 0.8799988,31.740001 1.12,31.54 L6.4,27.46 C6.3199996,26.8999972 6.28,26.0800054 6.28,25 C6.28,23.9199946 6.3199996,23.1000028 6.4,22.54 L1.12,18.46 C0.8799988,18.259999 0.7400002,18.0000016 0.7,17.68 C0.6599998,17.3599984 0.7199992,17.0600014 0.88,16.78 L5.92,8.14 C6.2800018,7.539997 6.7799968,7.3799986 7.42,7.66 L13.66,10.12 C15.1000072,9.0399946 16.4999932,8.2200028 17.86,7.66 L18.82,1.12 C18.8600002,0.7999984 18.9899989,0.540001 19.21,0.34 C19.4300011,0.139999 19.6799986,0.04 19.96,0.04 L30.04,0.04 C30.3200014,0.04 30.5699989,0.139999 30.79,0.34 C31.0100011,0.540001 31.1599996,0.7999984 31.24,1.12 L32.14,7.66 C33.7000078,8.260003 35.1199936,9.0799948 36.4,10.12 L42.58,7.66 C42.9000016,7.5399994 43.1899987,7.5199996 43.45,7.6 C43.7100013,7.6800004 43.9199992,7.8599986 44.08,8.14 L49.12,16.78 C49.2800008,17.0600014 49.3400002,17.3599984 49.3,17.68 C49.2599998,18.0000016 49.1200012,18.259999 48.88,18.46 L43.66,22.54 C43.7400004,23.1000028 43.78,23.9199946 43.78,25 C43.78,26.0800054 43.7400004,26.8999972 43.66,27.46 Z"}})])]),t._v(" "),n("div",{staticClass:"panel",class:{open:t.open,left:t.left}},[n("div",{staticClass:"stats sub"},[t.totalReviews>0?[n("div",[t._v("\n            "+t._s(t.totalReviews)+" review"+t._s(1===t.totalReviews?"":"s")+"\n          ")]),t._v(" "),n("div",[t._v(t._s(parseInt(t.ok/t.totalReviews*100))+"% success")])]:n("div",[t._v("This card is new.")])],2),t._v(" "),n("div",{staticClass:"button",on:{click:t.swapSides}},[t._v("Swap Front/Back")]),t._v(" "),t.imageURL?n("div",{staticClass:"button",on:{click:t.removeImageURL}},[t._v("\n        Remove Image\n      ")]):n("div",{staticClass:"button",on:{click:t.addImageURL}},[t._v("Set Image")]),t._v(" "),t.allSets.length>1?n("div",{ref:"movetobutton",staticClass:"button",on:{mouseover:function(e){!t.isMobile&&(t.moveToSetOpen=!0)},click:function(e){!!t.isMobile&&(t.moveToSetOpen=!t.moveToSetOpen)},mouseout:function(e){!t.isMobile&&(t.moveToSetOpen=!1)}}},[t._v("\n        Move to Set...\n        "),t.moveToSetOpen?n("div",{staticClass:"secondarypanel",class:{mobile:t.isMobile}},t._l(t.allSets,function(e){return e.id!=t.realSetId?n("div",{staticClass:"button",on:{key:e.id,click:function(n){t.moveToSet(e.id)}}},[t._v("\n            "+t._s(e.name)+"\n          ")]):t._e()})):t._e()]):t._e(),t._v(" "),n("div",{staticClass:"button",on:{click:t.suspendCard}},[t._v("\n        "+t._s(t.suspended?"Unsuspend Card":"Suspend Card")+"\n      ")]),t._v(" "),n("div",{staticClass:"button",on:{click:t.deleteCard}},[t._v("Delete Card")])])])]):t._e()},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";function r(t){n(77)}var i=n(23),o=n(79),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-096a59a3",null);e.a=u.exports},function(t,e,n){var r=n(78);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("38730fb5",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,".extras[data-v-096a59a3]{padding-bottom:20px}.fakelink[data-v-096a59a3]{text-decoration:underline;cursor:pointer}",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.text?n("div",{staticClass:"sub extras"},[t.speaker?[n("a",{staticClass:"fakelink",on:{click:t.speakWord}},[t._v("Speak it")]),n("span",[t._v("  ")])]:t._e(),t._v(" "),n("a",{attrs:{target:"_blank",href:t.pronunciationLink}},[t._v("Native")]),n("span",[t._v("  ")]),t._v(" "),n("a",{attrs:{target:"_blank",href:t.translationLink}},[t._v("Translation")])],2):t._e()},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card roundframe",class:{new:!t.totalReviews,mini:t.mini,suspended:t.suspended}},[n("CardTools",{staticClass:"topleft",attrs:{id:t.id,totalReviews:t.totalReviews,ok:t.ok,front:t.front,back:t.back,nextReview:t.nextReview,setId:t.set,suspended:t.suspended,imageURL:t.imageURL},on:{setImageURL:t.setImageURL}}),t._v(" "),n("div",{staticClass:"front"},[n("EditableTextField",{staticClass:"textfield",class:{newcard:t.isNewCard},attrs:{text:t.reverse?t.back:t.front},on:{startEdit:t.startEdit,endEdit:function(e){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];t.saveEditedCard.apply(void 0,[t.reverse?"back":"front"].concat(r))}}}),t._v(" "),t.reverse&&t.settings.languageTools&&t.forStudy?n("StudyExtras",{attrs:{text:t.back}}):t._e()],1),t._v(" "),n("div",{staticClass:"back",class:{pointer:!1===t.showBack&&t.forStudy},on:{click:function(e){t.$emit("showBack")}}},[n("div",{class:{hideanswer:!t.showBack&&t.forStudy}},[n("EditableTextField",{staticClass:"textfield",class:{newcard:t.isNewCard},attrs:{text:t.reverse?t.front:t.back},on:{startEdit:t.startEdit,endEdit:function(e){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];t.saveEditedCard.apply(void 0,[t.reverse?"front":"back"].concat(r))}}}),t._v(" "),t.imageURL?n("img",{attrs:{src:t.imageURL}}):t._e(),t._v(" "),t.showBack&&!t.reverse&&t.settings.languageTools&&t.forStudy?n("StudyExtras",{attrs:{text:t.back}}):t._e()],1)])],1)},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Card",{staticClass:"card",attrs:{id:t.id,front:t.front,back:t.back,reverse:t.reverse,timeMod:t.timeMod,nextReview:t.nextReview,totalReviews:t.totalReviews,created:t.created,ok:t.ok,again:t.again,forStudy:!0,showBack:t.showBack,set:t.set,imageURL:t.imageURL},on:{showBack:t.showBackAction}}),t._v(" "),n("div",{staticClass:"buttonlist primary"},[t.showBack?[void 0!==t.timeBonuses.again?n("button",{key:"again",on:{click:function(e){t.answer("again")}}},[t._v("\n        Wrong\n        "),t._m(1)]):t._e(),t.timeBonuses.ok?n("button",{key:"ok",on:{click:function(e){t.answer("ok")}}},[t._v("\n        Right\n        "),n("div",[n("span",{staticClass:"keyicon"},[t._v("2")]),t._v(" "),t.isMobile?t._e():n("span",[t._v(" / ")]),t._v(" "),n("span",{staticClass:"keyicon"},[t._v("Space")])])]):t._e()]:n("button",{key:"showback",staticClass:"showback",on:{click:t.showBackAction}},[t._v("\n      Show Back\n      "),t._m(0)])],2),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"centertext"},[n("button",{staticStyle:{"padding-right":"15%","padding-left":"15%"},on:{click:function(e){t.$emit("postpone")}}},[t._v("\n      Postpone\n      "),t._m(2)])])],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticClass:"keyicon"},[t._v("Space")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticClass:"keyicon"},[t._v("1")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticClass:"keyicon"},[t._v("P")])])}],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";function r(t){n(83)}var i=n(24),o=n(85),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-151e18f5",null);e.a=u.exports},function(t,e,n){var r=n(84);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("64ce592a",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,".remainingcards[data-v-151e18f5]{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;width:100%;height:10px;position:relative;margin:10px 0 20px}.remainingcards .card[data-v-151e18f5]{-ms-flex-negative:1;flex-shrink:1;-ms-flex-positive:0;flex-grow:0;width:4px;height:4px;background:#ddd;opacity:.5;transform:scaleX(1)}.remainingcards .card.review[data-v-151e18f5]{background:#bbb}.remainingcards .card.review.current[data-v-151e18f5]{opacity:1}.remainingcards .card.new[data-v-151e18f5]{background:#bbb}.remainingcards .card.new.current[data-v-151e18f5]{opacity:1}.remainingcards .card.current[data-v-151e18f5]{-ms-flex-negative:0;flex-shrink:0;animation-duration:0s;width:10px;height:10px;border-radius:5px}",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"remainingcards"},[t._l(t.adjustedStartedWith-t.toStudy.length>0?t.adjustedStartedWith-t.toStudy.length:0,function(t){return n("div",{key:t,staticClass:"card"})}),t._v(" "),t._l(t.toStudy,function(t,e){return n("div",{key:t.id,staticClass:"card",class:{review:t.totalReviews,new:!t.totalReviews,current:0===e}})})],2)},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){var r=n(87);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("b5e3777e",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,".reviewgraph[data-v-0fbd4bea]{width:100%;margin-bottom:30px}.reviewgraph .bars[data-v-0fbd4bea]{height:70px;display:-ms-flexbox;display:flex;-ms-flex-pack:stretch;justify-content:stretch;-ms-flex-align:end;align-items:flex-end}.reviewgraph .bars .fill[data-v-0fbd4bea]{-ms-flex:1;flex:1;background:#ddd;margin:0 3px;border-top-right-radius:5px;border-top-left-radius:5px;position:relative;transition:all 1s;height:0}.reviewgraph .count[data-v-0fbd4bea]{font-size:.8em;opacity:.3;position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(-93%)}.reviewgraph .labels[data-v-0fbd4bea]{margin-top:2px;display:-ms-flexbox;display:flex;-ms-flex-pack:stretch;justify-content:stretch;text-align:center}.reviewgraph .labels>[data-v-0fbd4bea]{-ms-flex:1;flex:1}",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reviewgraph"},[t.reviewGraph.graphPoints?n("h4",[t._v(t._s(t.title))]):t._e(),t._v(" "),n("div",{staticClass:"bars"},t._l(t.reviewGraph.graphPoints,function(e,r){return n("div",{key:"bar"+r,staticClass:"fill",style:{height:t.firstFrame?0:e/t.reviewGraph.maxValue*100+"%"}},[n("div",{staticClass:"count"},[t._v(t._s(e))])])})),t._v(" "),n("div",{staticClass:"labels"},t._l(t.reviewGraph.labels,function(e,r){return n("span",{key:"label"+r,staticClass:"sub"},[t._v(t._s(e)+"\n    ")])}))])},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"studyframe",class:{focus:"study"===t.appState||"editCard"===t.appState}},[t.settings.studyReverse?n("div",{staticClass:"sub"},[t._v("\n    Studying cards back-to-front.\n    "),n("u",{staticStyle:{cursor:"pointer"},on:{click:function(e){t.$store.commit("updateSetSettings",{studyReverse:!1})}}},[t._v("\n      Back to normal\n    ")])]):t._e(),t._v(" "),n("FloatingText",{attrs:{text:t.displayTimeMod,color:t.displayTimeMod?"Again!"===t.displayTimeMod?"#fa4":"#0c6":"green",offset:"-120"}}),t._v(" "),t.doneForDay?t.doneForDay&&t.reviewsAreLeftOver?[n("div",{staticClass:"padtb centertext"},[n("h3",[t._v("Done for now!")]),t._v(" "),n("div",[t._v("\n        There "+t._s(1===t.reviewsLeftOver?"is":"are")+"\n        "),n("b",[t._v(t._s(t.reviewsLeftOver))]),t._v(" more card"+t._s(1===t.reviewsLeftOver?"":"s")+"\n        due to be reviewed. If you want to study more cards today, change the\n        setting below.\n      ")]),t._v(" "),n("p",{staticClass:"singlesetting"},[n("EditableTextField",{staticClass:"visibletextfield",attrs:{text:""+t.settings.maxReviewsPerDay,lineBreaksAllowed:!1},on:{endEdit:t.updateMaxReviewsPerDay}}),t._v(" "),n("b",[t._v("Max reviews per day (0 for no limit)")])],1),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),t.nextReviewIn?n("p",[t._v("Otherwise, come back tomorrow to study more.")]):t._e()])]:t.doneForDay&&t.newCardsAreLeftOver?[n("div",{staticClass:"padtb centertext"},[n("h3",[t._v("Done for now!")]),t._v(" "),n("div",[t._v("\n        There "+t._s(1===t.newCardsLeftOver?"is":"are")+"\n        "),n("b",[t._v(t._s(t.newCardsLeftOver))]),t._v(" new card"+t._s(1===t.newCardsLeftOver?"":"s")+"\n        remaining to be learned. If you want to study more new cards, change\n        the setting below.\n      ")]),t._v(" "),n("p",{staticClass:"singlesetting"},[n("EditableTextField",{staticClass:"visibletextfield",attrs:{text:""+t.settings.maxNewPerDay,lineBreaksAllowed:!1},on:{endEdit:t.updateMaxNewPerDay}}),t._v(" "),n("b",[t._v("New cards per day")])],1),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),t.nextReviewIn?n("p",[t._v("\n        Otherwise, your next review is in "+t._s(t.nextReviewIn)+".\n      ")]):t._e()])]:0===t.cards.length?[n("div",{staticClass:"padtb centertext"},[n("h3",[t._v("No cards yet!")]),t._v(" "),n("button",{on:{click:function(e){t.$store.commit("setAppState","addCard")}}},[t._v("\n        + Add Cards\n      ")])])]:[n("div",{staticClass:"padtb centertext"},[n("h3",[t._v("Done for now!")]),t._v(" "),t.nextReviewIn?n("div",[t._v("\n        Your next review is in "+t._s(t.nextReviewIn)+".\n      ")]):t._e()])]:[n("div",{staticClass:"sub centertext padt-small"},[t.newCards.length>0?n("span",[n("b",[t._v(t._s(t.newCards.length))]),t._v(" new card"+t._s(1===t.newCards.length?"":"s")+"\n        "),t.dueCards.length>0?n("span",[t._v("and")]):t._e()]):t._e(),t._v(" "),t.dueCards.length>0?n("span",[n("b",[t._v(t._s(t.dueCards.length))]),t._v(" review"+t._s(1===t.dueCards.length?"":"s")+"\n      ")]):t._e(),t._v("\n      left.\n    ")]),t._v(" "),n("RemainingCardIndicator",{attrs:{toStudy:t.allStudyableCards,startedWith:t.startedWith}}),t._v(" "),n("SingleCardStudy",t._b({attrs:{reverse:t.settings.studyReverse},on:{done:t.finishedCurrentCard,postpone:t.postponeCurrentCard}},"SingleCardStudy",t.cardToStudy,!1))],t._v(" "),t.doneForDay&&t.cards.length>0?[n("ReviewGraph",{attrs:{cards:t.updatedCards,slots:7,maxTime:6048e5,title:"Upcoming reviews:"}})]:t._e()],2)},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";function r(t){n(91)}var i=n(27),o=n(100),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-26eeee3a",null);e.a=u.exports},function(t,e,n){var r=n(92);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("0b1aeaa2",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,".cardbrowser[data-v-26eeee3a]{position:relative;margin:0 auto;transition:all .5s;margin-bottom:200px;font-size:1rem}.add[data-v-26eeee3a]{margin-top:40px;width:100%}",""])},function(t,e,n){var r=n(94);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("5d54db0e",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,".browser[data-v-08adeb58]{width:100%}.tools[data-v-08adeb58]{position:-webkit-sticky;position:sticky;padding:10px 0 1px;top:0;z-index:1000;background:#fff}.buttonlist[data-v-08adeb58]{margin-bottom:10px}.secondarypanel[data-v-08adeb58]{position:absolute;left:0;top:100%;background:#f5f5f5;width:100%}.secondarypanel>div[data-v-08adeb58]{width:100%;overflow:hidden;text-align:center;padding:10px 15px}.secondarypanel>div[data-v-08adeb58]:hover{background:#eee}.searchbar[data-v-08adeb58]{width:100%;border-radius:7px;border:1px solid #eee;font-size:1.2rem;font-family:Avenir Neue,Avenir,Helvetica,sans-serif;padding:10px;margin-bottom:10px}.twoupcardlist[data-v-08adeb58]{display:-ms-grid;display:grid;-ms-grid-columns:48% 48%;grid-template-columns:48% 48%;grid-gap:10px 4%;text-align:center}",""])},function(t,e,n){"use strict";function r(t){n(96)}var i=n(30),o=n(98),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-5d24f70b",null);e.a=u.exports},function(t,e,n){var r=n(97);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("5d976151",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,'input[type=checkbox][data-v-5d24f70b]{margin:0;width:100%;height:100%}.card[data-v-5d24f70b]{cursor:pointer;text-align:left;position:relative;overflow:initial;display:-ms-grid;display:grid;-ms-grid-columns:20px 30% 1fr 15% 30px;grid-template-columns:20px 30% 1fr 15% 30px;grid-gap:10px;line-height:1.3}.card.noset[data-v-5d24f70b]{-ms-grid-columns:20px 40% 1fr 30px;grid-template-columns:20px 40% 1fr 30px}.card[data-v-5d24f70b]:nth-child(2n){background:#fbfbfb}.card.selected[data-v-5d24f70b]{background:#eee}.card>[data-v-5d24f70b]{height:100%;padding:12px 0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.newcard[data-v-5d24f70b]{color:#09c}.center[data-v-5d24f70b]{text-align:center}.card.suspended .cardtext[data-v-5d24f70b]{color:#bbb}.card.suspended[data-v-5d24f70b]:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);content:"SUSPENDED";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;font-weight:600;font-size:1.4rem;opacity:1;color:#888}',""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card",class:{newcard:!t.totalReviews,selected:t.selected,suspended:t.suspended,noset:!t.showSet},on:{click:t.click}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selected)?t._i(t.selected,null)>-1:t.selected},on:{change:function(e){var n=t.selected,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=t._i(n,null);r.checked?o<0&&(t.selected=n.concat([null])):o>-1&&(t.selected=n.slice(0,o).concat(n.slice(o+1)))}else t.selected=i}}}),t._v(" "),n("div",{staticClass:"cardtext"},[t._v(t._s(t.shownFront))]),t._v(" "),n("div",{staticClass:"cardtext"},[t._v(t._s(t.shownBack))]),t._v(" "),t.showSet?n("div",{staticClass:"sub center"},[t._v("\n    "+t._s(t.$store.state.setList[t.set].name)+"\n  ")]):t._e(),t._v(" "),n("div",{staticStyle:{position:"relative"}},[n("CardTools",{attrs:{id:t.id,setId:t.set,totalReviews:t.totalReviews,ok:t.ok,front:t.front,back:t.back,nextReview:t.nextReview,suspended:t.suspended,imageURL:t.imageURL,left:!0},on:{setImageURL:t.setImageURL}})],1)])},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"browser"},[n("div",{staticClass:"tools"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],ref:"searchbar",staticClass:"searchbar",attrs:{placeholder:"Type to filter..."},domProps:{value:t.searchTerm},on:{focus:function(e){t.$store.commit("setIsEditingText",!0)},blur:function(e){t.$store.commit("setIsEditingText",!1)},input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}}),t._v(" "),n("div",{staticClass:"buttonlist"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.sortBy,expression:"sortBy"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.sortBy=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"newest"}},[t._v(t._s(t.isMobile?"":"Sort by ")+"Newest")]),t._v(" "),n("option",{attrs:{value:"oldest"}},[t._v(t._s(t.isMobile?"":"Sort by ")+"Oldest")]),t._v(" "),t.allPresentSets.length>1?n("option",{attrs:{value:"sets"}},[t._v(t._s(t.isMobile?"By ":"Sort by ")+"Set")]):t._e()]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.typeFilter,expression:"typeFilter"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.typeFilter=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"all"}},[t._v("All Cards")]),t._v(" "),n("option",{attrs:{value:"new"}},[t._v("New")]),t._v(" "),n("option",{attrs:{value:"notnew"}},[t._v("Not New")]),t._v(" "),n("option",{attrs:{value:"mastered"}},[t._v("Mastered")]),t._v(" "),n("option",{attrs:{value:"trouble"}},[t._v("Trouble")]),t._v(" "),n("option",{attrs:{value:"suspended"}},[t._v("Suspended")]),t._v(" "),n("option",{attrs:{value:"notsuspended"}},[t._v("Not Suspended")])]),t._v(" "),t.allPresentSets.length>1?n("select",{directives:[{name:"model",rawName:"v-model",value:t.setFilter,expression:"setFilter"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.setFilter=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"all"}},[t._v("All Sets")]),t._v(" "),t._l(t.allPresentSets,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2):t._e()]),t._v(" "),t.selectedCards.length?[n("div",{staticClass:"buttonlist withoverflow"},[n("button",{on:{click:t.deselectAll}},[t._v("\n          Deselect"+t._s(t.isMobile?"":" All")+"\n        ")]),t._v(" "),n("button",{on:{mouseover:function(e){!t.isMobile&&(t.moveAllPaneOpen=!0)},click:function(e){!!t.isMobile&&(t.moveAllPaneOpen=!t.moveAllPaneOpen)},mouseout:function(e){!t.isMobile&&(t.moveAllPaneOpen=!1)}}},[t._v("\n          Move"),t.isMobile?t._e():n("span",[t._v("\n            "+t._s(t.selectedCards.length)+" Card"+t._s(1===t.selectedCards.length?"":"s"))]),t._v(" "),t.moveAllPaneOpen?n("div",{staticClass:"secondarypanel"},t._l(t.$store.state.setList,function(e){return n("div",{staticClass:"button",on:{key:e.id,click:function(n){t.moveAll(e.id)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])})):t._e()]),t._v(" "),n("button",{on:{click:t.suspendAll}},[t._v("\n          Un/Suspend"),t.isMobile?t._e():n("span",[t._v("\n            "+t._s(t.selectedCards.length)+" Card"+t._s(1===t.selectedCards.length?"":"s"))])]),t._v(" "),n("button",{on:{click:t.deleteAll}},[t._v("\n          Delete"),t.isMobile?t._e():n("span",[t._v("\n            "+t._s(t.selectedCards.length)+" Card"+t._s(1===t.selectedCards.length?"":"s"))])])])]:t._e()],2),t._v(" "),t.filteredCards.length?[t._l(t.clampedCards,function(e){return t.inline?n("CardInline",t._b({key:e.id,attrs:{forceDeselect:t.forceDeselect,showSet:t.allPresentSets.length>1},on:{select:t.select,deselect:t.deselect}},"CardInline",e,!1)):t._e()}),t._v(" "),t.inline?t._e():n("div",{staticClass:"twoupcardlist"},t._l(t.clampedCards,function(e){return n("Card",t._b({key:e.id,staticClass:"card",attrs:{forStudy:!1,mini:!0}},"Card",e,!1))}))]:n("div",[n("br"),t._v(" "),n("center",[t._v("No cards to show here!")])],1)],2)},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cardbrowser"},[n("Browser",{attrs:{cards:t.setCards}}),t._v(" "),n("button",{staticClass:"add",on:{click:function(e){t.$store.commit("setAppState","addCard")}}},[n("div",[t._v("Add Card")])])],1)},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";function r(t){n(102)}var i=n(31),o=n(108),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-92616a8e",null);e.a=u.exports},function(t,e,n){var r=n(103);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("ab35ca6e",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,".settingslist[data-v-92616a8e]{max-width:300px;margin:0 auto;margin-top:20px}.settingslist>[data-v-92616a8e]{margin-bottom:40px}p[data-v-92616a8e]{margin-bottom:10px}p>[data-v-92616a8e]{display:inline-block;min-width:55px}.below[data-v-92616a8e]{position:absolute;left:0;top:100%}button[data-v-92616a8e]{width:100%}.marright[data-v-92616a8e]{margin-right:10px}",""])},function(t,e,n){"use strict";function r(t){n(105)}var i=n(32),o=n(107),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-3ed99d27",null);e.a=u.exports},function(t,e,n){var r=n(106);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("24f67d14",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,'.toggle[data-v-3ed99d27]{display:-ms-grid;display:grid;-ms-grid-columns:60px 1fr;grid-template-columns:60px 1fr;grid-gap:10px;cursor:pointer}.toggle .icon[data-v-3ed99d27]{position:relative;width:3.7rem;height:1.7rem;border:1px solid #bbb;border-radius:.85rem;z-index:1;transition:.3s}.toggle .icon[data-v-3ed99d27]:before{content:"OFF";position:absolute;left:55%;top:24%;font-size:.65rem;font-weight:800;opacity:.5;z-index:1;transition:.3s}.toggle .icon[data-v-3ed99d27]:after{content:"";position:absolute;left:5%;top:6%;width:1.4rem;height:1.4rem;z-index:2;background:#bbb;border-radius:.7rem;transition:.3s}.toggle.on .icon[data-v-3ed99d27]{border:1px solid transparent;background:#4c4}.toggle.on .icon[data-v-3ed99d27]:before{content:"ON";color:#fff;opacity:1;left:15%}.toggle.on .icon[data-v-3ed99d27]:after{left:58%;background:#fff}.toggle .label[data-v-3ed99d27]{margin-top:.1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-weight:600}',""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toggle",class:{on:t.on},on:{click:t.toggle}},[n("div",{staticClass:"icon"}),t._v(" "),t.label?n("div",{staticClass:"label"},[t._v(t._s(t.label))]):t._e()])},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings"},[n("div",{staticClass:"settingslist"},[t.settings.autoAddNew?t._e():n("p",[n("EditableTextField",{staticClass:"visibletextfield marright",attrs:{text:""+(0===t.settings.maxNewPerDay?0:t.settings.maxNewPerDay||10),lineBreaksAllowed:!1},on:{endEdit:t.updateMaxNewPerDay}}),t._v(" "),n("b",[t._v("New cards per day")])],1),t._v(" "),n("p",[n("EditableTextField",{staticClass:"visibletextfield marright",attrs:{text:""+(0===t.settings.maxReviewsPerDay?0:t.settings.maxReviewsPerDay||0),lineBreaksAllowed:!1},on:{endEdit:t.updateMaxReviewsPerDay}}),t._v(" "),t._m(0)],1),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedLanguageTools,expression:"selectedLanguageTools"}],staticClass:"marright",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedLanguageTools=e.target.multiple?n:n[0]}}},t._l(t.languages,function(e,r){return n("option",{key:r,domProps:{value:r}},[t._v(t._s(e))])})),t._v(" "),n("b",[t._v("Language Tools")]),t._v(" "),t.selectedLanguageTools&&"none"!==t.selectedLanguageTools?n("Toggle",{key:"autospeak",attrs:{setTo:t.settings.autoSpeak,label:"Auto-speak card backs"},on:{toggled:function(e){t.updateSettings({autoSpeak:!!!t.settings.autoSpeak})}}}):t._e(),t._v(" "),n("Toggle",{key:"rev",attrs:{setTo:t.settings.studyReverse,label:"Study cards back-to-front"},on:{toggled:function(e){t.updateSettings({studyReverse:!!!t.settings.studyReverse})}}}),t._v(" "),n("Toggle",{key:"mix",attrs:{setTo:t.settings.shuffleCards,label:"Shuffle cards (new & reviews)"},on:{toggled:function(e){t.updateSettings({shuffleCards:!!!t.settings.shuffleCards})}}}),t._v(" "),n("div",[t._v("Click your set's name (above) to edit it.")]),t._v(" "),n("button",{on:{click:t.downloadSet}},[t._v("Download Set")]),t._v(" "),n("button",{on:{click:t.deleteSet}},[t._v("Delete Set")])],1)])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b",{staticStyle:{position:"relative"}},[t._v("Max reviews per day "),n("span",{staticClass:"below sub"},[t._v("(0 for no limit)")])])}],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";function r(t){n(110)}var i=n(33),o=n(112),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-137660ed",null);e.a=u.exports},function(t,e,n){var r=n(111);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("0ff0f952",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,"",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stats"},[n("p",[t._v("\n    Cards: "),n("b",[t._v(t._s(t.currentSet.cards.length))])]),t._v(" "),n("p",[t._v("\n    Mastered Cards: "),n("b",[t._v(t._s(t.masteredCards))]),t._v(" "),n("span",{staticClass:"sub"},[t._v("("+t._s(Math.round(t.masteredCards/t.currentSet.cards.length*100))+"%)")])]),t._v(" "),n("p",[t._v("\n    New Cards: "),n("b",[t._v(t._s(t.newCards))])]),t._v(" "),n("p",[t._v("\n    Deck Created:\n    "),n("b",[t._v(t._s(new Date(parseInt(t.currentSet.id)).toLocaleDateString()))])]),t._v(" "),n("p",[t._v("\n    Total Reviews: "),n("b",[t._v(t._s(t.totalReviews))])]),t._v(" "),n("p",[t._v("\n    Success Rate:\n    "),n("b",[t._v(t._s(t.oks&&t.agains?100*(t.oks/(t.agains+t.oks)).toFixed(3):0)+"%")]),t._v(" "),t.oks&&t.agains?n("span",{staticClass:"sub"},[t._v("("+t._s(t.oks)+" oks / "+t._s(t.agains)+" agains)")]):t._e()]),t._v(" "),n("ReviewGraph",{attrs:{cards:t.currentSet.cards}})],1)},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"setview"},[n("h1",[n("EditableTextField",{attrs:{text:t.name,placeholder:"Enter set name",lineBreaksAllowed:!1},on:{startEdit:t.startEditName,endEdit:t.saveEditedName}}),t._v(" "),t.cards?n("div",{staticClass:"sub"},[t._v("\n      ("+t._s(t.cards.length)+" card"+t._s(1===t.cards.length?"":"s")+")\n    ")]):t._e()],1),t._v(" "),t.cards?n("div",{staticClass:"buttonlist"},[n("button",{class:{active:"study"===t.appState||"editCard"===t.appState},on:{click:function(e){t.$store.commit("setAppState","study")}}},[n("div",[t._v("Study")]),t._v(" "),n("span",{staticClass:"keyicon"},[t._v("s")])]),t._v(" "),n("button",{class:{active:"addCard"===t.appState},on:{click:function(e){t.$store.commit("setAppState","addCard")}}},[n("div",[t._v("Add")]),t._v(" "),n("span",{staticClass:"keyicon"},[t._v("a")])]),t._v(" "),n("button",{class:{active:"setBrowse"===t.appState},on:{click:function(e){t.$store.commit("setAppState","setBrowse")}}},[n("div",[t._v("Browse")]),t._v(" "),n("span",{staticClass:"keyicon"},[t._v("b")])]),t._v(" "),n("button",{class:{active:"setStats"===t.appState},on:{click:function(e){t.$store.commit("setAppState","setStats")}}},[n("div",[t._v("Stats")]),t._v(" "),n("span",{staticClass:"keyicon"},[t._v("t")])]),t._v(" "),n("button",{class:{active:"setSettings"===t.appState},on:{click:function(e){t.$store.commit("setAppState","setSettings")}}},[n("div",[t._v("Settings")]),t._v(" "),n("span",{staticClass:"keyicon"},[t._v("e")])])]):t._e(),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"setelements"},["addCard"!==t.appState&&t.cards?"setBrowse"===t.appState?n("SetBrowser",{key:"browse"}):"setSettings"===t.appState?n("SetSettings",{key:"settings"}):"setStats"===t.appState?n("SetStats",{key:"stats"}):n("StudyFrame",{key:"study",attrs:{cards:t.cards}}):n("CardCreator",{key:"add"})],1)])},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";function r(t){n(115)}var i=n(34),o=n(117),s=n(2),a=r,u=s(i.a,o.a,!1,a,"data-v-412e72e6",null);e.a=u.exports},function(t,e,n){var r=n(116);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(1)("96adbd4e",r,!0,{})},function(t,e,n){e=t.exports=n(0)(!1),e.push([t.i,".userview[data-v-412e72e6]{width:550px;max-width:100vw;padding:0 20px;margin-bottom:50vh}",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"userview"},[n("h1",[t._v("\n    All Cards\n    ")]),t._v(" "),n("Browser",{attrs:{cards:t.allCards,inline:!0}})],1)},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"app",class:{mobile:t.isMobile}},[n("UserAndSetPicker"),t._v(" "),n("RefreshHandler"),t._v(" "),n("div",{staticClass:"content"},[t.currentSet&&"user"!==t.appState?n("SetView",{key:t.currentSet.id,attrs:{id:t.currentSet.id,name:t.currentSet.name,cards:t.currentSet.cards,lastStudied:t.currentSet.lastStudied,newToday:t.currentSet.newToday,reviewsToday:t.currentSet.reviewsToday}}):t._e(),t._v(" "),"user"===t.appState?n("UserView"):t._e()],1)],1)},i=[],o={render:r,staticRenderFns:i};e.a=o},function(t,e,n){"use strict";function r(){return{id:Date.now(),name:"New set",settings:{maxNewPerDay:10,maxReviewsPerDay:50,languageTools:"none",studyReverse:!1},lastUpdated:Date.now(),newToday:0,reviewsToday:0,cards:[]}}var i=n(120),o=n(6),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(10),u=n(121);o.a.use(i.a),e.a=function(){return new i.a.Store({state:{currentUser:null,setList:{},currentSetId:null,appState:"study",isMobile:!1,pauseDbSets:!1,isEditingText:!1},mutations:{setUsername:function(t,e){t.currentUser=e,a.set("currentUser",e)},setSetList:function(t,e){t.setList=e},setCurrentSetId:function(t,e){t.currentSetId=e,a.set("currentSetId",e)},logOut:function(t){a.remove("currentUser"),a.remove("currentSetId"),t.currentUser=null,t.setList=[],t.currentSetId=null},setAppWidth:function(t,e){t.isMobile=parseInt(e)<=768},setPauseDbSets:function(t,e){t.pauseDbSets=e},setIsEditingText:function(t,e){t.isEditingText=e},setAppState:function(t,e){t.appState=e||"study"},updateSetName:function(t,e){o.a.set(t.setList[t.currentSetId],"name",e),o.a.set(t.setList[t.currentSetId],"lastUpdated",Date.now()),t.pauseDbSets||u.updateSet(t.currentUser,{id:t.currentSetId,name:t.setList[t.currentSetId].name,lastUpdated:t.setList[t.currentSetId].lastUpdated})},updateSetSettings:function(t,e){for(var n in e)t.setList[t.currentSetId].settings||(t.setList[t.currentSetId].settings={}),o.a.set(t.setList[t.currentSetId].settings,n,e[n]);o.a.set(t.setList[t.currentSetId],"lastUpdated",Date.now()),t.pauseDbSets||u.updateSet(t.currentUser,{id:t.currentSetId,settings:t.setList[t.currentSetId].settings,lastUpdated:t.setList[t.currentSetId].lastUpdated})},addSet:function(t){var e=r();t.setList[e.id]=e,t.currentSetId=e.id,a.set("currentSetId",e.id),t.pauseDbSets||u.setSet(t.currentUser,e)},deleteSet:function(t,e){o.a.delete(t.setList,e),t.currentSetId=Object.keys(t.setList)[0],t.pauseDbSets||u.deleteSet(t.currentUser,e)},resetSetDay:function(t,e){o.a.set(t.setList[e],"newToday",0),o.a.set(t.setList[e],"reviewsToday",0),t.pauseDbSets||u.updateSet(t.currentUser,{id:e,newToday:0,reviewsToday:0})},addCard:function(t,e){var n=t.setList[t.currentSetId].cards||[];n.push(s({},e,{id:Date.now()})),o.a.set(t.setList[t.currentSetId],"cards",n),o.a.set(t.setList[t.currentSetId],"lastUpdated",Date.now()),t.pauseDbSets||u.updateSet(t.currentUser,{id:t.currentSetId,cards:t.setList[t.currentSetId].cards,lastUpdated:t.setList[t.currentSetId].lastUpdated})},updateCard:function(t,e){var n=void 0;for(var r in t.setList)if(t.setList[r].cards&&t.setList[r].cards.find(function(t){return t.id===e.id})){n=parseInt(r);break}if(!n)return console.log("No card found by the id",e.id,"in any deck.");var i=t.setList[n].cards.findIndex(function(t){return t.id===e.id});if(void 0!==i)for(var s in e)o.a.set(t.setList[n].cards[i],s,e[s]);o.a.set(t.setList[n],"lastUpdated",Date.now()),t.pauseDbSets||u.updateSet(t.currentUser,{id:n,cards:t.setList[n].cards,lastUpdated:t.setList[n].lastUpdated})},studyCard:function(t,e){var n=t.setList[t.currentSetId].cards.findIndex(function(t){return t.id===e.id});if(void 0!==n)for(var r in e)o.a.set(t.setList[t.currentSetId].cards[n],r,e[r]);new Date(t.setList[t.currentSetId].lastUpdated).getDate()!==(new Date).getDate()&&(o.a.set(t.setList[t.currentSetId],"newToday",0),o.a.set(t.setList[t.currentSetId],"reviewsToday",0)),e.totalReviews<=1?o.a.set(t.setList[t.currentSetId],"newToday",t.setList[t.currentSetId].newToday?t.setList[t.currentSetId].newToday+1:1):o.a.set(t.setList[t.currentSetId],"reviewsToday",t.setList[t.currentSetId].reviewsToday?t.setList[t.currentSetId].reviewsToday+1:1),o.a.set(t.setList[t.currentSetId],"lastUpdated",Date.now()),t.pauseDbSets||u.updateSet(t.currentUser,{id:t.currentSetId,lastUpdated:t.setList[t.currentSetId].lastUpdated,newToday:t.setList[t.currentSetId].newToday,reviewsToday:t.setList[t.currentSetId].reviewsToday,cards:t.setList[t.currentSetId].cards})},deleteCard:function(t,e){var n=void 0;for(var r in t.setList)if(t.setList[r].cards&&t.setList[r].cards.find(function(t){return t.id===e})){n=t.setList[r];break}if(!n)return console.log("No card found by the id",e,"in any deck.");var i=n.cards.filter(function(t){return t.id!==e});o.a.set(n,"cards",i),o.a.set(n,"lastUpdated",Date.now()),t.pauseDbSets||u.updateSet(t.currentUser,{id:n.id,cards:n.cards,lastUpdated:n.lastUpdated})},moveCard:function(t,e){var n=e.id,r=e.from,i=e.to;if(r==i)return console.log("Same set!");var s=t.setList[r].cards.find(function(t){return t.id===n});if(s){s.set=i;var a=t.setList[i].cards;a.push(s),o.a.set(t.setList[i],"cards",a),o.a.set(t.setList[i],"lastUpdated",Date.now()),t.pauseDbSets||u.updateSet(t.currentUser,{id:i,cards:t.setList[i].cards,lastUpdated:t.setList[i].lastUpdated});var c=t.setList[r].cards.filter(function(t){return t.id!==n});o.a.set(t.setList[r],"cards",c),o.a.set(t.setList[r],"lastUpdated",Date.now()),t.pauseDbSets||u.updateSet(t.currentUser,{id:t.setList[r].id,cards:t.setList[r].cards,lastUpdated:t.setList[r].lastUpdated})}}},actions:{logInAs:function(t,e){var n=t.commit,r=t.state;u.getAllSets(e).then(function(t){var i=t.docs,o=t.empty;if(o&&e===r.currentUser)return console.log("dc"),n("setPauseDbSets",!1);var u={};i.forEach(function(t){var e=t.data();e.lastUpdated&&(u[e.id]=e)});for(var c in u){(function(t){if(!u[t].cards)return console.log(u),"continue";u[t].cards=u[t].cards.map(function(e){return s({},e,{set:parseInt(t)})})})(c)}if(!r.currentUser&&o&&(console.log("first"),alert("new user")),!o&&e===r.currentUser){console.log("refresh");for(var h in u)r.setList[h]?u[h].lastUpdated<r.setList[h].lastUpdated&&(alert("OLD SET IN DATABASE. Dumped set "+h+" to localStorage."),a.set(""+h,r.setList[h].cards),console.log(),console.log(u[h],r.setList[h])):console.log("Deck "+h+" has been created elsewhere, and will now be loaded.")}n("setUsername",e),n("setSetList",u),n("setCurrentSetId",u[a.get("currentSetId")]?a.get("currentSetId"):Object.keys(u)[0]),n("setPauseDbSets",!1)})}}})}},function(t,e,n){"use strict";function r(t){C&&(t._devtoolHook=C,C.emit("vuex:init",t),C.on("vuex:travel-to-state",function(e){t.replaceState(e)}),t.subscribe(function(t,e){C.emit("vuex:mutation",t,e)}))}function i(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function o(t){return null!==t&&"object"==typeof t}function s(t){return t&&"function"==typeof t.then}function a(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;a(t.concat(r),e.getChild(r),n.modules[r])}}function u(t,e){return e.indexOf(t)<0&&e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function c(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;l(t,n,[],t._modules.root,!0),h(t,n,e)}function h(t,e,n){var r=t._vm;t.getters={};var o=t._wrappedGetters,s={};i(o,function(e,n){s[n]=function(){return e(t)},Object.defineProperty(t.getters,n,{get:function(){return t._vm[n]},enumerable:!0})});var a=D.config.silent;D.config.silent=!0,t._vm=new D({data:{$$state:e},computed:s}),D.config.silent=a,t.strict&&y(t),r&&(n&&t._withCommit(function(){r._data.$$state=null}),D.nextTick(function(){return r.$destroy()}))}function l(t,e,n,r,i){var o=!n.length,s=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[s]=r),!o&&!i){var a=g(e,n.slice(0,-1)),u=n[n.length-1];t._withCommit(function(){D.set(a,u,r.state)})}var c=r.context=f(t,s,n);r.forEachMutation(function(e,n){p(t,s+n,e,c)}),r.forEachAction(function(e,n){var r=e.root?n:s+n,i=e.handler||e;m(t,r,i,c)}),r.forEachGetter(function(e,n){v(t,s+n,e,c)}),r.forEachChild(function(r,o){l(t,e,n.concat(o),r,i)})}function f(t,e,n){var r=""===e,i={dispatch:r?t.dispatch:function(n,r,i){var o=b(n,r,i),s=o.payload,a=o.options,u=o.type;return a&&a.root||(u=e+u),t.dispatch(u,s)},commit:r?t.commit:function(n,r,i){var o=b(n,r,i),s=o.payload,a=o.options,u=o.type;a&&a.root||(u=e+u),t.commit(u,s,a)}};return Object.defineProperties(i,{getters:{get:r?function(){return t.getters}:function(){return d(t,e)}},state:{get:function(){return g(t.state,n)}}}),i}function d(t,e){var n={},r=e.length;return Object.keys(t.getters).forEach(function(i){if(i.slice(0,r)===e){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return t.getters[i]},enumerable:!0})}}),n}function p(t,e,n,r){(t._mutations[e]||(t._mutations[e]=[])).push(function(e){n.call(t,r.state,e)})}function m(t,e,n,r){(t._actions[e]||(t._actions[e]=[])).push(function(e,i){var o=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e,i);return s(o)||(o=Promise.resolve(o)),t._devtoolHook?o.catch(function(e){throw t._devtoolHook.emit("vuex:error",e),e}):o})}function v(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)})}function y(t){t._vm.$watch(function(){return this._data.$$state},function(){},{deep:!0,sync:!0})}function g(t,e){return e.length?e.reduce(function(t,e){return t[e]},t):t}function b(t,e,n){return o(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}function w(t){D&&t===D||(D=t,E(D))}function _(t){return Array.isArray(t)?t.map(function(t){return{key:t,val:t}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}})}function S(t){return function(e,n){return"string"!=typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function T(t,e,n){return t._modulesNamespaceMap[n]}/**
 * vuex v3.0.1
 * (c) 2017 Evan You
 * @license MIT
 */
var E=function(t){function e(){var t=this.$options;t.store?this.$store="function"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}if(Number(t.version.split(".")[0])>=2)t.mixin({beforeCreate:e});else{var n=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[e].concat(t.init):e,n.call(this,t)}}},C="undefined"!=typeof window&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,I=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"==typeof n?n():n)||{}},k={namespaced:{configurable:!0}};k.namespaced.get=function(){return!!this._rawModule.namespaced},I.prototype.addChild=function(t,e){this._children[t]=e},I.prototype.removeChild=function(t){delete this._children[t]},I.prototype.getChild=function(t){return this._children[t]},I.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},I.prototype.forEachChild=function(t){i(this._children,t)},I.prototype.forEachGetter=function(t){this._rawModule.getters&&i(this._rawModule.getters,t)},I.prototype.forEachAction=function(t){this._rawModule.actions&&i(this._rawModule.actions,t)},I.prototype.forEachMutation=function(t){this._rawModule.mutations&&i(this._rawModule.mutations,t)},Object.defineProperties(I.prototype,k);var x=function(t){this.register([],t,!1)};x.prototype.get=function(t){return t.reduce(function(t,e){return t.getChild(e)},this.root)},x.prototype.getNamespace=function(t){var e=this.root;return t.reduce(function(t,n){return e=e.getChild(n),t+(e.namespaced?n+"/":"")},"")},x.prototype.update=function(t){a([],this.root,t)},x.prototype.register=function(t,e,n){var r=this;void 0===n&&(n=!0);var o=new I(e,n);if(0===t.length)this.root=o;else{this.get(t.slice(0,-1)).addChild(t[t.length-1],o)}e.modules&&i(e.modules,function(e,i){r.register(t.concat(i),e,n)})},x.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];e.getChild(n).runtime&&e.removeChild(n)};var D,A=function(t){var e=this;void 0===t&&(t={}),!D&&"undefined"!=typeof window&&window.Vue&&w(window.Vue);var n=t.plugins;void 0===n&&(n=[]);var i=t.strict;void 0===i&&(i=!1);var o=t.state;void 0===o&&(o={}),"function"==typeof o&&(o=o()||{}),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new x(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new D;var s=this,a=this,u=a.dispatch,c=a.commit;this.dispatch=function(t,e){return u.call(s,t,e)},this.commit=function(t,e,n){return c.call(s,t,e,n)},this.strict=i,l(this,o,[],this._modules.root),h(this,o),n.forEach(function(t){return t(e)}),D.config.devtools&&r(this)},N={state:{configurable:!0}};N.state.get=function(){return this._vm._data.$$state},N.state.set=function(t){},A.prototype.commit=function(t,e,n){var r=this,i=b(t,e,n),o=i.type,s=i.payload,a=(i.options,{type:o,payload:s}),u=this._mutations[o];u&&(this._withCommit(function(){u.forEach(function(t){t(s)})}),this._subscribers.forEach(function(t){return t(a,r.state)}))},A.prototype.dispatch=function(t,e){var n=this,r=b(t,e),i=r.type,o=r.payload,s={type:i,payload:o},a=this._actions[i];if(a)return this._actionSubscribers.forEach(function(t){return t(s,n.state)}),a.length>1?Promise.all(a.map(function(t){return t(o)})):a[0](o)},A.prototype.subscribe=function(t){return u(t,this._subscribers)},A.prototype.subscribeAction=function(t){return u(t,this._actionSubscribers)},A.prototype.watch=function(t,e,n){var r=this;return this._watcherVM.$watch(function(){return t(r.state,r.getters)},e,n)},A.prototype.replaceState=function(t){var e=this;this._withCommit(function(){e._vm._data.$$state=t})},A.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),l(this,this.state,t,this._modules.get(t),n.preserveState),h(this,this.state)},A.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var n=g(e.state,t.slice(0,-1));D.delete(n,t[t.length-1])}),c(this)},A.prototype.hotUpdate=function(t){this._modules.update(t),c(this,!0)},A.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(A.prototype,N);var O=S(function(t,e){var n={};return _(e).forEach(function(e){var r=e.key,i=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=T(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"==typeof i?i.call(this,e,n):e[i]},n[r].vuex=!0}),n}),R=S(function(t,e){var n={};return _(e).forEach(function(e){var r=e.key,i=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.commit;if(t){var o=T(this.$store,"mapMutations",t);if(!o)return;r=o.context.commit}return"function"==typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}}),n}),L=S(function(t,e){var n={};return _(e).forEach(function(e){var r=e.key,i=e.val;i=t+i,n[r]=function(){if(!t||T(this.$store,"mapGetters",t))return this.$store.getters[i]},n[r].vuex=!0}),n}),M=S(function(t,e){var n={};return _(e).forEach(function(e){var r=e.key,i=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var o=T(this.$store,"mapActions",t);if(!o)return;r=o.context.dispatch}return"function"==typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}}),n}),P=function(t){return{mapState:O.bind(null,t),mapGetters:L.bind(null,t),mapMutations:R.bind(null,t),mapActions:M.bind(null,t)}},F={Store:A,install:w,version:"3.0.1",mapState:O,mapMutations:R,mapGetters:L,mapActions:M,createNamespacedHelpers:P};e.a=F},function(t,e,n){var r=n(122),i=!1,o=[];setInterval(function(){if(!i&&o.length){i=!0;var t=o.shift();"newUser"===t.type?r.newUser(t.user).then(function(t){i=!1,lastUpdated=Date.now()}):"updateSet"===t.type?r.updateSet(t.user,t.set).then(function(e){if("not-found"===e.code)return r.setSet(t.user,t.set).then(function(t){i=!1,lastUpdated=Date.now()});i=!1,lastUpdated=Date.now()}):"setSet"===t.type?r.setSet(t.user,t.set).then(function(t){i=!1,lastUpdated=Date.now()}):"deleteSet"===t.type?r.deleteSet(t.user,t.setId).then(function(t){i=!1,lastUpdated=Date.now()}):(console.log("invalid db update, skipping..."),i=!1)}},100),e.newUser=function(t){o.push({type:"newUser",user:t})},e.updateSet=function(t,e){o.push({type:"updateSet",user:t,set:e})},e.setSet=function(t,e){o.push({type:"setSet",user:t,set:e})},e.deleteSet=function(t,e){o.push({type:"deleteSet",user:t,setId:e})},e.getAllSets=r.getAllSets,e.getCards=r.getCards},function(t,e,n){var r=n(123),i=n(124);n(128),i.initializeApp({apiKey:r.apiKey,authDomain:r.authDomain,projectId:r.projectId,storageBucket:r.storageBucket});var o=i.firestore();o.settings({timestampsInSnapshots:!0});e.newUser=function(t){return new Promise(function(e){return o.collection("users").doc(t).set({}).then(function(){return e("create new user success!")}).catch(function(t){return e(t)})})},e.setSet=function(t,e){return new Promise(function(n){return o.collection("users").doc(t).collection("sets").doc(""+e.id).set(e).then(function(){return n("set set success!")}).catch(function(t){return n(t)})})},e.updateSet=function(t,e){return new Promise(function(n){return o.collection("users").doc(t).collection("sets").doc(""+e.id).update(e).then(function(){return n("update set success!")}).catch(function(t){return n(t)})})},e.getSet=function(t,e){return new Promise(function(n){return o.collection("users").doc(t).collection("sets").doc(""+e).get().then(function(t){return n(t)}).catch(function(t){return n(t)})})},e.getAllSets=function(t){return new Promise(function(e){return o.collection("users").doc(t).collection("sets").get().then(function(t){return e(t)}).catch(function(t){return e(t)})})},e.deleteSet=function(t,e){return new Promise(function(n){return o.collection("users").doc(t).collection("sets").doc(""+e).delete().then(function(t){return n("delete set successful")}).catch(function(t){return n(t)})})}},function(t,e){t.exports={apiKey:"AIzaSyBq6NsJZ7lcXK4_9m95RBI7GLaoBqgGNFE",authDomain:"remembrall-522f0.firebaseapp.com",projectId:"remembrall-522f0",storageBucket:"remembrall-522f0.appspot.com"}},function(t,e,n){"use strict";n(125);var r=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(n(35));t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){function r(){}function i(t,e){return function(){t.apply(e,arguments)}}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function s(t,e){for(;3===t._state;)t=t._value;if(0===t._state)return void t._deferreds.push(e);t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._state?a:u)(e.promise,t._value);var r;try{r=n(t._value)}catch(t){return void u(e.promise,t)}a(e.promise,r)})}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l(i(n,e),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}function h(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}function f(t,e){return e={exports:{}},t(e,e.exports),e.exports}var d=n(126),p=(n.n(d),setTimeout);o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(r);return s(this,new h(t,e,n)),n},o.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},o.all=function(t){return new o(function(e,n){function r(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){r(t,e)},n)}i[t]=s,0==--o&&e(i)}catch(t){n(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);for(var o=i.length,s=0;s<i.length;s++)r(s,i[s])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){p(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var m=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();m.Promise||(m.Promise=o);var v=f(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),y=f(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),g=(y.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),b=function(t){if(!g(t))throw TypeError(t+" is not an object!");return t},w=function(t){try{return!!t()}catch(t){return!0}},_=!w(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),S=v.document,T=g(S)&&g(S.createElement),E=function(t){return T?S.createElement(t):{}},C=!_&&!w(function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a}),I=function(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},k=Object.defineProperty,x=_?Object.defineProperty:function(t,e,n){if(b(t),e=I(e,!0),b(n),C)try{return k(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t},D={f:x},A=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},N=_?function(t,e,n){return D.f(t,e,A(1,n))}:function(t,e,n){return t[e]=n,t},O={}.hasOwnProperty,R=function(t,e){return O.call(t,e)},L=0,M=Math.random(),P=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++L+M).toString(36))},F=f(function(t){var e=P("src"),n=Function.toString,r=(""+n).split("toString");y.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,i,o){var s="function"==typeof i;s&&(R(i,"name")||N(i,"name",n)),t[n]!==i&&(s&&(R(i,e)||N(i,e,t[n]?""+t[n]:r.join(String(n)))),t===v?t[n]=i:o?t[n]?t[n]=i:N(t,n,i):(delete t[n],N(t,n,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),U=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},B=function(t,e,n){if(U(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},q=function(t,e,n){var r,i,o,s,a=t&q.F,u=t&q.G,c=t&q.S,h=t&q.P,l=t&q.B,f=u?v:c?v[e]||(v[e]={}):(v[e]||{}).prototype,d=u?y:y[e]||(y[e]={}),p=d.prototype||(d.prototype={});u&&(n=e);for(r in n)i=!a&&f&&void 0!==f[r],o=(i?f:n)[r],s=l&&i?B(o,v):h&&"function"==typeof o?B(Function.call,o):o,f&&F(f,r,o,t&q.U),d[r]!=o&&N(d,r,s),h&&p[r]!=o&&(p[r]=o)};v.core=y,q.F=1,q.G=2,q.S=4,q.P=8,q.B=16,q.W=32,q.U=64,q.R=128;var V=q,j={}.toString,$=function(t){return j.call(t).slice(8,-1)},W=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==$(t)?t.split(""):Object(t)},K=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},Q=function(t){return Object(K(t))},H=Math.ceil,z=Math.floor,G=function(t){return isNaN(t=+t)?0:(t>0?z:H)(t)},X=Math.min,Y=function(t){return t>0?X(G(t),9007199254740991):0},J=Array.isArray||function(t){return"Array"==$(t)},Z=v["__core-js_shared__"]||(v["__core-js_shared__"]={}),tt=function(t){return Z[t]||(Z[t]={})},et=f(function(t){var e=tt("wks"),n=v.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:P)("Symbol."+t))}).store=e}),nt=et("species"),rt=function(t){var e;return J(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!J(e.prototype)||(e=void 0),g(e)&&null===(e=e[nt])&&(e=void 0)),void 0===e?Array:e},it=function(t,e){return new(rt(t))(e)},ot=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,s=6==t,a=5==t||s,u=e||it;return function(e,c,h){for(var l,f,d=Q(e),p=W(d),m=B(c,h,3),v=Y(p.length),y=0,g=n?u(e,v):r?u(e,0):void 0;v>y;y++)if((a||y in p)&&(l=p[y],f=m(l,y,d),t))if(n)g[y]=f;else if(f)switch(t){case 3:return!0;case 5:return l;case 6:return y;case 2:g.push(l)}else if(o)return!1;return s?-1:i||o?o:g}},st=et("unscopables"),at=Array.prototype;void 0==at[st]&&N(at,st,{});var ut=function(t){at[st][t]=!0},ct=ot(5),ht=!0;"find"in[]&&Array(1).find(function(){ht=!1}),V(V.P+V.F*ht,"Array",{find:function(t){return ct(this,t,arguments.length>1?arguments[1]:void 0)}}),ut("find");var lt=(y.Array.find,ot(6)),ft=!0;"findIndex"in[]&&Array(1).findIndex(function(){ft=!1}),V(V.P+V.F*ft,"Array",{findIndex:function(t){return lt(this,t,arguments.length>1?arguments[1]:void 0)}}),ut("findIndex");var dt=(y.Array.findIndex,function(t){return W(K(t))}),pt=Math.max,mt=Math.min,vt=function(t,e){return t=G(t),t<0?pt(t+e,0):mt(t,e)},yt=tt("keys"),gt=function(t){return yt[t]||(yt[t]=P(t))},bt=function(t){return function(e,n,r){var i,o=dt(e),s=Y(o.length),a=vt(r,s);if(t&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}}(!1),wt=gt("IE_PROTO"),_t=function(t,e){var n,r=dt(t),i=0,o=[];for(n in r)n!=wt&&R(r,n)&&o.push(n);for(;e.length>i;)R(r,n=e[i++])&&(~bt(o,n)||o.push(n));return o},St="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Tt=Object.keys||function(t){return _t(t,St)},Et=Object.getOwnPropertySymbols,Ct={f:Et},It={}.propertyIsEnumerable,kt={f:It},xt=Object.assign,Dt=!xt||w(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=xt({},t)[n]||Object.keys(xt({},e)).join("")!=r})?function(t,e){for(var n=Q(t),r=arguments.length,i=1,o=Ct.f,s=kt.f;r>i;)for(var a,u=W(arguments[i++]),c=o?Tt(u).concat(o(u)):Tt(u),h=c.length,l=0;h>l;)s.call(u,a=c[l++])&&(n[a]=u[a]);return n}:xt;V(V.S+V.F,"Object",{assign:Dt});var At=(y.Object.assign,et("match")),Nt=function(t){var e;return g(t)&&(void 0!==(e=t[At])?!!e:"RegExp"==$(t))},Ot=function(t,e,n){if(Nt(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(K(t))},Rt=et("match"),Lt="".startsWith;V(V.P+V.F*function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[Rt]=!1,!"/./"[t](e)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var e=Ot(this,t,"startsWith"),n=Y(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return Lt?Lt.call(e,r,n):e.slice(n,n+r.length)===r}});var Mt=(y.String.startsWith,function(t){var e=String(K(this)),n="",r=G(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n});V(V.P,"String",{repeat:Mt});var Pt=(y.String.repeat,f(function(t){var e=P("meta"),n=D.f,r=0,i=Object.isExtensible||function(){return!0},o=!w(function(){return i(Object.preventExtensions({}))}),s=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},a=function(t,n){if(!g(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!R(t,e)){if(!i(t))return"F";if(!n)return"E";s(t)}return t[e].i},u=function(t,n){if(!R(t,e)){if(!i(t))return!0;if(!n)return!1;s(t)}return t[e].w},c=function(t){return o&&h.NEED&&i(t)&&!R(t,e)&&s(t),t},h=t.exports={KEY:e,NEED:!1,fastKey:a,getWeak:u,onFreeze:c}})),Ft=(Pt.KEY,Pt.NEED,Pt.fastKey,Pt.getWeak,Pt.onFreeze,D.f),Ut=et("toStringTag"),Bt=function(t,e,n){t&&!R(t=n?t:t.prototype,Ut)&&Ft(t,Ut,{configurable:!0,value:e})},qt=et,Vt={f:qt},jt=D.f,$t=function(t){var e=y.Symbol||(y.Symbol=v.Symbol||{});"_"==t.charAt(0)||t in e||jt(e,t,{value:Vt.f(t)})},Wt=function(t){var e=Tt(t),n=Ct.f;if(n)for(var r,i=n(t),o=kt.f,s=0;i.length>s;)o.call(t,r=i[s++])&&e.push(r);return e},Kt=_?Object.defineProperties:function(t,e){b(t);for(var n,r=Tt(e),i=r.length,o=0;i>o;)D.f(t,n=r[o++],e[n]);return t},Qt=v.document,Ht=Qt&&Qt.documentElement,zt=gt("IE_PROTO"),Gt=function(){},Xt=function(){var t,e=E("iframe"),n=St.length;for(e.style.display="none",Ht.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),Xt=t.F;n--;)delete Xt.prototype[St[n]];return Xt()},Yt=Object.create||function(t,e){var n;return null!==t?(Gt.prototype=b(t),n=new Gt,Gt.prototype=null,n[zt]=t):n=Xt(),void 0===e?n:Kt(n,e)},Jt=St.concat("length","prototype"),Zt=Object.getOwnPropertyNames||function(t){return _t(t,Jt)},te={f:Zt},ee=te.f,ne={}.toString,re="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ie=function(t){try{return ee(t)}catch(t){return re.slice()}},oe=function(t){return re&&"[object Window]"==ne.call(t)?ie(t):ee(dt(t))},se={f:oe},ae=Object.getOwnPropertyDescriptor,ue=_?ae:function(t,e){if(t=dt(t),e=I(e,!0),C)try{return ae(t,e)}catch(t){}if(R(t,e))return A(!kt.f.call(t,e),t[e])},ce={f:ue},he=Pt.KEY,le=ce.f,fe=D.f,de=se.f,pe=v.Symbol,me=v.JSON,ve=me&&me.stringify,ye=et("_hidden"),ge=et("toPrimitive"),be={}.propertyIsEnumerable,we=tt("symbol-registry"),_e=tt("symbols"),Se=tt("op-symbols"),Te=Object.prototype,Ee="function"==typeof pe,Ce=v.QObject,Ie=!Ce||!Ce.prototype||!Ce.prototype.findChild,ke=_&&w(function(){return 7!=Yt(fe({},"a",{get:function(){return fe(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=le(Te,e);r&&delete Te[e],fe(t,e,n),r&&t!==Te&&fe(Te,e,r)}:fe,xe=function(t){var e=_e[t]=Yt(pe.prototype);return e._k=t,e},De=Ee&&"symbol"==typeof pe.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof pe},Ae=function(t,e,n){return t===Te&&Ae(Se,e,n),b(t),e=I(e,!0),b(n),R(_e,e)?(n.enumerable?(R(t,ye)&&t[ye][e]&&(t[ye][e]=!1),n=Yt(n,{enumerable:A(0,!1)})):(R(t,ye)||fe(t,ye,A(1,{})),t[ye][e]=!0),ke(t,e,n)):fe(t,e,n)},Ne=function(t,e){b(t);for(var n,r=Wt(e=dt(e)),i=0,o=r.length;o>i;)Ae(t,n=r[i++],e[n]);return t},Oe=function(t,e){return void 0===e?Yt(t):Ne(Yt(t),e)},Re=function(t){var e=be.call(this,t=I(t,!0));return!(this===Te&&R(_e,t)&&!R(Se,t))&&(!(e||!R(this,t)||!R(_e,t)||R(this,ye)&&this[ye][t])||e)},Le=function(t,e){if(t=dt(t),e=I(e,!0),t!==Te||!R(_e,e)||R(Se,e)){var n=le(t,e);return!n||!R(_e,e)||R(t,ye)&&t[ye][e]||(n.enumerable=!0),n}},Me=function(t){for(var e,n=de(dt(t)),r=[],i=0;n.length>i;)R(_e,e=n[i++])||e==ye||e==he||r.push(e);return r},Pe=function(t){for(var e,n=t===Te,r=de(n?Se:dt(t)),i=[],o=0;r.length>o;)!R(_e,e=r[o++])||n&&!R(Te,e)||i.push(_e[e]);return i};Ee||(pe=function(){if(this instanceof pe)throw TypeError("Symbol is not a constructor!");var t=P(arguments.length>0?arguments[0]:void 0),e=function(n){this===Te&&e.call(Se,n),R(this,ye)&&R(this[ye],t)&&(this[ye][t]=!1),ke(this,t,A(1,n))};return _&&Ie&&ke(Te,t,{configurable:!0,set:e}),xe(t)},F(pe.prototype,"toString",function(){return this._k}),ce.f=Le,D.f=Ae,te.f=se.f=Me,kt.f=Re,Ct.f=Pe,_&&F(Te,"propertyIsEnumerable",Re,!0),Vt.f=function(t){return xe(et(t))}),V(V.G+V.W+V.F*!Ee,{Symbol:pe});for(var Fe="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Ue=0;Fe.length>Ue;)et(Fe[Ue++]);for(var Be=Tt(et.store),qe=0;Be.length>qe;)$t(Be[qe++]);V(V.S+V.F*!Ee,"Symbol",{for:function(t){return R(we,t+="")?we[t]:we[t]=pe(t)},keyFor:function(t){if(!De(t))throw TypeError(t+" is not a symbol!");for(var e in we)if(we[e]===t)return e},useSetter:function(){Ie=!0},useSimple:function(){Ie=!1}}),V(V.S+V.F*!Ee,"Object",{create:Oe,defineProperty:Ae,defineProperties:Ne,getOwnPropertyDescriptor:Le,getOwnPropertyNames:Me,getOwnPropertySymbols:Pe}),me&&V(V.S+V.F*(!Ee||w(function(){var t=pe();return"[null]"!=ve([t])||"{}"!=ve({a:t})||"{}"!=ve(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(g(e)||void 0!==t)&&!De(t))return J(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!De(e))return e}),r[1]=e,ve.apply(me,r)}}),pe.prototype[ge]||N(pe.prototype,ge,pe.prototype.valueOf),Bt(pe,"Symbol"),Bt(Math,"Math",!0),Bt(v.JSON,"JSON",!0);var Ve=et("toStringTag"),je="Arguments"==$(function(){return arguments}()),$e=function(t,e){try{return t[e]}catch(t){}},We=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=$e(e=Object(t),Ve))?n:je?$(e):"Object"==(r=$(e))&&"function"==typeof e.callee?"Arguments":r},Ke={};Ke[et("toStringTag")]="z",Ke+""!="[object z]"&&F(Object.prototype,"toString",function(){return"[object "+We(this)+"]"},!0),$t("asyncIterator"),$t("observable");var Qe=(y.Symbol,{}),He={};N(He,et("iterator"),function(){return this});var ze=function(t,e,n){t.prototype=Yt(He,{next:A(1,n)}),Bt(t,e+" Iterator")},Ge=gt("IE_PROTO"),Xe=Object.prototype,Ye=Object.getPrototypeOf||function(t){return t=Q(t),R(t,Ge)?t[Ge]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Xe:null},Je=et("iterator"),Ze=!([].keys&&"next"in[].keys()),tn=function(){return this},en=function(t,e,n,r,i,o,s){ze(n,e,r);var a,u,c,h=function(t){if(!Ze&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},l=e+" Iterator",f="values"==i,d=!1,p=t.prototype,m=p[Je]||p["@@iterator"]||i&&p[i],v=m||h(i),y=i?f?h("entries"):v:void 0,g="Array"==e?p.entries||m:m;if(g&&(c=Ye(g.call(new t)))!==Object.prototype&&c.next&&(Bt(c,l,!0),"function"!=typeof c[Je]&&N(c,Je,tn)),f&&m&&"values"!==m.name&&(d=!0,v=function(){return m.call(this)}),(Ze||d||!p[Je])&&N(p,Je,v),Qe[e]=v,Qe[l]=tn,i)if(a={values:f?v:h("values"),keys:o?v:h("keys"),entries:y},s)for(u in a)u in p||F(p,u,a[u]);else V(V.P+V.F*(Ze||d),e,a);return a},nn=function(t){return function(e,n){var r,i,o=String(K(e)),s=G(n),a=o.length;return s<0||s>=a?t?"":void 0:(r=o.charCodeAt(s),r<55296||r>56319||s+1===a||(i=o.charCodeAt(s+1))<56320||i>57343?t?o.charAt(s):r:t?o.slice(s,s+2):i-56320+(r-55296<<10)+65536)}}(!0);en(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=nn(e,n),this._i+=t.length,{value:t,done:!1})});var rn=function(t,e){return{value:e,done:!!t}},on=en(Array,"Array",function(t,e){this._t=dt(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,rn(1)):"keys"==e?rn(0,n):"values"==e?rn(0,t[n]):rn(0,[n,t[n]])},"values");Qe.Arguments=Qe.Array,ut("keys"),ut("values"),ut("entries");for(var sn=et("iterator"),an=et("toStringTag"),un=Qe.Array,cn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},hn=Tt(cn),ln=0;ln<hn.length;ln++){var fn,dn=hn[ln],pn=cn[dn],mn=v[dn],vn=mn&&mn.prototype;if(vn&&(vn[sn]||N(vn,sn,un),vn[an]||N(vn,an,dn),Qe[dn]=un,pn))for(fn in on)vn[fn]||F(vn,fn,on[fn],!0)}Vt.f("iterator")}.call(e,n(7).setImmediate,n(4))},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return y.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function a(t){var e=new FileReader,n=s(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=s(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function h(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(y.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(y.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(y.arrayBuffer&&y.blob&&b(t))this._bodyArrayBuffer=h(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!w(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=h(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function d(t,e){e=e||{};var n=e.body;if(t instanceof d){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function m(t){var e=new i;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var y={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(y.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(t){return t&&DataView.prototype.isPrototypeOf(t)},w=ArrayBuffer.isView||function(t){return t&&g.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},l.call(d.prototype),l.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var S=[301,302,303,307,308];v.redirect=function(t,e){if(-1===S.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=d,t.Response=v,t.fetch=function(t,e){return new Promise(function(n,r){var i=new d(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:m(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new v(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&y.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e,n){"use strict";function r(t){return i(void 0,t)}function i(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=i(t[r],e[r]));return t}function o(t,e,n){t[e]=n}function s(t){var e=O;return O=t,e}function a(t){return JSON.parse(t)}function u(t){return JSON.stringify(t)}function c(t,e){var n=new it(t,e);return n.subscribe.bind(n)}function h(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}function l(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}function f(){}function d(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function p(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(d(t,e,r)+"must be a valid firebase namespace.")}function m(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(d(t,e,r)+"must be a valid function.")}function v(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(d(t,e,r)+"must be a valid context object.")}Object.defineProperty(e,"__esModule",{value:!0});var y=n(36),g={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},b=function(t,e){if(!t)throw w(e)},w=function(t){return new Error("Firebase Database ("+g.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},_=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},S=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var o=t[n++],s=t[n++],a=t[n++],u=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{var o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")},T={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,d=63&c;u||(d=64,s||(f=64)),r.push(n[h],n[l],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):S(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length,a=s?n[t.charAt(i)]:0;++i;var u=i<t.length,c=u?n[t.charAt(i)]:64;++i;var h=i<t.length,l=h?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==c||null==l)throw Error();var f=o<<2|a>>4;if(r.push(f),64!=c){var d=a<<4&240|c>>2;if(r.push(d),64!=l){var p=c<<6&192|l;r.push(p)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},E=function(t){var e=_(t);return T.encodeByteArray(e,!0)},C=function(t){try{return T.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},I=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}(),k=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},x=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())},D=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},A=function(){return!0===g.NODE_CLIENT||!0===g.NODE_ADMIN},N="FirebaseError",O=Error.captureStackTrace,R=function(){function t(t,e){if(this.code=t,this.message=e,O)O(this,L.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=N,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}return t}();R.prototype=Object.create(Error.prototype),R.prototype.constructor=R,R.prototype.name=N;var L=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new R(i,n);for(var s in e)e.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(o[s]=e[s]);return o},t}(),M=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=a(C(o[0])||""),n=a(C(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},P=function(t){var e,n,r=M(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&i>=e&&i<=n},F=function(t){var e=M(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},U=function(t){var e=M(t),n=e.claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},B=function(t){var e=M(t).claims;return"object"==typeof e&&!0===e.admin},q=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},V=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},j=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},$=function(t,e){return j(e,function(e,n){t[e]=n}),t},W=function(t){return $({},t)},K=function(t){return"object"==typeof t&&null!==t},Q=function(t){for(var e in t)return!1;return!0},H=function(t){var e=0;for(var n in t)e++;return e},z=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},G=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},X=function(t,e,n){var r=G(t,e,n);return r&&t[r]},Y=function(t){for(var e in t)return e},J=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},Z=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},tt=function(t){var e=[];return j(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},et=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},nt=function(){function t(){this.blockSize=-1}return t}(),rt=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return y.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(var r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(var r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);var i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(nt),it=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=l(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=f),void 0===r.error&&(r.error=f),void 0===r.complete&&(r.complete=f);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}(),ot=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}},st=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,b(r<t.length,"Surrogate pair missing trail surrogate.");i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},at=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};e.assert=b,e.assertionError=w,e.base64=T,e.base64Decode=C,e.base64Encode=E,e.CONSTANTS=g,e.deepCopy=r,e.deepExtend=i,e.patchProperty=o,e.Deferred=I,e.getUA=k,e.isMobileCordova=x,e.isNodeSdk=A,e.isReactNative=D,e.ErrorFactory=L,e.FirebaseError=R,e.patchCapture=s,e.jsonEval=a,e.stringify=u,e.decode=M,e.isAdmin=B,e.issuedAtTime=F,e.isValidFormat=U,e.isValidTimestamp=P,e.clone=W,e.contains=q,e.every=Z,e.extend=$,e.findKey=G,e.findValue=X,e.forEach=j,e.getAnyKey=Y,e.getCount=H,e.getValues=J,e.isEmpty=Q,e.isNonNullObject=K,e.map=z,e.safeGet=V,e.querystring=tt,e.querystringDecode=et,e.Sha1=rt,e.async=h,e.createSubscribe=c,e.errorPrefix=d,e.validateArgCount=ot,e.validateCallback=m,e.validateContextObject=v,e.validateNamespace=p,e.stringLength=at,e.stringToByteArray=st},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(129);n.n(r)},function(t,e,n){"use strict";function r(){return Te.logLevel===be.LogLevel.DEBUG?ye.DEBUG:Te.logLevel===be.LogLevel.SILENT?ye.SILENT:ye.ERROR}function i(t){switch(t){case ye.DEBUG:Te.logLevel=be.LogLevel.DEBUG;break;case ye.ERROR:Te.logLevel=be.LogLevel.ERROR;break;case ye.SILENT:Te.logLevel=be.LogLevel.SILENT;break;default:Te.error("Firestore ("+Se+"): Invalid value passed to `setLogLevel`")}}function o(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Te.logLevel<=be.LogLevel.DEBUG){var i=n.map(a);Te.debug.apply(Te,["Firestore ("+Se+") ["+t+"]: "+e].concat(i))}}function s(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Te.logLevel<=be.LogLevel.ERROR){var r=e.map(a);Te.error.apply(Te,["Firestore ("+Se+"): "+t].concat(r))}}function a(t){if("string"==typeof t)return t;var e=Ee.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function u(t){var e="FIRESTORE ("+Se+") INTERNAL ASSERTION FAILED: "+t;throw s(e),new Error(e)}function c(t,e){t||u(e)}function h(){return Ee.getPlatform().emptyByteString}function l(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new Ie(Ce.INVALID_ARGUMENT,t)}n.prototype=t.prototype;for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function f(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function d(t,e){return void 0!==t?t:e}function p(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function m(t){var e=[];return v(t,function(t,n){return e.push(n)}),e}function v(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function y(t){c(null!=t&&"object"==typeof t,"isEmpty() expects object parameter.");for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function g(t){c(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function b(t,e,n){if(e.length!==n)throw new Ie(Ce.INVALID_ARGUMENT,"Function "+t+"() requires "+B(n,"argument")+", but was called with "+B(e.length,"argument")+".")}function w(t,e,n){if(e.length<n)throw new Ie(Ce.INVALID_ARGUMENT,"Function "+t+"() requires at least "+B(n,"argument")+", but was called with "+B(e.length,"argument")+".")}function _(t,e,n,r){if(e.length<n||e.length>r)throw new Ie(Ce.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+B(e.length,"argument")+".")}function S(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new Ie(Ce.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+B(r,"element")+".")}function T(t,e,n,r){N(t,e,U(n)+" argument",r)}function E(t,e,n,r){void 0!==r&&T(t,e,n,r)}function C(t,e,n,r){N(t,e,n+" option",r)}function I(t,e,n,r){void 0!==r&&C(t,e,n,r)}function k(t,e,n,r,i){if(!(r instanceof Array))throw new Ie(Ce.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+R(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Ie(Ce.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+R(r[o]))}function x(t,e,n,r,i){void 0!==r&&k(t,e,n,r,i)}function D(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(R(u))}var c=R(r);throw new Ie(Ce.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}function A(t,e,n,r,i){void 0!==r&&D(t,e,n,r,i)}function N(t,e,n,r){if(!("object"===e?O(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=R(r);throw new Ie(Ce.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function O(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function R(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=L(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":u("Unknown wrong type: "+typeof t)}function L(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/,n=e.exec(t.constructor.toString());if(n&&n.length>1)return n[1]}return null}function M(t,e,n){if(void 0===n)throw new Ie(Ce.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+U(e)+" argument, but it was undefined.")}function P(t,e,n){v(e,function(e,r){if(n.indexOf(e)<0)throw new Ie(Ce.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function F(t,e,n,r){var i=R(r);return new Ie(Ce.INVALID_ARGUMENT,"Function "+t+"() requires its "+U(n)+" argument to be a "+e+", but it was: "+i)}function U(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function B(t,e){return t+" "+e+(1===t?"":"s")}function q(t,e){return t<e?-1:t>e?1:0}function V(t,e){return null!==t&&void 0!==t?!(!e||!t.isEqual(e)):t===e}function j(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function $(t){return t+"\0"}function W(){if("undefined"==typeof Uint8Array)throw new Ie(Ce.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function K(){if(!Ee.getPlatform().base64Available)throw new Ie(Ce.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function Q(t,e){return t<e?-1:t>e?1:t===e?0:isNaN(t)?isNaN(e)?0:-1:1}function H(t,e){return t===e?0!==t||1/t==1/e:t!==t&&e!==e}function z(t){return null===t||void 0===t}function G(t){return vn(t)&&t<=mn&&t>=pn}function X(t){return t instanceof fn?t.internalValue.slice():[]}function Y(t){switch(t){case Ce.OK:return u("Treated status OK as error");case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return u("Unknown status code: "+t)}}function J(t){var e=Ln[t];if(void 0!==e)return Z(e)}function Z(t){if(void 0===t)return s("GRPC error has no .code"),Ce.UNKNOWN;switch(t){case Ln.OK:return Ce.OK;case Ln.CANCELLED:return Ce.CANCELLED;case Ln.UNKNOWN:return Ce.UNKNOWN;case Ln.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case Ln.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case Ln.INTERNAL:return Ce.INTERNAL;case Ln.UNAVAILABLE:return Ce.UNAVAILABLE;case Ln.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case Ln.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case Ln.NOT_FOUND:return Ce.NOT_FOUND;case Ln.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case Ln.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case Ln.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case Ln.ABORTED:return Ce.ABORTED;case Ln.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case Ln.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case Ln.DATA_LOSS:return Ce.DATA_LOSS;default:return u("Unknown status code: "+t)}}function tt(t){if(void 0===t)return Ln.OK;switch(t){case Ce.OK:return Ln.OK;case Ce.CANCELLED:return Ln.CANCELLED;case Ce.UNKNOWN:return Ln.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return Ln.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return Ln.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return Ln.INTERNAL;case Ce.UNAVAILABLE:return Ln.UNAVAILABLE;case Ce.UNAUTHENTICATED:return Ln.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return Ln.INVALID_ARGUMENT;case Ce.NOT_FOUND:return Ln.NOT_FOUND;case Ce.ALREADY_EXISTS:return Ln.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return Ln.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return Ln.FAILED_PRECONDITION;case Ce.ABORTED:return Ln.ABORTED;case Ce.OUT_OF_RANGE:return Ln.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return Ln.UNIMPLEMENTED;case Ce.DATA_LOSS:return Ln.DATA_LOSS;default:return u("Unknown status code: "+t)}}function et(t){switch(t){case 200:return Ce.OK;case 400:return Ce.INVALID_ARGUMENT;case 401:return Ce.UNAUTHENTICATED;case 403:return Ce.PERMISSION_DENIED;case 404:return Ce.NOT_FOUND;case 409:return Ce.ABORTED;case 416:return Ce.OUT_OF_RANGE;case 429:return Ce.RESOURCE_EXHAUSTED;case 499:return Ce.CANCELLED;case 500:return Ce.UNKNOWN;case 501:return Ce.UNIMPLEMENTED;case 503:return Ce.UNAVAILABLE;case 504:return Ce.DEADLINE_EXCEEDED;default:return t>=200&&t<300?Ce.OK:t>=400&&t<500?Ce.FAILED_PRECONDITION:t>=500&&t<600?Ce.INTERNAL:Ce.UNKNOWN}}function nt(){return Hn}function rt(){return zn}function it(){return Gn}function ot(){return Xn}function st(){return Yn}function at(){return new We(Be.comparator)}function ut(){return new We(Be.comparator)}function ct(t,e){c(!z(t),e+" is missing")}function ht(t){return"number"==typeof t?t:"string"==typeof t?Number(t):u("can't parse "+t)}function lt(t,e,n){return e===n||!e&&n in t}function ft(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=pt(e)),e=dt(t.get(n),e);return pt(e)}function dt(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=Or+Lr;break;case Or:n+=Or+Mr;break;default:n+=o}}return n}function pt(t){return t+Or+Rr}function mt(t){var e=t.length;if(c(e>=2,"Invalid path "+t),2===e)return c(t.charAt(0)===Or&&t.charAt(1)===Rr,"Non-empty path "+t+" had length 2"),Pe.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf(Or,o);(s<0||s>n)&&u('Invalid encoded resource path: "'+t+'"');switch(t.charAt(s+1)){case Rr:var a=t.substring(o,s),h=void 0;0===i.length?h=a:(i+=a,h=i,i=""),r.push(h);break;case Lr:i+=t.substring(o,s),i+="\0";break;case Mr:i+=t.substring(o,s+1);break;default:u('Invalid encoded resource path: "'+t+'"')}o=s+2}return new Pe(r)}function vt(t){t.createObjectStore(jr.store)}function yt(t){t.createObjectStore($r.store,{keyPath:$r.keyPath}),t.createObjectStore(Wr.store,{keyPath:Wr.keyPath,autoIncrement:!0}).createIndex(Wr.userMutationsIndex,Wr.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Kr.store)}function gt(t,e){return e.store(Wr.store).loadAll().next(function(n){t.deleteObjectStore(Wr.store),t.createObjectStore(Wr.store,{keyPath:Wr.keyPath,autoIncrement:!0}).createIndex(Wr.userMutationsIndex,Wr.userMutationsKeyPath,{unique:!0});var r=e.store(Wr.store),i=n.map(function(t){return r.put(t)});return Br.waitFor(i)})}function bt(t){t.createObjectStore(zr.store)}function wt(t){t.createObjectStore(Xr.store,{keyPath:Xr.keyPath}).createIndex(Xr.documentTargetsIndex,Xr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Gr.store,{keyPath:Gr.keyPath}).createIndex(Gr.queryTargetsIndexName,Gr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Yr.store)}function _t(t){t.deleteObjectStore(Xr.store),t.deleteObjectStore(Gr.store),t.deleteObjectStore(Yr.store)}function St(t){var e=t.store(Yr.store),n=new Yr(0,0,xn.MIN.toTimestamp(),0);return e.put(Yr.key,n)}function Tt(t){t.createObjectStore(Jr.store,{keyPath:"id",autoIncrement:!0})}function Et(t){t.createObjectStore(Zr.store,{keyPath:Zr.keyPath})}function Ct(t,e,n){var r=Kr.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return At(t).iterate({range:o,keysOnly:!0},function(t,n,r){var o=t[0],a=t[1];t[2];o===e&&a===i&&(s=!0),r.done()}).next(function(){return s})}function It(t,e){var n=!1;return Nt(t).iterateSerial(function(r){return Ct(t,r,e).next(function(t){return t&&(n=!0),Br.resolve(!t)})}).next(function(){return n})}function kt(t,e,n){var r=t.store(Wr.store),i=t.store(Kr.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.iterate({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){c(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var h=[],l=0,f=n.mutations;l<f.length;l++){var d=f[l],p=Kr.key(e,d.key.path,n.batchId);o.push(i.delete(p)),h.push(d.key)}return Br.waitFor(o).next(function(){return h})}function xt(t){return t instanceof Uint8Array?(c("YES"===Object({NODE_ENV:"production"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function Dt(t){return Ei.getStore(t,Wr.store)}function At(t){return Ei.getStore(t,Kr.store)}function Nt(t){return Ei.getStore(t,$r.store)}function Ot(t){return new Br(function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){n(t.target.error)}})}function Rt(t){return Ei.getStore(t,Gr.store)}function Lt(t){return Ei.getStore(t,Yr.store)}function Mt(t){return ui.getStore(t,Yr.store).get(Yr.key).next(function(t){return c(null!==t,"Missing metadata row."),t})}function Pt(t){return Mt(t).next(function(t){return t.highestListenSequenceNumber})}function Ft(t){return Ei.getStore(t,Xr.store)}function Ut(t){return t.code===Ce.DATA_LOSS&&t.message===di}function Bt(t){return Ei.getStore(t,zr.store)}function qt(t){return Ei.getStore(t,Jr.store)}function Vt(t){return t.path.toArray()}function jt(t){return void 0!==t.documents}function $t(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=q(n,i);return 0===s?q(r,o):s}function Wt(t){return t.code===Ce.FAILED_PRECONDITION&&t.message===wi}function Kt(t){return t.store(jr.store)}function Qt(t){return t.store(Zr.store)}function Ht(t){return[0,ft(t.path)]}function zt(t,e){return new Xr(0,ft(t.path),e)}function Gt(t,e){return Ft(t).put(zt(e,t.currentSequenceNumber))}function Xt(t,e){var n=function(t){switch(t){case Kn.Added:return 1;case Kn.Modified:case Kn.Metadata:return 2;case Kn.Removed:return 0;default:return u("Unknown ChangeType: "+t)}};return n(t)-n(e)}function Yt(t){var e=kr.INVALID;if(null!=t)try{var n=JSON.parse(t);c("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){s(ho,"Failed to read sequence number from WebStorage",t)}return e}function Jt(t){if(t.search(ko)>=0)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Io.bind.apply(Io,[void 0].concat(t.split("."))))}catch(e){throw new Ie(Ce.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}function Zt(t){if(!t)return new Do;switch(t.type){case"gapi":return new Oo(t.client,t.sessionIndex||"0");case"provider":return t.client;default:throw new Ie(Ce.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function te(t){return ee(t,["next","error","complete"])}function ee(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=e;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}function ne(t){switch(t){case Xi.Set:case Xi.MergeSet:case Xi.Update:return!0;case Xi.Argument:return!1;default:throw u("Unexpected case for UserDataSource: "+t)}}function re(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof Ae||t instanceof xe||t instanceof $o||t instanceof Ro)}function ie(t,e,n){if(!re(n)||!O(n)){var r=R(n);throw"an object"===r?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function oe(t,e){if(e instanceof Io)return e._internalPath;if("string"==typeof e)return se(t,e);throw new Ie(Ce.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function se(t,e){try{return Jt(e)._internalPath}catch(e){var n=ae(e);throw new Ie(Ce.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function ae(t){return t instanceof Error?t.message:t.toString()}function ue(){throw new Ie(Ce.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}function ce(t,e){if(void 0===e)return{merge:!1};if(P(t,e,["merge","mergeFields"]),I(t,"boolean","merge",e.merge),x(t,"mergeFields","a string or a FieldPath",e.mergeFields,function(t){return"string"==typeof t||t instanceof Io}),void 0!==e.mergeFields&&void 0!==e.merge)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function he(t,e){return void 0===e?{}:(P(t,e,["serverTimestamps"]),A(t,"options","serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function le(t,e){E(t,"object",1,e),e&&(P(t,e,["source"]),A(t,"options","source",e.source,["default","server","cache"]))}function fe(t,e,n){if(e instanceof es){if(e.firestore!==n)throw new Ie(Ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw F(t,"DocumentReference",1,e)}function de(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(e){var o=new is(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return c(e.type===Kn.Added,"Invalid event type for first snapshot"),c(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Kn.Metadata}).map(function(e){var r=new is(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),i=-1,s=-1;return e.type!==Kn.Added&&(i=o.indexOf(e.doc.key),c(i>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==Kn.Removed&&(o=o.add(e.doc),s=o.indexOf(e.doc.key)),{type:pe(e.type),doc:r,oldIndex:i,newIndex:s}})}function pe(t){switch(t){case Kn.Added:return"added";case Kn.Modified:case Kn.Metadata:return"modified";case Kn.Removed:return"removed";default:return u("Unknown change type: "+t)}}function me(t){t.INTERNAL.registerService("firestore",function(t){return new Jo(t)},g(ys))}function ve(t){me(t)}Object.defineProperty(e,"__esModule",{value:!0});var ye,ge=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(n(35)),be=n(130),we=n(36),_e=n(131),Se=ge.SDK_VERSION,Te=new be.Logger("@firebase/firestore");!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT"}(ye||(ye={}));var Ee=function(){function t(){}return t.setPlatform=function(e){t.platform&&u("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||u("Platform not set"),t.platform},t}(),Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ie=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return we.__extends(e,t),e}(Error),ke=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return c(20===e.length,"Invalid auto ID: "+e),e},t}(),xe=function(){function t(t){K(),this._binaryString=t}return t.fromBase64String=function(e){b("Blob.fromBase64String",arguments,1),T("Blob.fromBase64String","string",1,e),K();try{return new t(Ee.getPlatform().atob(e))}catch(t){throw new Ie(Ce.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(b("Blob.fromUint8Array",arguments,1),W(),!(e instanceof Uint8Array))throw F("Blob.fromUint8Array","Uint8Array",1,e);return new t(Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join(""))},t.prototype.toBase64=function(){return b("Blob.toBase64",arguments,0),K(),Ee.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){b("Blob.toUint8Array",arguments,0),W();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return q(this._binaryString,t._binaryString)},t}(),De=l(xe,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Ae=function(){function t(t,e){if(b("GeoPoint",arguments,2),T("GeoPoint","number",1,t),T("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new Ie(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ie(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return q(this._lat,t._lat)||q(this._long,t._long)},t}(),Ne=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ie(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ie(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ie(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ie(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?q(this.nanoseconds,t.nanoseconds):q(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),Oe=function(){function t(t,e,n,r){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r}return t}(),Re="(default)",Le=function(){function t(t,e){this.projectId=t,this.database=e||Re}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===Re},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return q(this.projectId,t.projectId)||q(this.database,t.database)},t}(),Me=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&u("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&u("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):"string"==typeof e?n.push(e):u("Unknown parameter type for Path.child(): "+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,c(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return c(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return c(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return c(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},t.prototype.get=function(t){return c(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Pe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return we.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(Me),Fe=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ue=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return we.__extends(e,t),e.isValidIdentifier=function(t){return Fe.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ie(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ie(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ie(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(Me),Be=function(){function t(e){this.path=e,c(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.isEqual=function(t){return null!==t&&0===Pe.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Pe.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Pe(e.slice()))},t.fromPathString=function(e){return new t(Pe.fromString(e))},t.EMPTY=new t(new Pe([])),t}(),qe=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return Be.comparator(t.key,e.key)},t}(),Ve=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.data=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return we.__extends(e,t),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):u("Trying to compare documents on fields that don't exist")},e}(qe),je=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return we.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(qe),$e=function(t){function e(e,n){return t.call(this,e,n)||this}return we.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(qe),We=function(){function t(t,e){this.comparator=t,this.root=e||Qe.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qe.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ke(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ke(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ke(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ke(this.root,t,this.comparator,!0)},t.prototype[Symbol.iterator]=function(){var t=this.getIterator();return{next:function(){return t.hasNext()?{done:!1,value:t.getNext()}:{done:!0,value:{}}}}},t}(),Ke=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){c(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Qe=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw u("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw u("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw u("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),He=function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Qe(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();Qe.EMPTY=new He;var ze;!function(t){t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue"}(ze||(ze={}));var Ge;!function(t){t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous"}(Ge||(Ge={}));var Xe,Ye=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(Ge.Estimate,n);case"previous":return new t(Ge.Previous,n);case"none":case void 0:return new t(Ge.Default,n);default:return u("fromSnapshotOptions() called with invalid options.")}},t}(),Je=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return c(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),q(this.typeOrder,t.typeOrder)},t}(),Ze=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=ze.NullValue,e.internalValue=null,e}return we.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(Je),tn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ze.BooleanValue,n}return we.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?q(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(Je),en=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ze.NumberValue,n}return we.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Q(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(Je),nn=function(t){function e(e){return t.call(this,e)||this}return we.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&H(this.internalValue,t.internalValue)},e}(en),rn=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return we.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&H(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(en),on=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ze.StringValue,n}return we.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?q(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(Je),sn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ze.TimestampValue,n}return we.__extends(e,t),e.prototype.value=function(t){return t&&t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof an?-1:this.defaultCompareTo(t)},e}(Je),an=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=ze.TimestampValue,r}return we.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===Ge.Estimate?new sn(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===Ge.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof sn?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(Je),un=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ze.BlobValue,n}return we.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Je),cn=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=ze.RefValue,r}return we.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&(this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId))},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:Be.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(Je),hn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ze.GeoPointValue,n}return we.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Je),ln=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ze.ObjectValue,n}return we.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),s=q(i.key,o.key)||i.value.compareTo(o.value);if(s)return s}return q(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(c(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(c(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){c(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e?n.internalValue.get(t)||void 0:void 0}),n},e.prototype.toString=function(){return JSON.stringify(this.value())},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new We(q)),e}(Je),fn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ze.ArrayValue,n}return we.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return q(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return JSON.stringify(this.value())},e}(Je),dn=Number,pn=dn.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),mn=dn.MAX_SAFE_INTEGER||Math.pow(2,53)-1,vn=dn.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},yn=function(){function t(t,e,n,r,i,o){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.path=t,this.explicitOrderBy=e,this.filters=n,this.limit=r,this.startAt=i,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[In]:this.memoizedOrderBy=[new Cn(t),In];else{c(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var s=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Tn.ASCENDING;this.memoizedOrderBy.push(s===Tn.ASCENDING?In:kn)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){c(null==this.getInequalityFilterField()||!(e instanceof wn)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),c(!Be.isDocumentKey(this.path),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){c(!Be.isDocumentKey(this.path),"No ordering allowed for document query"),c(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();t+="|f:";for(var e=0,n=this.filters;e<n.length;e++){t+=n[e].canonicalId(),t+=","}t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){t+=i[r].canonicalId(),t+=","}z(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),z(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(var e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return!!this.path.isEqual(t.path)&&(!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt))},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.isKeyField()}return c(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesAncestor(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!z(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof wn&&n.isInequality())return n.field}return null},t.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(t){return t instanceof wn&&t.op===bn.ARRAY_CONTAINS})},t.prototype.isDocumentQuery=function(){return Be.isDocumentKey(this.path)&&0===this.filters.length},t.prototype.matchesAncestor=function(t){var e=t.key.path;return Be.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isPrefixOf(e)&&this.path.length===e.length-1},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++){if(!n[e].matches(t))return!1}return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){c(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),gn=function(){function t(){}return t.create=function(t,e,n){if(n.isEqual(Ze.INSTANCE)){if(e!==bn.EQUAL)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new _n(t)}if(n.isEqual(rn.NAN)){if(e!==bn.EQUAL)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new Sn(t)}return new wn(t,e,n)},t}(),bn=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;default:return u("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t}(),wn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return we.__extends(e,t),e.prototype.matches=function(t){if(this.field.isKeyField()){c(this.value instanceof cn,"Comparing on key, but filter value not a RefValue"),c(this.op!==bn.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var e=this.value,n=Be.comparator(t.key,e.key);return this.matchesComparison(n)}var r=t.field(this.field);return void 0!==r&&this.matchesValue(r)},e.prototype.matchesValue=function(t){var e=this;return this.op===bn.ARRAY_CONTAINS?t instanceof fn&&void 0!==t.internalValue.find(function(t){return t.isEqual(e.value)}):this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case bn.LESS_THAN:return t<0;case bn.LESS_THAN_OR_EQUAL:return t<=0;case bn.EQUAL:return 0===t;case bn.GREATER_THAN:return t>0;case bn.GREATER_THAN_OR_EQUAL:return t>=0;default:return u("Unknown relation op"+this.op)}},e.prototype.isInequality=function(){return this.op!==bn.EQUAL&&this.op!==bn.ARRAY_CONTAINS},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&(this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value))},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(gn),_n=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return we.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},e.prototype.toString=function(){return this.field.canonicalString()+" IS null"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(gn),Sn=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return we.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field),n=e&&e.value();return"number"==typeof n&&isNaN(n)},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(gn),Tn=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),En=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++){t+=n[e].toString()}return t},t.prototype.sortsBeforeDocument=function(t,e){c(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())c(o instanceof cn,"Bound has a non-key value where the key path is being used."),n=Be.comparator(o.key,e.key);else{var s=e.field(i.field);c(void 0!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(i.dir===Tn.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];return n.isEqual(r)}return!0},t}(),Cn=function(){function t(t,e){this.field=t,void 0===e&&(e=Tn.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?Ve.compareByKey(t,e):Ve.compareByField(this.field,t,e);switch(this.dir){case Tn.ASCENDING:return n;case Tn.DESCENDING:return-1*n;default:return u("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),In=new Cn(Ue.keyField(),Tn.ASCENDING),kn=new Cn(Ue.keyField(),Tn.DESCENDING),xn=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new Ne(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new Ne(0,0)),t}();!function(t){t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution"}(Xe||(Xe={}));var Dn,An=function(){function t(t,e,n,r,i,o){void 0===i&&(i=xn.MIN),void 0===o&&(o=h()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return t.prototype.copy=function(e){return new t(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),Nn=function(){function t(t){this.fields=t}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++){if(n[e].isPrefixOf(t))return!0}return!1},t.prototype.isEqual=function(t){return j(this.fields,t.fields)},t}(),On=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),Rn=function(){function t(t,e){this.version=t,this.transformResults=e}return t}();!function(t){t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete"}(Dn||(Dn={}));var Ln,Mn=function(){function t(t,e){this.updateTime=t,this.exists=e,c(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof Ve&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof Ve:(c(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return V(this.updateTime,t.updateTime)&&this.exists===t.exists},t.NONE=new t,t}(),Pn=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&c(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof Ve?t.version:xn.MIN},t}(),Fn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=Dn.Set,i}return we.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),c(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new Ve(this.key,n,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Pn.getPostMutationVersion(t);return new Ve(this.key,r,this.value,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(Pn),Un=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=Dn.Patch,o}return we.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),c(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new $e(this.key,e.version);var n=this.patchDocument(t);return new Ve(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Pn.getPostMutationVersion(t),i=this.patchDocument(t);return new Ve(this.key,r,i,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var e;return e=t instanceof Ve?t.data:ln.EMPTY,this.patchObject(e)},e.prototype.patchObject=function(t){for(var e=0,n=this.fieldMask.fields;e<n.length;e++){var r=n[e];if(!r.isEmpty()){var i=this.data.field(r);t=void 0!==i?t.set(r,i):t.delete(r)}}return t},e}(Pn),Bn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=Dn.Transform,r.precondition=Mn.exists(!0),r}return we.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),c(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new $e(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data,r);return new Ve(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new Ve(this.key,r.version,o,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&j(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){c(t instanceof Ve,"Unknown MaybeDocument type "+t);var e=t;return c(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];c(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof Ve&&(s=t.field(i.field)||null),n.push(o.applyToRemoteDocument(s,e[r]))}return n},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],s=o.transform,a=null;e instanceof Ve&&(a=e.field(o.field)||null),n.push(s.applyToLocalView(a,t))}return n},e.prototype.transformObject=function(t,e){c(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n],i=r.field;t=t.set(i,e[n])}return t},e}(Pn),qn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=Dn.Delete,r}return we.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),c(null==e.transformResults,"Transform results received by DeleteMutation."),new je(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&c(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new je(this.key,xn.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(Pn),Vn=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new an(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),jn=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=X(t),n=0,r=this.elements;n<r.length;n++){var i=r[n];!function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)}(i)}return new fn(e)},t.prototype.isEqual=function(e){return e instanceof t&&j(e.elements,this.elements)},t}(),$n=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=X(t),n=0,r=this.elements;n<r.length;n++){var i=r[n];!function(t){e=e.filter(function(e){return!e.isEqual(t)})}(i)}return new fn(e)},t.prototype.isEqual=function(e){return e instanceof t&&j(e.elements,this.elements)},t}(),Wn=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();!function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS"}(Ln||(Ln={}));var Kn,Qn=function(){function t(t){this.comparator=t,this.data=new We(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();){if(!t(n.getNext().key))return}},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype[Symbol.iterator]=function(){var t=this.data.getIterator();return{next:function(){return t.hasNext()?{done:!1,value:t.getNext().key}:{done:!0,value:{}}}}},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Hn=new We(Be.comparator),zn=new We(Be.comparator),Gn=new We(Be.comparator),Xn=new Qn(Be.comparator),Yn=new Qn(q),Jn=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Be.comparator(e.key,n.key)}:function(t,e){return Be.comparator(t.key,e.key)},this.keyedMap=rt(),this.sortedSet=new We(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}();!function(t){t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata"}(Kn||(Kn={}));var Zn;!function(t){t[t.Local=0]="Local",t[t.Synced=1]="Synced"}(Zn||(Zn={}));var tr,er=function(){function t(){this.changeMap=new We(Be.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);if(!n)return void(this.changeMap=this.changeMap.insert(e,t));t.type!==Kn.Added&&n.type===Kn.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Kn.Metadata&&n.type!==Kn.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Kn.Modified&&n.type===Kn.Modified?this.changeMap=this.changeMap.insert(e,{type:Kn.Modified,doc:t.doc}):t.type===Kn.Modified&&n.type===Kn.Added?this.changeMap=this.changeMap.insert(e,{type:Kn.Added,doc:t.doc}):t.type===Kn.Removed&&n.type===Kn.Added?this.changeMap=this.changeMap.remove(e):t.type===Kn.Removed&&n.type===Kn.Modified?this.changeMap=this.changeMap.insert(e,{type:Kn.Removed,doc:n.doc}):t.type===Kn.Added&&n.type===Kn.Removed?this.changeMap=this.changeMap.insert(e,{type:Kn.Modified,doc:t.doc}):u("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n))},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),nr=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:Kn.Added,doc:t})}),new t(e,n,Jn.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),rr=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=(i={},i[e]=ir.createSynthesizedTargetChangeForCurrentChange(e,n),i);return new t(xn.MIN,r,st(),nt(),ot());var i},t}(),ir=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(h(),n,ot(),ot(),ot())},t}(),or=function(){function t(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r}return t}(),sr=function(){function t(t,e){this.targetId=t,this.existenceFilter=e}return t}();!function(t){t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset"}(tr||(tr={}));var ar=function(){function t(t,e,n,r){void 0===n&&(n=h()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}return t}(),ur=function(){function t(){this.pendingResponses=0,this.documentChanges=ut(),this._resumeToken=h(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=ot(),e=ot(),n=ot();return this.documentChanges.forEach(function(r,i){switch(i){case Kn.Added:t=t.add(r);break;case Kn.Modified:e=e.add(r);break;case Kn.Removed:n=n.add(r);break;default:u("Encountered invalid change type: "+i)}}),new ir(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=ut()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),cr=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=nt(),this.pendingDocumentTargetMapping=at(),this.pendingTargetResets=new Qn(q)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof Ve?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof je&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var r=o[i];this.removeDocumentFromTarget(r,t.key,t.newDoc)}},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ensureTargetState(n);switch(t.state){case tr.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case tr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case tr.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),c(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case tr.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case tr.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:u("Unknown target watch change state: "+t.state)}})},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):p(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new Be(i.path);this.removeDocumentFromTarget(e,o,new je(o,xn.forDeletedDoc()))}else c(1===n,"Single document existence filter with count: "+n);else{this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}}},t.prototype.createRemoteEvent=function(t){var e=this,n={};p(this.targetStates,function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var s=new Be(o.query.path);null!==e.pendingDocumentUpdates.get(s)||e.targetContainsDocument(r,s)||e.removeDocumentFromTarget(r,s,new je(s,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=ot();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===Xe.LimboResolution||(i=!1,!1)}),i&&(r=r.add(t))});var i=new rr(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=nt(),this.pendingDocumentTargetMapping=at(),this.pendingTargetResets=new Qn(q),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Kn.Modified:Kn.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Kn.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t),n=e.toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new ur),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new Qn(q),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){return null!==this.queryDataForActiveTarget(t)},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;c(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new ur,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}(),hr=function(){var t={};return t[Tn.ASCENDING.name]="ASCENDING",t[Tn.DESCENDING.name]="DESCENDING",t}(),lr=function(){var t={};return t[bn.LESS_THAN.name]="LESS_THAN",t[bn.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",t[bn.GREATER_THAN.name]="GREATER_THAN",t[bn.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",t[bn.EQUAL.name]="EQUAL",t[bn.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",t}(),fr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),dr=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?Ce.UNKNOWN:Z(t.code);return new Ie(e,t.message||"")},t.prototype.toInt32Value=function(t){return z(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return e="object"==typeof t?t.value:t,z(e)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);c(!!t,"Cannot deserialize null or undefined timestamp.");var e=ht(t.seconds||"0"),n=t.nanos||0;return new Ne(e,n)},t.prototype.fromIso8601String=function(t){var e=0,n=fr.exec(t);if(c(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new Ne(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(c(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),xe.fromBase64String(t)):(c(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),xe.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return c(!!t,"Trying to deserialize version that isn't set"),xn.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=Pe.fromString(t);return c(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return c(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),c(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new Be(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return 0===t.length?this.encodedDatabaseId:this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?Pe.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new Pe(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new Pe(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return c(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof Ze)return{nullValue:"NULL_VALUE"};if(t instanceof tn)return{booleanValue:t.value()};if(t instanceof nn)return{integerValue:""+t.value()};if(t instanceof rn){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof on?{stringValue:t.value()}:t instanceof ln?{mapValue:this.toMapValue(t)}:t instanceof fn?{arrayValue:this.toArrayValue(t)}:t instanceof sn?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof hn?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof un?{bytesValue:this.toBytes(t.value())}:t instanceof cn?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:u("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t.value_type;if(lt(t,n,"nullValue"))return Ze.INSTANCE;if(lt(t,n,"booleanValue"))return tn.of(t.booleanValue);if(lt(t,n,"integerValue"))return new nn(ht(t.integerValue));if(lt(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return rn.NAN;if("Infinity"===t.doubleValue)return rn.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return rn.NEGATIVE_INFINITY}return new rn(t.doubleValue)}if(lt(t,n,"stringValue"))return new on(t.stringValue);if(lt(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(lt(t,n,"arrayValue")){ct(t.arrayValue,"arrayValue");var r=t.arrayValue.values||[];return new fn(r.map(function(t){return e.fromValue(t)}))}if(lt(t,n,"timestampValue"))return ct(t.timestampValue,"timestampValue"),new sn(this.fromTimestamp(t.timestampValue));if(lt(t,n,"geoPointValue")){ct(t.geoPointValue,"geoPointValue");var i=t.geoPointValue.latitude||0,o=t.geoPointValue.longitude||0;return new hn(new Ae(i,o))}if(lt(t,n,"bytesValue")){ct(t.bytesValue,"bytesValue");var s=this.fromBlob(t.bytesValue);return new un(s)}if(lt(t,n,"referenceValue")){ct(t.referenceValue,"referenceValue");var a=this.fromResourceName(t.referenceValue),c=new Le(a.get(1),a.get(3)),h=new Be(this.extractLocalPathFromResourceName(a));return new cn(c,h)}return u("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return c(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new Ve(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=t,r=ln.EMPTY;return v(n,function(t,n){r=r.set(new Ue([t]),e.fromValue(n))}),r},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){c(!!t.found,"Tried to deserialize a found document from a missing document."),ct(t.found.name,"doc.found.name"),ct(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new Ve(e,n,r,{})},t.prototype.fromMissing=function(t){c(!!t.missing,"Tried to deserialize a missing document from a found document."),c(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new je(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t.result;return lt(t,e,"found")?this.fromFound(t):lt(t,e,"missing")?this.fromMissing(t):u("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case tr.Added:return"ADD";case tr.Current:return"CURRENT";case tr.NoChange:return"NO_CHANGE";case tr.Removed:return"REMOVE";case tr.Reset:return"RESET";default:return u("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof sr)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof or){if(t.newDoc instanceof Ve){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof je){var e=t.newDoc;return{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}}}if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof ar){var n=void 0;return t.cause&&(n={code:tt(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return u("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t.response_type;if(lt(t,n,"targetChange")){ct(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),s=t.targetChange.cause,a=s&&this.fromRpcStatus(s);e=new ar(r,i,o,a||null)}else if(lt(t,n,"documentChange")){ct(t.documentChange,"documentChange"),ct(t.documentChange.document,"documentChange.name"),ct(t.documentChange.document.name,"documentChange.document.name"),ct(t.documentChange.document.updateTime,"documentChange.document.updateTime");var c=t.documentChange,h=this.fromName(c.document.name),l=this.fromVersion(c.document.updateTime),f=this.fromFields(c.document.fields||{}),d=new Ve(h,l,f,{}),p=c.targetIds||[],m=c.removedTargetIds||[];e=new or(p,m,d.key,d)}else if(lt(t,n,"documentDelete")){ct(t.documentDelete,"documentDelete"),ct(t.documentDelete.document,"documentDelete.document");var v=t.documentDelete,h=this.fromName(v.document),l=v.readTime?this.fromVersion(v.readTime):xn.forDeletedDoc(),d=new je(h,l),m=v.removedTargetIds||[];e=new or([],m,d.key,d)}else if(lt(t,n,"documentRemove")){ct(t.documentRemove,"documentRemove"),ct(t.documentRemove.document,"documentRemove");var y=t.documentRemove,h=this.fromName(y.document),m=y.removedTargetIds||[];e=new or([],m,h,null)}else{if(!lt(t,n,"filter"))return u("Unknown change type "+JSON.stringify(t));ct(t.filter,"filter"),ct(t.filter.targetId,"filter.targetId");var g=t.filter,b=g.count||0,w=new Wn(b),_=g.targetId;e=new sr(_,w)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?tr.NoChange:"ADD"===t?tr.Added:"REMOVE"===t?tr.Removed:"CURRENT"===t?tr.Current:"RESET"===t?tr.Reset:u("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!lt(t,t.response_type,"targetChange"))return xn.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?xn.MIN:e.readTime?this.fromVersion(e.readTime):xn.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof Fn)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof qn)e={delete:this.toName(t.key)};else if(t instanceof Un)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof Bn))return u("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):Mn.NONE;if(t.update){ct(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new Un(r,i,o,n)}return new Fn(r,i,n)}if(t.delete){var r=this.fromName(t.delete);return new qn(r,n)}if(t.transform){var r=this.fromName(t.transform.document),s=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return c(!0===n.exists,'Transforms only support precondition "exists == true"'),new Bn(r,s)}return u("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return c(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:u("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?Mn.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Mn.exists(t.exists):Mn.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e),i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new Rn(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(c(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof Vn)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof jn)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof $n)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};throw u("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=t.transform_type,r=null;if(lt(t,n,"setToServerValue"))c("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),r=Vn.instance;else if(lt(t,n,"appendMissingElements")){var i=t.appendMissingElements.values||[];r=new jn(i.map(function(t){return e.fromValue(t)}))}else if(lt(t,n,"removeAllFromArray")){var i=t.removeAllFromArray.values||[];r=new $n(i.map(function(t){return e.fromValue(t)}))}else u("Unknown transform proto: "+JSON.stringify(t));var o=Ue.fromServerFormat(t.fieldPath);return new On(o,r)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;c(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return yn.atPath(this.fromQueryPath(n))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}};if(t.path.isEmpty())e.parent=this.toQueryPath(Pe.EMPTY_PATH);else{var n=t.path;c(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0;if(r>0){c(1===r,"StructuredQuery.from with more than one collection is not supported.");var i=n.from[0];e=e.child(i.collectionId)}var o=[];n.where&&(o=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var a=null;n.limit&&(a=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var h=null;return n.endAt&&(h=this.fromCursor(n.endAt)),new yn(e,s,o,a,u,h)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case Xe.Listen:return null;case Xe.ExistenceFilterMismatch:return"existence-filter-mismatch";case Xe.LimboResolution:return"limbo-document";default:return u("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)},e.targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof wn?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):u("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new En(r,n)},t.prototype.toDirection=function(t){return hr[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Tn.ASCENDING;case"DESCENDING":return Tn.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return lr[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return bn.EQUAL;case"GREATER_THAN":return bn.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return bn.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return bn.LESS_THAN;case"LESS_THAN_OR_EQUAL":return bn.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return bn.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return u("Unspecified relation");default:return u("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return Ue.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Cn(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof wn?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:u("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new wn(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof Sn?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof _n?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:u("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new Sn(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new _n(n);case"OPERATOR_UNSPECIFIED":return u("Unspecified filter");default:return u("Unknown filter")}},t.prototype.toDocumentMask=function(t){return{fieldPaths:t.fields.map(function(t){return t.canonicalString()})}},t.prototype.fromDocumentMask=function(t){var e=t.fieldPaths||[],n=e.map(function(t){return Ue.fromServerFormat(t)});return new Nn(n)},t}(),pr=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},mr="FirebaseError",vr=Error.captureStackTrace,yr=function(){function t(t,e){if(this.code=t,this.message=e,vr)vr(this,gr.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=mr,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}return t}();yr.prototype=Object.create(Error.prototype),yr.prototype.constructor=yr,yr.prototype.name=mr;var gr=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new yr(i,n);for(var s in e)e.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(o[s]=e[s]);return o},t}(),br=function(){function t(){this.blockSize=-1}return t}(),wr=(function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}we.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(var r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(var r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);var i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}(br),function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){c(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){c(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){c(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){c(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){c(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){c(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}()),_r="Connection",Sr={BatchGetDocuments:"batchGet",Commit:"commit"},Tr="gl-js/ fire/"+Se,Er=function(){function t(t){this.databaseId=t.databaseId,this.pool=new _e.XhrIoPool;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=Tr},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(s,a){r.pool.getObject(function(c){c.listenOnce(_e.EventType.COMPLETE,function(){try{switch(c.getLastErrorCode()){case _e.ErrorCode.NO_ERROR:var e=c.getResponseJson();o(_r,"XHR received:",JSON.stringify(e)),s(e);break;case _e.ErrorCode.TIMEOUT:o(_r,'RPC "'+t+'" timed out'),a(new Ie(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case _e.ErrorCode.HTTP_ERROR:var n=c.getStatus();o(_r,'RPC "'+t+'" failed with status:',n,"response text:",c.getResponseText()),n>0?a(new Ie(et(n),"Server responded with status "+c.getStatusText())):(o(_r,'RPC "'+t+'" failed'),a(new Ie(Ce.UNAVAILABLE,"Connection failed.")));break;default:u('RPC "'+t+'" failed with unanticipated webchannel error '+c.getLastErrorCode()+": "+c.getLastError()+", giving up.")}}finally{o(_r,'RPC "'+t+'" completed.'),r.pool.releaseObject(c)}});var h=JSON.stringify(e);o(_r,"XHR sending: ",i+" "+h);var l={"Content-Type":"text/plain"};r.modifyHeadersForRequest(l,n),c.send(i,"POST",h,l,15)})})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1beta1.Firestore","/",t,"/channel"],r=_e.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,e),pr()||(i.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");o(_r,"Creating WebChannel: "+s+" "+i);var a=r.createWebChannel(s,i),u=!1,h=!1,l=new wr({sendFn:function(t){h?o(_r,"Not sending because WebChannel is closed:",t):(u||(o(_r,"Opening WebChannel transport."),a.open(),u=!0),o(_r,"WebChannel sending:",t),a.send(t))},closeFn:function(){return a.close()}}),f=function(t,e){a.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return f(_e.WebChannel.EventType.OPEN,function(){h||o(_r,"WebChannel transport opened.")}),f(_e.WebChannel.EventType.CLOSE,function(){h||(h=!0,o(_r,"WebChannel transport closed"),l.callOnClose())}),f(_e.WebChannel.EventType.ERROR,function(t){h||(h=!0,o(_r,"WebChannel transport errored:",t),l.callOnClose(new Ie(Ce.UNAVAILABLE,"The operation could not be completed")))}),f(_e.WebChannel.EventType.MESSAGE,function(t){if(!h){var e=t.data[0];c(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){o(_r,"WebChannel received error:",n);var r=n.status,i=J(r),s=n.message;void 0===i&&(i=Ce.INTERNAL,s="Unknown error status: "+r+" with message "+n.message),h=!0,l.callOnClose(new Ie(i,s)),a.close()}else o(_r,"WebChannel received:",e),l.callOnMessage(e)}}),setTimeout(function(){l.callOnOpen()},0),l},t.prototype.makeUrl=function(t){var e=Sr[t];c(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1beta1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}(),Cr=function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new Er(t))},t.prototype.newSerializer=function(t){return new dr(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();Ee.setPlatform(new Cr);var Ir,kr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),xr=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t}();!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh"}(Ir||(Ir={}));var Dr,Ar=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ie(Ce.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),Nr=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueue=function(t){var e=this;this.verifyNotFailed();var n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw s("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),c(e>=0,"Attempted to schedule an operation with a negative delay of "+e),c(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var i=Ar.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&u("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){c(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){return this.delayedOperations.findIndex(function(e){return e.timerId===t})>=0},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){c(t===Ir.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==Ir.All&&i.timerId===t)break}return e.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);c(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),Or="",Rr="",Lr="",Mr="",Pr=-1,Fr=function(){function t(t,e,n){this.batchId=t,this.localWriteTime=e,this.mutations=n}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&c(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;c(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var s=r[i];e=o.applyToRemoteDocument(e,s)}}return e},t.prototype.applyToLocalView=function(t,e){e&&c(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=e,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t)&&(e=i.applyToLocalView(e,n,this.localWriteTime))}return e},t.prototype.keys=function(){for(var t=ot(),e=0,n=this.mutations;e<n.length;e++){var r=n[e];t=t.add(r.key)}return t},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&j(this.mutations,t.mutations)},t.prototype.isTombstone=function(){return 0===this.mutations.length},t.prototype.toTombstone=function(){return new t(this.batchId,this.localWriteTime,[])},t}(),Ur=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){c(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=it(),s=e.mutations,a=0;a<s.length;a++)o=o.insert(s[a].key,r[a].version);return new t(e,n,r,i,o)},t}(),Br=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&u("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){var n=e[Symbol.iterator]();return new t(function(t,e){for(var r=0,i=0,o=n.next();!o.done;)++r,o.value.next(function(){++i,o.done&&i===r&&t()},function(t){return e(t)}),o=n.next();i===r&&t()})},t.map=function(e){for(var n=[],r=[],i=e[Symbol.iterator](),o=i.next(),s=0;!o.done;)!function(){var t=o.value,e=s;r.push(t.next(function(t){n[e]=t})),o=i.next(),++s}();return t.waitFor(r).next(function(){return n})},t.or=function(e){for(var n=t.resolve(!1),r=0,i=e;r<i.length;r++){var o=i[r];!function(e){n=n.next(function(n){return n?t.resolve(n):e()})}(o)}return n},t.forEach=function(t,e){for(var n=t[Symbol.iterator](),r=[],i=n.next();!i.done;){var o=i.value;r.push(e(o)),i=n.next()}return this.waitFor(r)},t}(),qr=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;c(n<r&&n>=0&&r<=5,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(vt(t),yt(t),wt(t),bt(t));var o=Br.resolve();return n<3&&r>=3&&(0!==n&&(_t(t),wt(t)),o=o.next(function(){return St(e)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return gt(t,e)})),o=o.next(function(){Et(t),Tt(t)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(e)})),o},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store($r.store),r=t.store(Wr.store);return n.loadAll().next(function(n){return Br.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,Pr],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(Wr.userMutationsIndex,i).next(function(r){return Br.forEach(r,function(r){c(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return kt(t,n.userId,i).next()})})})})},t}(),Vr=function(){function t(t,e){this.seconds=t,this.nanoseconds=e}return t}(),jr=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),$r=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),Wr=function(){function t(t,e,n,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.mutations=r}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),Kr=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ft(e)]},t.key=function(t,e,n){return[t,ft(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),Qr=function(){function t(t,e){this.path=t,this.readTime=e}return t}(),Hr=function(){function t(t,e){this.path=t,this.version=e}return t}(),zr=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store="remoteDocuments",t}(),Gr=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),Xr=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,c(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),Yr=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),Jr=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}(),Zr=function(){function t(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return t.store="clientMetadata",t.keyPath="clientId",t}(),ti=[$r.store,Wr.store,Kr.store,zr.store,Gr.store,jr.store,Yr.store,Xr.store],ei=ti,ni=ei.concat([Zr.store,Jr.store]),ri=ni,ii=function(){function t(t,e,n){this.userId=t,this.serializer=e,this.referenceDelegate=n,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r){return c(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r)},t.prototype.start=function(t){return Br.resolve()},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dt(t).iterate({index:Wr.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(r){var i=e.batchId;return c(i>r.lastAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order"),r.lastAcknowledgedBatchId=i,r.lastStreamToken=xt(n),Nt(t).put(r)})},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=xt(e),Nt(t).put(n)})},t.prototype.addMutationBatch=function(t,e,n){var r=this,i=At(t),o=Dt(t);return o.add({}).next(function(t){c("number"==typeof t,"Auto-generated key is not a number");var s=new Fr(t,e,n),a=r.serializer.toDbMutationBatch(r.userId,s);r.documentKeysByBatchId[t]=s.keys();for(var u=[],h=0,l=n;h<l.length;h++){var f=l[h],d=Kr.key(r.userId,f.key.path,t);u.push(o.put(a)),u.push(i.put(d,Kr.PLACEHOLDER))}return Br.waitFor(u).next(function(){return s})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Dt(t).get(e).next(function(t){return t?(c(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?Br.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this;return this.getMutationQueueMetadata(t).next(function(r){var i=Math.max(e,r.lastAcknowledgedBatchId)+1,o=IDBKeyRange.lowerBound([n.userId,i]),s=null;return Dt(t).iterate({index:Wr.userMutationsIndex,range:o},function(t,e,r){e.userId===n.userId&&(c(e.batchId>=i,"Should have found mutation after "+i),s=n.serializer.fromDbMutationBatch(e)),r.done()}).next(function(){return s})})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,Pr],[this.userId,Number.POSITIVE_INFINITY]);return Dt(t).loadAll(Wr.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Kr.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return At(t).iterate({range:i},function(r,i,s){var a=r[0],h=r[1],l=r[2],f=mt(h);return a===n.userId&&e.path.isEqual(f)?Dt(t).get(l).next(function(t){if(!t)throw u("Dangling document-mutation reference found: "+r+" which points to "+l);c(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+l),o.push(n.serializer.fromDbMutationBatch(t))}):void s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Qn(q),i=[];return e.forEach(function(e){var o=Kr.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=At(t).iterate({range:s},function(t,i,o){var s=t[0],a=t[1],u=t[2],c=mt(a);if(s!==n.userId||!e.path.isEqual(c))return void o.done();r=r.add(u)});i.push(a)}),Br.waitFor(i).next(function(){return n.lookupMutationBatches(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;c(!e.isDocumentQuery(),"Document queries shouldn't go down this path");var r=e.path,i=r.length+1,o=Kr.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Qn(q);return At(t).iterate({range:s},function(t,e,o){var s=t[0],u=t[1],c=t[2],h=mt(u);if(s!==n.userId||!r.isPrefixOf(h))return void o.done();h.length===i&&(a=a.add(c))}).next(function(){return n.lookupMutationBatches(t,a)})},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Dt(t).get(e).next(function(t){if(null===t)throw u("Dangling document-mutation reference found, which points to "+e);c(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),Br.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return kt(t.simpleDbTransaction,this.userId,e).next(function(r){return n.removeCachedMutationKeys(e.batchId),Br.forEach(r,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Br.resolve();var r=IDBKeyRange.lowerBound(Kr.prefixForUser(e.userId)),i=[];return At(t).iterate({range:r},function(t,n,r){if(t[0]!==e.userId)return void r.done();var o=mt(t[1]);i.push(o)}).next(function(){c(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.containsKey=function(t,e){return Ct(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return Nt(t).get(this.userId).next(function(t){return t||new $r(e.userId,Pr,"")})},t}(),oi=1;!function(t){t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine"}(Dr||(Dr={}));var si,ai=function(){function t(t,e){this.generatorId=t,c((t&oi)===t,"Generator ID "+t+" contains more than "+oi+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<oi,t},t.prototype.after=function(t){return this.seek(t+(1<<oi)),this.next()},t.prototype.seek=function(t){c((t&oi)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(Dr.QueryCache,2)},t.forSyncEngine=function(){return new t(Dr.SyncEngine)},t}(),ui=function(){function t(t){this.db=t}return t.openOrCreate=function(e,n,r){return c(t.isAvailable(),"IndexedDB not supported in current environment."),o("SimpleDb","Opening database:",e),new Br(function(i,s){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){s(new Ie(Ce.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){s(t.target.error)},a.onupgradeneeded=function(t){o("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,i=new hi(a.transaction);r.createOrUpgrade(n,i,t.oldVersion,5).next(function(){o("SimpleDb","Database upgrade to version 5 complete")})}}).toPromise()},t.delete=function(t){return o("SimpleDb","Removing database:",t),Ot(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===Object({NODE_ENV:"production"}).USE_MOCK_PERSISTENCE;var t=window.navigator.userAgent;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0)},t.getStore=function(t,e){return t.store(e)},t.prototype.runTransaction=function(t,e,n){var r=hi.open(this.db,t,e),i=n(r).catch(function(t){r.abort(t)}).toPromise();return r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),ci=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return Ot(this.dbCursor.delete())},t}(),hi=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new xr,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){e.completionDeferred.reject(t.target.error)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(o("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return c(!!e,"Object store not part of transaction: "+t),new li(e)},t}(),li=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(o("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(o("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ot(n)},t.prototype.add=function(t){return o("SimpleDb","ADD",this.store.name,t,t),Ot(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ot(this.store.get(t)).next(function(n){return void 0===n&&(n=null),o("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return o("SimpleDb","DELETE",this.store.name,t),Ot(this.store.delete(t))},t.prototype.count=function(){return o("SimpleDb","COUNT",this.store.name),Ot(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){o("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new Br(function(n,r){e.onerror=function(t){r(t.target.error)},e.onsuccess=function(e){var r=e.target.result;if(!r)return void n();t(r.primaryKey,r.value).next(function(t){t?r.continue():n()})}})},t.prototype.iterateCursor=function(t,e){var n=[];return new Br(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(!i)return void r();var o=new ci(i),s=e(i.primaryKey,i.value,o);if(s instanceof Br){var a=s.catch(function(t){return o.done(),Br.reject(t)});n.push(a)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}}).next(function(){return Br.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(c(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}(),fi=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=ai.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return xn.fromTimestamp(new Ne(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return Pt(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)})},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.retrieveMetadata(t).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Rt(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return c(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Rt(t).iterate(function(s,a){var u=r.serializer.fromDbTarget(a);u.sequenceNumber<=e&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(t,u)))}).next(function(){return Br.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){var n=this;return Rt(t).iterate(function(t,r){var i=n.serializer.fromDbTarget(r);e(i)})},t.prototype.retrieveMetadata=function(t){return Mt(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return Lt(t).put(Yr.key,e)},t.prototype.saveQueryData=function(t,e){return Rt(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Rt(t).iterate({range:i,index:Gr.queryTargetsIndexName},function(t,r,i){var s=n.serializer.fromDbTarget(r);e.isEqual(s.query)&&(o=s,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Ft(t);return e.forEach(function(e){var s=ft(e.path);i.push(o.put(new Xr(n,s))),i.push(r.referenceDelegate.addReference(t,e))}),Br.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Ft(t);return Br.forEach(e,function(e){var o=ft(e.path);return Br.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Ft(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ft(t),i=ot();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=mt(t[1]),o=new Be(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=ft(e.path),r=IDBKeyRange.bound([n],[$(n)],!1,!0),i=0;return Ft(t).iterate({index:Xr.documentTargetsIndex,keysOnly:!0,range:r},function(t,e,n){var r=t[0];t[1];0!==r&&(i++,n.done())}).next(function(){return i>0})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return Rt(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}(),di="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",pi=function(){function t(t,e){this.serializer=t,this.keepDocumentChangeLog=e,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=ui.getStore(t,Jr.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntries=function(t,e){var n=[];if(e.length>0){for(var r=Bt(t),i=ot(),o=0,s=e;o<s.length;o++){var a=s[o];n.push(r.put(Vt(a.key),this.serializer.toDbRemoteDocument(a))),i=i.add(a.key)}this.keepDocumentChangeLog&&n.push(qt(t).put({changes:this.serializer.toDbResourcePaths(i)}))}return Br.waitFor(n)},t.prototype.removeEntry=function(t,e){return Bt(t).delete(Vt(e))},t.prototype.getEntry=function(t,e){var n=this;return Bt(t).get(Vt(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this,r=rt(),i=e.path.toArray(),o=IDBKeyRange.lowerBound(i);return Bt(t).iterate({range:o},function(t,i,o){var s=n.serializer.fromDbRemoteDocument(i);e.path.isPrefixOf(s.key.path)?s instanceof Ve&&e.matches(s)&&(r=r.insert(s.key,s)):o.done()}).next(function(){return r})},t.prototype.getNewDocumentChanges=function(t){var e=this;c(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=ot(),r=nt(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,s=qt(t);return s.iterate({range:i},function(t,r){if(o&&(o=!1,e._lastProcessedDocumentChangeId+1!==r.id))return e.synchronizeLastDocumentChangeId(s).next(function(){return Br.reject(new Ie(Ce.DATA_LOSS,di))});n=n.unionWith(e.serializer.fromDbResourcePaths(r.changes)),e._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(e.getEntry(t,n).next(function(t){r=r.insert(n,t||new je(n,xn.forDeletedDoc()))}))}),Br.waitFor(i)}).next(function(){return r})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return qt(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var e=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,n,r){e._lastProcessedDocumentChangeId=t,r.done()})},t}(),mi=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=Be.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new je(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var e=Be.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version);return new $e(e,n)}return u("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof Ve){var e=this.remoteSerializer.toDocument(t),n=t.hasCommittedMutations;return new zr(null,null,e,n)}if(t instanceof je){var r=t.key.path.toArray(),i=this.toDbTimestamp(t.version),n=t.hasCommittedMutations;return new zr(null,new Qr(r,i),null,n)}if(t instanceof $e){var r=t.key.path.toArray(),i=this.toDbTimestamp(t.version);return new zr(new Hr(r,i),null,null,!0)}return u("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new Vr(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new Ne(t.seconds,t.nanoseconds);return xn.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new Wr(t,e.batchId,e.localWriteTime.toMillis(),r)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),r=Ne.fromMillis(t.localWriteTimeMs);return new Fr(t.batchId,r,n)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(ft(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=ot(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new Be(mt(i)))}return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=jt(t.query)?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new An(e,t.targetId,Xe.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){c(Xe.Listen===t.purpose,"Only queries with purpose "+Xe.Listen+" may be stored, got "+t.purpose);var e,n=this.toDbTimestamp(t.snapshotVersion);e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query);var r;return t.resumeToken instanceof Uint8Array?(c("YES"===Object({NODE_ENV:"production"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),r=t.resumeToken.toString()):r=t.resumeToken,new Gr(t.targetId,t.query.canonicalId(),n,r,t.sequenceNumber,e)},t}(),vi=function(){function t(t){this.maxElements=t,this.buffer=new Qn($t),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();$t(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),yi=function(){function t(t){this.delegate=t}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getTargetCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Br.resolve(kr.INVALID);var r=new vi(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t}(),gi=function(){function t(){}return t}(),bi="IndexedDbPersistence",wi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_i="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",Si="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",Ti=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return we.__extends(e,t),e}(gi),Ei=function(){function t(e,n,r,i,o,s){if(this.persistenceKey=e,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!t.isAvailable())throw new Ie(Ce.UNIMPLEMENTED,Si);if(this.referenceDelegate=new Ci(this),this.dbName=e+t.MAIN_DATABASE,this.serializer=new mi(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new fi(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new pi(this.serializer,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new Ie(Ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof Ti)return ui.getStore(t.simpleDbTransaction,e);throw u("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e,n,r,i,o){return we.__awaiter(this,void 0,void 0,function(){var s;return we.__generator(this,function(a){switch(a.label){case 0:return s=new t(e,n,r,i,o),[4,s.start()];case 1:return a.sent(),[2,s]}})})},t.createMultiClientIndexedDbPersistence=function(e,n,r,i,o,s){return we.__awaiter(this,void 0,void 0,function(){var a;return we.__generator(this,function(u){switch(u.label){case 0:return a=new t(e,n,r,i,o,s),[4,a.start()];case 1:return u.sent(),[2,a]}})})},t.prototype.start=function(){var t=this;return c(!this.started,"IndexedDbPersistence double-started!"),c(null!==this.window,"Expected 'window' to be defined"),ui.openOrCreate(this.dbName,5,new qr(this.serializer)).then(function(e){t.simpleDb=e}).then(function(){return t.startRemoteDocumentCache()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})}).then(function(){return t.simpleDb.runTransaction("readonly",[Yr.store],function(e){return Pt(e).next(function(e){var n=t.multiClientParams?t.multiClientParams.sequenceNumberSyncer:void 0;t.listenSequence=new kr(e,n)})})}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},t.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction("readonly",ri,function(e){return t.remoteDocumentCache.start(e)})},t.prototype.setPrimaryStateListener=function(t){return this.primaryStateListener=t,t(this.isPrimary)},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return we.__awaiter(e,void 0,void 0,function(){return we.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite",ri,function(e){return Qt(e).put(new Zr(t.clientId,Date.now(),t.networkEnabled,t.inForeground,t.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){return t.canActAsPrimary(e)}).next(function(n){var r=t.isPrimary;return t.isPrimary=n,r!==t.isPrimary&&t.queue.enqueueAndForget(function(){return we.__awaiter(t,void 0,void 0,function(){return we.__generator(this,function(t){return this.started?[2,this.primaryStateListener(this.isPrimary)]:[2]})})}),r&&!t.isPrimary?t.releasePrimaryLeaseIfHeld(e):t.isPrimary?t.acquireOrExtendPrimaryLease(e):void 0})})},t.prototype.removeClientMetadata=function(t){return Qt(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return we.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return we.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=t.getStore(i,Zr.store);return o.loadAll().next(function(t){e=r.filterActiveClients(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return Br.forEach(n,function(t){return o.delete(t.clientId)})}).next(function(){if(e=e.filter(function(t){return t.clientId!==r.clientId}),e.length>0){var t=e.map(function(t){return t.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,t);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(t){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(t.clientId))}),i.label=2;case 2:return[2]}})})},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Ir.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return Kt(t).get(jr.key).next(function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new Ie(Ce.FAILED_PRECONDITION,_i);return!1}}return!(!e.networkEnabled||!e.inForeground)||Qt(t).loadAll().next(function(t){return void 0===e.filterActiveClients(t,5e3).find(function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(t){return e.isPrimary!==t&&o(bi,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(t){return we.__awaiter(this,void 0,void 0,function(){var e=this;return we.__generator(this,function(n){switch(n.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[jr.store,Zr.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return n.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),t?[4,ui.delete(this.dbName)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly",[Zr.store],function(e){return Qt(e).loadAll().next(function(e){return t.filterActiveClients(e,5e3).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return c(this.started,"Cannot initialize MutationQueue before persistence is started."),ii.forUser(t,this.serializer,this.referenceDelegate)},t.prototype.getQueryCache=function(){return c(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return c(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;return o(bi,"Starting transaction:",t),this.simpleDb.runTransaction("readonly"===e?"readonly":"readwrite",ri,function(i){return"readwrite-primary"===e?r.canActAsPrimary(i).next(function(e){if(!e)throw s("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new Ie(Ce.FAILED_PRECONDITION,wi);return n(new Ti(i,r.listenSequence.next()))}).next(function(t){return r.acquireOrExtendPrimaryLease(i).next(function(){return t})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Ti(i,r.listenSequence.next()))})})},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return Kt(t).get(jr.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new Ie(Ce.FAILED_PRECONDITION,_i)})},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new jr(this.clientId,this.allowTabSynchronization,Date.now());return Kt(t).put(jr.key,e)},t.isAvailable=function(){return ui.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this;this.isPrimary=!1;var n=Kt(t);return n.get(jr.key).next(function(t){return e.isLocalClient(t)?(o(bi,"Releasing primary lease."),n.delete(jr.key)):Br.resolve()})},t.prototype.isWithinAge=function(t,e){var n=Date.now(),r=n-e,i=n;return!(t<r)&&(!(t>i)||(s("Detected an update time that is in the future: "+t+" > "+i),!1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(c(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(c("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return o(bi,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return s(bi,"Failed to get zombied client id.",t),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){s("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}(),Ci=function(){function t(t){this.db=t,this.garbageCollector=new yi(this)}return t.prototype.getTargetCount=function(t){return this.db.getQueryCache().getQueryCount(t)},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return Gt(t,e)},t.prototype.removeReference=function(t,e){return Gt(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return Gt(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(t,e).next(function(n){return n?Br.resolve(!0):It(t,e)})},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=[];return this.forEachOrphanedDocument(t,function(o,s){if(s<=e){var a=n.isPinned(t,o).next(function(e){if(!e)return r++,n.removeOrphanedDocument(t,o)});i.push(a)}}).next(function(){return Br.waitFor(i)}).next(function(){return r})},t.prototype.removeOrphanedDocument=function(t,e){return Br.waitFor([Ft(t).delete(Ht(e)),this.db.getRemoteDocumentCache().removeEntry(t,e)])},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Gt(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=Ft(t),i=kr.INVALID;return r.iterate({index:Xr.documentTargetsIndex},function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==kr.INVALID&&e(new Be(mt(n)),i),i=a,n=s):i=kr.INVALID}).next(function(){i!==kr.INVALID&&e(new Be(mt(n)),i)})},t}(),Ii=function(){function t(t,e){this.remoteDocumentCache=t,this.mutationQueue=e}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.getDocumentInternal(t,e,r)})},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++){t=i[r].applyToLocalView(e,t)}return t})},t.prototype.getDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=[],o=nt();return e.forEach(function(e){i.push(n.getDocumentInternal(t,e,r).next(function(t){t||(t=new je(e,xn.forDeletedDoc())),o=o.insert(e,t)}))}),Br.waitFor(i).next(function(){return o})})},t.prototype.getDocumentsMatchingQuery=function(t,e){return Be.isDocumentKey(e.path)?this.getDocumentsMatchingDocumentQuery(t,e.path):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new Be(e)).next(function(t){var e=rt();return t instanceof Ve&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(t){for(var r=0,i=t;r<i.length;r++)for(var o=i[r],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key;if(e.path.isImmediateParentOf(c.path)){var h=n.get(c),l=u.applyToLocalView(h,h,o.localWriteTime);n=l instanceof Ve?n.insert(c,l):n.remove(c)}}}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t}(),ki=function(){function t(){this.refsByKey=new Qn(xi.compareByKey),this.refsByTarget=new Qn(xi.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new xi(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new xi(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=Be.EMPTY,r=new xi(n,t),i=new xi(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=Be.EMPTY,n=new xi(e,t),r=new xi(e,t+1),i=ot();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t,e){var n=new xi(e,0),r=this.refsByKey.firstAfterOrEqual(n);return Br.resolve(null!==r&&e.isEqual(r.key))},t}(),xi=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return Be.comparator(t.key,e.key)||q(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return q(t.targetOrBatchId,e.targetOrBatchId)||Be.comparator(t.key,e.key)},t}(),Di=function(){function t(t){this.remoteDocumentCache=t,this.changes=nt()}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this.assertChanges(),r=n.get(e);return r?Br.resolve(r):this.remoteDocumentCache.getEntry(t,e)},t.prototype.apply=function(t){var e=[];return this.assertChanges().forEach(function(t,n){e.push(n)}),this.changes=null,this.remoteDocumentCache.addEntries(t,e)},t.prototype.assertChanges=function(){return c(null!==this.changes,"Changes have already been applied."),this.changes},t}(),Ai=function(){function t(t,e){this.persistence=t,this.localViewReferences=new ki,this.queryDataByTarget={},c(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Ii(this.remoteDocuments,this.mutationQueue)}return t.prototype.start=function(){var t=this;return this.persistence.runTransaction("Start LocalStore","readonly",function(e){return t.startMutationQueue(e)})},t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.mutationQueue=e.persistence.getMutationQueue(t),e.startMutationQueue(n)}).next(function(){return e.localDocuments=new Ii(e.remoteDocuments,e.mutationQueue),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=[],o=[],s=ot(),a=0,u=r;a<u.length;a++){var c=u[a];i.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var c=p[d];o.push(c.batchId);for(var m=0,v=c.mutations;m<v.length;m++){var f=v[m];s=s.add(f.key)}}return e.localDocuments.getDocuments(n,s).next(function(t){return{affectedDocuments:t,removedBatchIds:i,addedBatchIds:o}})})})},t.prototype.startMutationQueue=function(t){return this.mutationQueue.start(t)},t.prototype.localWrite=function(t){var e=this;return this.persistence.runTransaction("Locally write mutations","readwrite",function(n){var r,i=Ne.now();return e.mutationQueue.addMutationBatch(n,i,t).next(function(t){r=t;var i=r.keys();return e.localDocuments.getDocuments(n,i)}).next(function(t){return{batchId:r.batchId,changes:t}})})},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):Br.resolve(null)})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=t.batch.keys(),i=new Di(e.remoteDocuments);return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,i)}).next(function(){return i.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return c(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},t.prototype.applyRemoteEvent=function(e){var n=this,r=new Di(this.remoteDocuments);return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var s=[],a=ot();p(e.targetChanges,function(r,o){var u=n.queryDataByTarget[r];if(u){o.addedDocuments.forEach(function(t){a=a.add(t)}),o.modifiedDocuments.forEach(function(t){a=a.add(t)}),s.push(n.queryCache.removeMatchingKeys(i,o.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(i,o.addedDocuments,r)}));var c=o.resumeToken;if(c.length>0){var h=u;u=u.copy({resumeToken:c,snapshotVersion:e.snapshotVersion}),n.queryDataByTarget[r]=u,t.shouldPersistQueryData(h,u,o)&&s.push(n.queryCache.updateQueryData(i,u))}}});var u=ot();e.documentUpdates.forEach(function(t,c){u=u.add(t),s.push(r.getEntry(i,t).next(function(e){null==e||c.version.isEqual(xn.MIN)||a.has(c.key)&&!e.hasPendingWrites||c.version.compareTo(e.version)>=0?r.addEntry(c):o("LocalStore","Ignoring outdated watch update for ",t,". Current version:",e.version," Watch version:",c.version)})),e.resolvedLimboDocuments.has(t)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(i,t))});var h=e.snapshotVersion;if(!h.isEqual(xn.MIN)){var l=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(t){return c(h.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+h+" < "+t),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,h)});s.push(l)}return Br.waitFor(s).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getDocuments(i,u)})})},t.shouldPersistQueryData=function(t,e,n){return 0!==e.resumeToken.length&&(0===t.resumeToken.length||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0))},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Br.forEach(t,function(t){return e.localViewReferences.addReferences(t.addedKeys,t.targetId),e.localViewReferences.removeReferences(t.removedKeys,t.targetId),Br.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===t&&(t=Pr),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){return i?(r=i,Br.resolve()):e.queryCache.allocateTargetId(n).next(function(i){return r=new An(t,i,Xe.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r)})}).next(function(){return c(!e.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+t),e.queryDataByTarget[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t,e){var n=this,r=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,function(r){return n.queryCache.getQueryData(r,t).next(function(i){c(null!=i,"Tried to release nonexistent query: "+t);var o=i.targetId,s=n.queryDataByTarget[o],a=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],e?Br.resolve():Br.forEach(a,function(t){return n.persistence.referenceDelegate.removeReference(r,t)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,s)})})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=Br.resolve();return o.forEach(function(r){s=s.next(function(){return n.getEntry(t,r)}).next(function(t){var o=t,s=e.docVersions.get(r);c(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(s)<0)&&(o=i.applyToRemoteDocument(r,o,e),o?n.addEntry(o):c(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))})}),s.next(function(){return r.mutationQueue.removeMutationBatch(t,i)})},t.prototype.getQueryForTarget=function(t){var e=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction("Get query data","readonly",function(n){return e.queryCache.getQueryDataForTarget(n,t).next(function(t){return t?t.query:null})})},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",function(e){return t.remoteDocuments.getNewDocumentChanges(e)})},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Ni=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(s.isEqual(t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return void(this.inner[n]=[[t,e]]);for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){v(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}})},t.prototype.isEmpty=function(){return y(this.inner)},t}(),Oi=function(){function t(t){this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.highestAcknowledgedBatchId=Pr,this.lastStreamToken=h(),this.batchesByDocumentKey=new Qn(xi.compareByKey)}return t.prototype.start=function(t){return c(this.highestAcknowledgedBatchId<this.nextBatchId,"highestAcknowledgedBatchId must be less than the nextBatchId"),Br.resolve()},t.prototype.checkEmpty=function(t){return Br.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId;c(r>this.highestAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order");var i=this.indexOfExistingBatchId(r,"acknowledged"),o=this.mutationQueue[i];return c(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),c(!o.isTombstone(),"Can't acknowledge a previously removed batch"),this.highestAcknowledgedBatchId=r,this.lastStreamToken=n,Br.resolve()},t.prototype.getLastStreamToken=function(t){return Br.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Br.resolve()},t.prototype.addMutationBatch=function(t,e,n){c(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;if(this.nextBatchId++,this.mutationQueue.length>0){c(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order")}var i=new Fr(r,e,n);this.mutationQueue.push(i);for(var o=0,s=n;o<s.length;o++){var a=s[o];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new xi(a.key,r))}return Br.resolve(i)},t.prototype.lookupMutationBatch=function(t,e){return Br.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return c(null!=n,"Failed to find local mutation batch."),Br.resolve(n.isTombstone()?null:n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){for(var n=this.mutationQueue.length,r=Math.max(e,this.highestAcknowledgedBatchId)+1,i=this.indexOfBatchId(r),o=i<0?0:i;o<n;o++){var s=this.mutationQueue[o];if(!s.isTombstone())return Br.resolve(s)}return Br.resolve(null)},t.prototype.getAllMutationBatches=function(t){return Br.resolve(this.getAllLiveMutationBatchesBeforeIndex(this.mutationQueue.length))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new xi(e,0),i=new xi(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){c(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);c(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),Br.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Qn(q);return e.forEach(function(t){var e=new xi(t,0),i=new xi(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],function(e){c(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)})}),Br.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Be.isDocumentKey(i)||(i=i.child(""));var o=new xi(new Be(i),0),s=new Qn(q);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.targetOrBatchId)),!0)},o),Br.resolve(this.findMutationBatches(s))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this,r=this.indexOfExistingBatchId(e.batchId,"removed");if(c(this.mutationQueue[r].batchId===e.batchId,"Removed batches must exist in the queue"),0===r){for(var i=1;i<this.mutationQueue.length;i++){if(!this.mutationQueue[i].isTombstone())break}this.mutationQueue.splice(0,i)}else this.mutationQueue[r]=this.mutationQueue[r].toTombstone();var o=this.batchesByDocumentKey;return Br.forEach(e.mutations,function(r){var i=new xi(r.key,e.batchId);return o=o.delete(i),n.referenceDelegate.removeMutationReference(t,r.key)}).next(function(){n.batchesByDocumentKey=o})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new xi(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Br.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&c(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Br.resolve()},t.prototype.getAllLiveMutationBatchesBeforeIndex=function(t){for(var e=[],n=0;n<t;n++){var r=this.mutationQueue[n];r.isTombstone()||e.push(r)}return e},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return c(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return c(n.batchId===t,"If found batch must match"),n.isTombstone()?null:n},t}(),Ri=function(){function t(t){this.persistence=t,this.queries=new Ni(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=xn.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new ki,this.targetCount=0,this.targetIdGenerator=ai.forQueryCache()}return t.prototype.getTargetCount=function(t){return Br.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach(function(t,n){return e(n)}),Br.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Br.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Br.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,Br.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),Br.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return c(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,Br.resolve()},t.prototype.updateQueryData=function(t,e){return c(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),Br.resolve()},t.prototype.removeQueryData=function(t,e){return c(this.targetCount>0,"Removing a target from an empty cache"),c(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,Br.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.queries.forEach(function(s,a){a.sequenceNumber<=e&&!n[a.targetId]&&(r.queries.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Br.waitFor(o).next(function(){return i})},t.prototype.getQueryCount=function(t){return Br.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return Br.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return u("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),Br.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),Br.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Br.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Br.resolve(n)},t.prototype.containsKey=function(t,e){return this.references.containsKey(t,e)},t}(),Li=function(){function t(){this.docs=nt(),this.newDocumentChanges=ot()}return t.prototype.addEntries=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];this.docs=this.docs.insert(i.key,i),this.newDocumentChanges=this.newDocumentChanges.add(i.key)}return Br.resolve()},t.prototype.removeEntry=function(t,e){return this.docs=this.docs.remove(e),Br.resolve()},t.prototype.getEntry=function(t,e){return Br.resolve(this.docs.get(e))},t.prototype.getDocumentsMatchingQuery=function(t,e){for(var n=rt(),r=new Be(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),s=o.key,a=o.value;if(!e.path.isPrefixOf(s.path))break;a instanceof Ve&&e.matches(a)&&(n=n.insert(a.key,a))}return Br.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return Br.forEach(this.docs,function(t){return e(t.key)})},t.prototype.getNewDocumentChanges=function(t){var e=this,n=nt();return this.newDocumentChanges.forEach(function(t){n=n.insert(t,e.docs.get(t)||new je(t,xn.forDeletedDoc()))}),this.newDocumentChanges=ot(),Br.resolve(n)},t}(),Mi=function(){function t(t,e){this.clientId=t,this.mutationQueues={},this.remoteDocumentCache=new Li,this.listenSequence=new kr(0),this._started=!1,this._started=!0,this.referenceDelegate=e?new Fi(this):new Ui(this),this.queryCache=new Ri(this)}return t.createLruPersistence=function(e){return new t(e,!1)},t.createEagerPersistence=function(e){return new t(e,!0)},t.prototype.shutdown=function(t){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(t){return[2,[this.clientId]]})})},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setNetworkEnabled=function(t){},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Oi(this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;o("MemoryPersistence","Starting transaction:",t);var i=new Pi(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},t.prototype.mutationQueuesContainKey=function(t,e){return Br.or(m(this.mutationQueues).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Pi=function(){function t(t){this.currentSequenceNumber=t}return t}(),Fi=function(){function t(t){this.persistence=t}return t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),Br.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),Br.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),Br.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache();return Br.forEach(this.orphanedDocuments,function(r){return e.isReferenced(t,r).next(function(e){if(!e)return n.removeEntry(t,r)})})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.isReferenced=function(t,e){var n=this;return Br.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return n.inMemoryPins.containsKey(t,e)}])},t}(),Ui=function(){function t(t){this.persistence=t,this.orphanedSequenceNumbers=new Ni(function(t){return ft(t.path)}),this.garbageCollector=new yi(this)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return Br.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getTargetCount=function(t){return this.persistence.getQueryCache().getTargetCount(t)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.orphanedSequenceNumbers.forEach(function(t,n){return e(n)}),Br.resolve()},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(t,function(o){return n.isPinned(t,o,e).next(function(e){return e?Br.resolve():(r++,i.removeEntry(t,o))})}).next(function(){return r})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Br.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Br.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Br.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Br.resolve()},t.prototype.isPinned=function(t,e,n){var r=this;return Br.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return r.inMemoryPins.containsKey(t,e)},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return Br.resolve(void 0!==t&&t>n)}])},t}(),Bi=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&o("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}();!function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff"}(si||(si={}));var qi,Vi=1e3,ji=6e4,$i=1.5,Wi=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=si.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Bi(t,e,Vi,$i,ji)}return t.prototype.isStarted=function(){return this.state===si.Starting||this.state===si.Open||this.state===si.Backoff},t.prototype.isOpen=function(){return this.state===si.Open},t.prototype.start=function(){if(this.state===si.Error)return void this.performBackoff();c(this.state===si.Initial,"Already started"),this.auth()},t.prototype.stop=function(){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(si.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){c(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=si.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(t){return this.isOpen()?[2,this.close(si.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(n){switch(n.label){case 0:return c(this.isStarted(),"Only started streams should be closed."),c(t===si.Error||z(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==si.Error?this.backoff.reset():e&&e.code===Ce.RESOURCE_EXHAUSTED?(s(e.toString()),s("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===Ce.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;c(this.state===si.Initial,"Must be in initial state to auth"),this.state=si.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new Ie(Ce.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)})})},t.prototype.startStream=function(t){var e=this;c(this.state===si.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return c(e.state===si.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=si.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;c(this.state===si.Error,"Should only perform backoff when in Error state"),this.state=si.Backoff,this.backoff.backoffAndRun(function(){return we.__awaiter(t,void 0,void 0,function(){return we.__generator(this,function(t){return c(this.state===si.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=si.Initial,this.start(),c(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return c(this.isStarted(),"Can't handle server close on non-started stream"),o("PersistentStream","close with error: "+t),this.stream=null,this.close(si.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(o("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Ki=function(t){function e(e,n,r,i,o){var s=t.call(this,e,Ir.ListenStreamConnectionBackoff,Ir.ListenStreamIdle,n,r,o)||this;return s.serializer=i,s}return we.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(Wi),Qi=function(t){function e(e,n,r,i,o){var s=t.call(this,e,Ir.WriteStreamConnectionBackoff,Ir.WriteStreamIdle,n,r,o)||this;return s.serializer=i,s.handshakeComplete_=!1,s}return we.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(c(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return c(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){c(this.isOpen(),"Writing handshake requires an opened stream"),c(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;c(this.isOpen(),"Writing mutations requires an opened stream"),c(this.handshakeComplete_,"Handshake must be complete before writing mutations"),c(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(Wi),Hi=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new Qi(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new Ki(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=nt();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);c(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(t,e,r)}).catch(function(t){throw t.code===Ce.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(t,e,r)}).catch(function(t){throw t.code===Ce.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t}(),zi=function(){function t(t){this.datastore=t,this.readVersions=it(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e;if(t instanceof Ve)e=t.version;else{if(!(t instanceof je))throw u("Document in a transaction was a "+t.constructor.name);e=xn.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new Ie(Ce.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){t instanceof je||t instanceof Ve?e.recordVersion(t):u("Document in a transaction was a "+t.constructor.name)}),t})},t.prototype.write=function(t){if(this.committed)throw new Ie(Ce.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?Mn.updateTime(e):Mn.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(xn.forDeletedDoc()))throw new Ie(Ce.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?Mn.updateTime(e):Mn.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new qn(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,xn.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline"}(qi||(qi={}));var Gi;!function(t){t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState"}(Gi||(Gi={}));var Xi,Yi=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=qi.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(qi.Unknown),c(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Ir.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,c(t.state===qi.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(qi.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===qi.Online?(this.setAndBroadcast(qi.Unknown),c(0===this.watchStreamFailures,"watchStreamFailures must be 0"),c(null===this.onlineStateTimer,"onlineStateTimer must be null")):++this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(qi.Offline))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===qi.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(s(e),this.shouldWarnClientIsOffline=!1):o("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),Ji=function(){function t(t,e,n,r){this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new Yi(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return we.__awaiter(this,void 0,void 0,function(){var t;return we.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(qi.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(qi.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(o("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(t){switch(t.label){case 0:return o("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(qi.Unknown),[2]}})})},t.prototype.listen=function(t){c(!f(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){c(f(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),y(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(qi.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){c(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new cr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!y(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return we.__awaiter(this,void 0,void 0,function(){var t=this;return we.__generator(this,function(e){return p(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(e){return void 0===t&&c(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(qi.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return we.__awaiter(this,void 0,void 0,function(){var n;return we.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(qi.Online),t instanceof ar&&t.state===tr.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof or?this.watchChangeAggregator.handleDocumentChange(t):t instanceof sr?this.watchChangeAggregator.handleExistenceFilter(t):(c(t instanceof ar,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(xn.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;c(!t.isEqual(xn.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return p(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:t}))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.copy({resumeToken:h()}),e.sendUnwatchRequest(t);var r=new An(n.query,t,Xe.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;c(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return we.__awaiter(e,void 0,void 0,function(){return we.__generator(this,function(e){return f(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.fillWritePipeline=function(){return we.__awaiter(this,void 0,void 0,function(){var t,e;return we.__generator(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(t=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:Pr,[4,this.localStore.nextMutationBatch(t)]):[3,4];case 1:return null!==(e=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){c(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){c(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++){var r=n[e];t.writeStream.writeMutations(r.mutations)}}).catch(function(e){return t.ignoreIfPrimaryLeaseLoss(e)})},t.prototype.ignoreIfPrimaryLeaseLoss=function(t){if(!Wt(t))throw t;o("RemoteStore","Unexpectedly lost primary lease")},t.prototype.onMutationResult=function(t,e){var n=this;c(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Ur.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return we.__awaiter(this,void 0,void 0,function(){var e,n=this;return we.__generator(this,function(r){return void 0===t&&c(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?(e=void 0,e=this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t),[2,e.then(function(){n.shouldStartWriteStream()&&n.startWriteStream()})]):[2]})})},t.prototype.handleHandshakeError=function(t){return we.__awaiter(this,void 0,void 0,function(){var e=this;return we.__generator(this,function(n){return Y(t.code)||t.code===Ce.ABORTED?(o("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=h(),[2,this.localStore.setLastStreamToken(h()).catch(function(t){return e.ignoreIfPrimaryLeaseLoss(t)})]):[2]})})},t.prototype.handleWriteError=function(t){return we.__awaiter(this,void 0,void 0,function(){var e,n=this;return we.__generator(this,function(r){return Y(t.code)?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2]})})},t.prototype.createTransaction=function(){return new zi(this.datastore)},t.prototype.handleCredentialChange=function(){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(o("RemoteStore","RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return t.sent(),this.onlineStateTracker.set(qi.Unknown),[4,this.enableNetwork()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.applyPrimaryState=function(t){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(qi.Unknown),e.label=4;case 4:return[2]}})})},t}(),Zi=function(){function t(){this.listeners=[]}return t}(),to=function(){function t(t){this.syncEngine=t,this.queries=new Ni(function(t){return t.canonicalId()}),this.onlineState=qi.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new Zi,this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return we.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return we.__generator(this,function(o){return e=t.query,n=!1,r=this.queries.get(e),r&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=r.query,o=this.queries.get(i);if(o){for(var s=0,a=o.listeners;s<a.length;s++){a[s].onViewSnapshot(r)}o.viewSnap=r}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++){var o=i[r];o.onError(e)}this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++){i[r].applyOnlineStateChange(t)}})},t}(),eo=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=qi.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(c(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Kn.Metadata&&e.push(i)}t=new nr(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){if(c(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==qi.Offline;return this.options.waitForSyncWhenOnline&&n?(c(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===qi.Offline},t.prototype.shouldRaiseEvent=function(t){if(t.docChanges.length>0)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){c(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=nr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),no=function(){function t(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e,n){for(var r=ot(),i=ot(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case Kn.Added:r=r.add(a.doc.key);break;case Kn.Removed:i=i.add(a.doc.key)}}return new t(e,r,i)},t}(),ro=function(){function t(t){this.key=t}return t}(),io=function(){function t(t){this.key=t}return t}(),oo=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=ot(),this.mutatedKeys=ot(),this.documentSet=new Jn(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new er,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var h=i.get(t),l=e instanceof Ve?e:null;l&&(c(t.isEqual(l.key),"Mismatching keys found in document changes: "+t+" != "+l.key),l=n.query.matches(l)?l:null);var f=!!h&&n.mutatedKeys.has(h.key),d=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),p=!1;if(h&&l){h.data.isEqual(l.data)?f!==d&&(r.track({type:Kn.Metadata,doc:l}),p=!0):n.shouldWaitForSyncedDocument(h,l)||(r.track({type:Kn.Modified,doc:l}),p=!0,u&&n.query.docComparator(l,u)>0&&(a=!0))}else!h&&l?(r.track({type:Kn.Added,doc:l}),p=!0):h&&!l&&(r.track({type:Kn.Removed,doc:h}),p=!0,u&&(a=!0));p&&(l?(s=s.add(l),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),this.query.hasLimit())for(;s.size>this.query.limit;){var h=s.last();s=s.delete(h.key),o=o.delete(h.key),r.track({type:Kn.Removed,doc:h})}return c(!a||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;c(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return Xt(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var s=e?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current,u=a?Zn.Synced:Zn.Local,h=u!==this.syncState;if(this.syncState=u,0!==o.length||h){return{snapshot:new nr(this.query,t.documentSet,i,o,t.mutatedKeys,u===Zn.Local,h,!1),limboChanges:s}}return{limboChanges:s}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===qi.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new er,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&(!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations)},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return c(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=ot(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new io(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new ro(t))}),n},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=ot();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return nr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Zn.Local)},t}(),so=function(){function t(t,e,n){this.query=t,this.targetId=e,this.view=n}return t}(),ao=function(){function t(t){this.key=t}return t}(),uo=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Ni(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new We(Be.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new ki,this.mutationUserCallbacks={},this.limboTargetIdGenerator=ai.forSyncEngine(),this.isPrimary=void 0,this.onlineState=qi.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){c(null!==t,"SyncEngine listener cannot be null"),c(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return we.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return we.__generator(this,function(s){switch(s.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(e=r.targetId,this.sharedClientState.addLocalQueryTarget(e),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return i=s.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=s.sent(),this.isPrimary&&this.remoteStore.listen(i),s.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(t,e){var n=this,r=t.query;return this.localStore.executeQuery(r).then(function(i){return n.localStore.remoteDocumentKeys(t.targetId).then(function(o){var s=new oo(r,o),a=s.computeDocChanges(i),u=ir.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&n.onlineState!==qi.Offline),h=s.applyChanges(a,!0===n.isPrimary,u);c(0===h.limboChanges.length,"View returned limbo docs before target ack from the server."),c(!!h.snapshot,"applyChanges for new view should always return a snapshot");var l=new so(r,t.targetId,s);return n.queryViewsByQuery.set(r,l),n.queryViewsByTarget[t.targetId]=l,h.snapshot})})},t.prototype.synchronizeViewAndComputeSnapshot=function(t){var e=this;return this.localStore.executeQuery(t.query).then(function(n){return e.localStore.remoteDocumentKeys(t.targetId).then(function(r){return we.__awaiter(e,void 0,void 0,function(){var e;return we.__generator(this,function(i){switch(i.label){case 0:return e=t.view.synchronizeWithPersistedState(n,r),this.isPrimary?[4,this.updateTrackedLimbos(t.targetId,e.limboChanges)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2,e]}})})})})},t.prototype.unlisten=function(t){return we.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return we.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),(e=this.queryViewsByQuery.get(t),c(!!e,"Trying to unlisten on query not found:"+t),this.isPrimary)?(this.sharedClientState.removeLocalQueryTarget(e.targetId),n=this.sharedClientState.isActiveQueryTarget(e.targetId),n?[3,2]:[4,this.localStore.releaseQuery(t,!1).then(function(){return r.sharedClientState.clearQueryState(e.targetId),r.remoteStore.unlisten(e.targetId),r.removeAndCleanupQuery(e)}).catch(function(t){return r.ignoreIfPrimaryLeaseLoss(t)})]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,6];case 3:return[4,this.removeAndCleanupQuery(e)];case 4:return i.sent(),[4,this.localStore.releaseQuery(t,!0)];case 5:i.sent(),i.label=6;case 6:return[2]}})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.sharedClientState.addPendingMutation(t.batchId),n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),c(e>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var e=t(r);return!z(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(t){return Promise.reject(n.wrapUpdateFunctionError(t))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===e?Promise.reject(r):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(t).then(function(n){return v(t.targetChanges,function(t,n){var r=e.limboResolutionsByTarget[t];r&&(c(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),n.addedDocuments.size>0?r.receivedDocument=!0:n.modifiedDocuments.size>0?c(r.receivedDocument,"Received change for limbo target document without add."):n.removedDocuments.size>0&&(c(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),e.emitNewSnapsAndNotifyLocalStore(n,t)}).catch(function(t){return e.ignoreIfPrimaryLeaseLoss(t)})},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===Gi.RemoteStore||!this.isPrimary&&e===Gi.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(e,r){var i=r.view.applyOnlineStateChange(t);c(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return we.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,a,u=this;return we.__generator(this,function(h){switch(h.label){case 0:return this.assertSubscribed("rejectListens()"),(this.sharedClientState.updateQueryState(t,"rejected",e),n=this.limboResolutionsByTarget[t],r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=new We(Be.comparator),i=i.insert(r,new je(r,xn.forDeletedDoc())),o=ot().add(r),s=new rr(xn.MIN,{},new Qn(q),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return a=this.queryViewsByTarget[t],c(!!a,"Unknown targetId: "+t),[4,this.localStore.releaseQuery(a.query,!1).then(function(){return u.removeAndCleanupQuery(a)}).catch(function(t){return u.ignoreIfPrimaryLeaseLoss(t)})];case 2:h.sent(),this.syncEngineListener.onWatchError(a.query,e),h.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(t,e,n){return we.__awaiter(this,void 0,void 0,function(){var r;return we.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return r=i.sent(),null===r?(o("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):u("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){var e=this;this.assertSubscribed("applySuccessfulWrite()");var n=t.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.sharedClientState.updateMutationState(n,"acknowledged"),e.emitNewSnapsAndNotifyLocalStore(t)}).catch(function(t){return e.ignoreIfPrimaryLeaseLoss(t)})},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(r){return n.sharedClientState.updateMutationState(t,"rejected",e),n.emitNewSnapsAndNotifyLocalStore(r)}).catch(function(t){return n.ignoreIfPrimaryLeaseLoss(t)})},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new We(q)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(c(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){return we.__awaiter(this,void 0,void 0,function(){var e,n=this;return we.__generator(this,function(r){switch(r.label){case 0:return this.sharedClientState.removeLocalQueryTarget(t.targetId),(this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary)?(e=this.limboDocumentRefs.referencesForId(t.targetId),this.limboDocumentRefs.removeReferencesForId(t.targetId),[4,Br.forEach(e,function(t){return n.limboDocumentRefs.containsKey(null,t).next(function(e){e||n.removeLimboTarget(t)})}).toPromise()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){return we.__awaiter(this,void 0,void 0,function(){var n,r,i,s,a,c=this;return we.__generator(this,function(h){switch(h.label){case 0:n=function(e){return we.__generator(this,function(n){switch(n.label){case 0:return e instanceof ro?(r.limboDocumentRefs.addReference(e.key,t),r.trackLimboChange(e),[3,4]):[3,1];case 1:return e instanceof io?(o("SyncEngine","Document no longer in limbo: "+e.key),r.limboDocumentRefs.removeReference(e.key,t),[4,r.limboDocumentRefs.containsKey(null,e.key).next(function(t){t||c.removeLimboTarget(e.key)}).toPromise()]):[3,3];case 2:return n.sent(),[3,4];case 3:u("Unknown limbo change: "+JSON.stringify(e)),n.label=4;case 4:return[2]}})},r=this,i=0,s=e,h.label=1;case 1:return i<s.length?(a=s[i],[5,n(a)]):[3,4];case 2:h.sent(),h.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){o("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=yn.atPath(e.path);this.limboResolutionsByTarget[n]=new ao(e),this.remoteStore.listen(new An(r,n,Xe.LimboResolution,kr.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return we.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return we.__generator(this,function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(s,a){i.push(Promise.resolve().then(function(){var e=a.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(a.query).then(function(t){return a.view.computeDocChanges(t,e)}):e}).then(function(t){var i=e&&e.targetChanges[a.targetId],s=a.view.applyChanges(t,!0===o.isPrimary,i);return o.updateTrackedLimbos(a.targetId,s.limboChanges).then(function(){if(s.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(a.targetId,s.snapshot.fromCache?"not-current":"current"),n.push(s.snapshot);var t=no.fromSnapshot(a.targetId,s.snapshot);r.push(t)}})}))}),[4,Promise.all(i)];case 1:return s.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return s.sent(),[2]}})})},t.prototype.ignoreIfPrimaryLeaseLoss=function(t){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(e){if(!Wt(t))throw t;return o("SyncEngine","Unexpectedly lost primary lease"),[2]})})},t.prototype.assertSubscribed=function(t){c(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return we.__awaiter(this,void 0,void 0,function(){var e,n;return we.__generator(this,function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?[4,this.localStore.handleUserChange(t)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},t.prototype.applyPrimaryState=function(t){return we.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u=this;return we.__generator(this,function(c){switch(c.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],a=Promise.resolve(),p(this.queryViewsByTarget,function(t,e){u.sharedClientState.isLocalQueryTarget(t)?s.push(t):a=a.then(function(){return u.unlisten(e.query)}),u.remoteStore.unlisten(e.targetId)}),[4,a]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var t=this;p(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new We(Be.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){for(var e=this,n=Promise.resolve(),r=[],i=[],o=0,s=t;o<s.length;o++){var a=s[o];!function(t){n=n.then(function(){return we.__awaiter(e,void 0,void 0,function(){var e,n,o,s;return we.__generator(this,function(a){switch(a.label){case 0:return n=this.queryViewsByTarget[t],n?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return a.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return e=a.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return o=a.sent(),o.snapshot&&i.push(o.snapshot),[3,8];case 4:return c(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(t)];case 5:return s=a.sent(),c(!!s,"Query data for target "+t+" not found"),[4,this.localStore.allocateQuery(s)];case 6:return e=a.sent(),[4,this.initializeViewAndComputeSnapshot(e,!1)];case 7:a.sent(),a.label=8;case 8:return r.push(e),[2]}})})})}(a)}return n.then(function(){return e.syncEngineListener.onWatchChange(i),r})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return we.__awaiter(this,void 0,void 0,function(){var r,i,s=this;return we.__generator(this,function(a){switch(a.label){case 0:if(this.isPrimary)return o("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,6];switch(r=e){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,5];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return we.__awaiter(s,void 0,void 0,function(){var r;return we.__generator(this,function(i){switch(i.label){case 0:return r=rr.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(n,r)];case 1:return i.sent(),[2]}})})},function(t){return we.__awaiter(s,void 0,void 0,function(){var e;return we.__generator(this,function(n){switch(n.label){case 0:return Ut(t)?(e=[],p(this.queryViewsByTarget,function(t){return e.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e)]):[3,2];case 1:return n.sent(),[3,3];case 2:throw t;case 3:return[2]}})})})];case 2:return i=this.queryViewsByTarget[t],[4,this.removeAndCleanupQuery(i)];case 3:return a.sent(),[4,this.localStore.releaseQuery(i.query,!0)];case 4:return a.sent(),this.syncEngineListener.onWatchError(i.query,n),[3,6];case 5:u("Unexpected target state: "+e),a.label=6;case 6:return[2]}})})},t.prototype.applyActiveTargetsChange=function(t,e){return we.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,a,u,h,l,i,f=this;return we.__generator(this,function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,d.label=1;case 1:return n<r.length?(i=r[n],c(!this.queryViewsByTarget[i],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(i)]):[3,6];case 2:return o=d.sent(),c(!!o,"Query data for active target "+i+" not found"),[4,this.localStore.allocateQuery(o)];case 3:return s=d.sent(),[4,this.initializeViewAndComputeSnapshot(s,!1)];case 4:d.sent(),this.remoteStore.listen(s),d.label=5;case 5:return n++,[3,1];case 6:a=function(t){var e;return we.__generator(this,function(n){switch(n.label){case 0:return e=u.queryViewsByTarget[t],e?[4,u.localStore.releaseQuery(e.query,!1).then(function(){return f.remoteStore.unlisten(t),f.removeAndCleanupQuery(e)}).catch(function(t){return f.ignoreIfPrimaryLeaseLoss(t)})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,h=0,l=e,d.label=7;case 7:return h<l.length?(i=l[h],[5,a(i)]):[3,10];case 8:d.sent(),d.label=9;case 9:return h++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?ot().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:ot()},t}(),co=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),ho="SharedClientState",lo="firestore_clients",fo="firestore_mutations",po="firestore_targets",mo="firestore_online_state",vo="firestore_sequence_number",yo=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,c(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new Ie(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(s(ho,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),go=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,c(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Ie(r.error.code,r.error.message)),i?new t(e,r.state,o):(s(ho,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),bo=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=st(),a=0;i&&a<r.activeTargetIds.length;++a)i=G(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(s(ho,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),wo=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&void 0!==qi[n.onlineState]&&"string"==typeof n.clientId?new t(n.clientId,qi[n.onlineState]):(s(ho,"Failed to parse online state: "+e),null)},t}(),_o=function(){function t(){this.activeTargetIds=st()}return t.prototype.addQueryTarget=function(t){c(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),So=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new Ie(Ce.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=vo+"_"+r,this.activeClients[this.localClientId]=new _o,this.clientStateKeyRe=new RegExp("^"+lo+"_"+s+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+fo+"_"+s+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+po+"_"+s+"_(\\d+)$"),this.onlineStateKey=mo+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return we.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,h,l,f=this;return we.__generator(this,function(d){switch(d.label){case 0:return c(!this.started,"WebStorageSharedClientState already started"),c(null!==this.syncEngine,"syncEngine property must be set before calling start()"),c(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=d.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=bo.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),s=this.storage.getItem(this.onlineStateKey),s&&(a=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(a),u=0,h=this.earlyEvents;u<h.length;u++)l=h[u],this.handleWebStorageEvent(l);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=st();return v(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=go.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return o(ho,"READ",t,e),e},t.prototype.setItem=function(t,e){o(ho,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){o(ho,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(o(ho,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void s("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return we.__awaiter(e,void 0,void 0,function(){var e,n,r,i,o,s;return we.__generator(this,function(a){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(c(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=Yt(t.newValue))!==kr.INVALID&&this.sequenceNumberHandler(s));return[2]})})})}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new yo(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:qi[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new go(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return c(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),lo+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return po+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=fo+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return c(null!==n,"Cannot parse client state key '"+t+"'"),bo.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);c(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return yo.fromWebStorageEntry(new co(i),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);c(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return go.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return wo.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(o(ho,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach(function(t){return we.__awaiter(n,void 0,void 0,function(){return we.__generator(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return we.__awaiter(n,void 0,void 0,function(){return we.__generator(this,function(e){return i.has(t)||s.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,s)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}(),To=function(){function t(){this.localState=new _o,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new _o,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Eo=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=ke.newId()}return t.prototype.start=function(t){var e=this,n=new xr,r=new xr,i=!1;return this.credentials.setChangeListener(function(o){i?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(i=!0,e.initializePersistence(t,r,o).then(function(){return e.initializeRest(o)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t.enabled?this.startIndexedDbPersistence(n,t).then(e.resolve).catch(function(t){return e.reject(t),r.canFallback(t)?(console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),r.startMemoryPersistence()):Promise.reject(t)}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof Ie?t.code===Ce.FAILED_PRECONDITION||t.code===Ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||(22===t.code||20===t.code)},t.prototype.startIndexedDbPersistence=function(t,e){var n=this;c(e.enabled,"Should only start IndexedDb persitence with offline persistence enabled.");var r=Ei.buildStoragePrefix(this.databaseInfo),i=new dr(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return we.__awaiter(n,void 0,void 0,function(){var n,o;return we.__generator(this,function(s){switch(s.label){case 0:if(e.experimentalTabSynchronization&&!So.isAvailable(this.platform))throw new Ie(Ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return e.experimentalTabSynchronization?(this.sharedClientState=new So(this.asyncQueue,this.platform,r,this.clientId,t),n=this,[4,Ei.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n.persistence=s.sent(),[3,4];case 2:return this.sharedClientState=new To,o=this,[4,Ei.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i)];case 3:o.persistence=s.sent(),s.label=4;case 4:return[2]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=Mi.createEagerPersistence(this.clientId),this.sharedClientState=new To,Promise.resolve()},t.prototype.initializeRest=function(t){var e=this;return o("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(n){return we.__awaiter(e,void 0,void 0,function(){var e,r,i,o,s=this;return we.__generator(this,function(a){switch(a.label){case 0:return this.localStore=new Ai(this.persistence,t),e=this.platform.newSerializer(this.databaseInfo.databaseId),r=new Hi(this.asyncQueue,n,this.credentials,e),i=function(t){return s.syncEngine.applyOnlineStateChange(t,Gi.RemoteStore)},o=function(t){return s.syncEngine.applyOnlineStateChange(t,Gi.SharedClientState)},this.remoteStore=new Ji(this.localStore,r,this.asyncQueue,i),this.syncEngine=new uo(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=o,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new to(this.syncEngine),[4,this.localStore.start()];case 1:return a.sent(),[4,this.sharedClientState.start()];case 2:return a.sent(),[4,this.remoteStore.start()];case 3:return a.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return s.syncEngine.applyPrimaryState(t)})];case 4:return a.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),o("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.shutdown=function(t){var e=this;return this.asyncQueue.enqueue(function(){return we.__awaiter(e,void 0,void 0,function(){return we.__generator(this,function(e){switch(e.label){case 0:return[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown(t&&t.purgePersistenceWithDataLoss)];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},t.prototype.listen=function(t,e,n){var r=this,i=new eo(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof Ve)return t;if(t instanceof je)return null;throw new Ie(Ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(t)}).then(function(e){var n=ot(),r=new oo(t,n),i=r.computeDocChanges(e);return r.applyChanges(i,!1).snapshot})},t.prototype.write=function(t){var e=this,n=new xr;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.asyncQueue.enqueue(function(){return we.__awaiter(e,void 0,void 0,function(){return we.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),Co=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Io=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];S("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(T("FieldPath","string",n,t[n]),0===t[n].length)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ue(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw F("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(Ue.keyField().canonicalString()),t}(),ko=new RegExp("[~\\*/\\[\\]]"),xo=function(){function t(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}return t}(),Do=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){c(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(co.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){c(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Ao=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;c(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new Ie(Ce.ABORTED,"getToken aborted due to token change.");return n?(c("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new xo(n.accessToken,t.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){c(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){c(null!=this.tokenListener,"removeChangeListener() called twice"),c(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return c(null===t||"string"==typeof t,"Received invalid UID: "+t),new co(t)},t}(),No=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=co.FIRST_PARTY,c(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),t}(),Oo=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,c(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return t.prototype.getToken=function(){return Promise.resolve(new No(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(co.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}(),Ro=function(){function t(t){this._methodName=t}return t.delete=function(){return Lo.instance},t.serverTimestamp=function(){return Mo.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w("FieldValue.arrayUnion",arguments,1),new Po(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w("FieldValue.arrayRemove",arguments,1),new Fo(t)},t.prototype.isEqual=function(t){return this===t},t}(),Lo=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return we.__extends(e,t),e.instance=new e,e}(Ro),Mo=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return we.__extends(e,t),e.instance=new e,e}(Ro),Po=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return we.__extends(e,t),e}(Ro),Fo=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return we.__extends(e,t),e}(Ro),Uo=l(Ro,"Use FieldValue.<field>() instead."),Bo=/^__.*__$/,qo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new Un(t,this.data,this.fieldMask,e)):n.push(new Fn(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Bn(t,this.fieldTransforms)),n},t}(),Vo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new Un(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new Bn(t,this.fieldTransforms)),n},t}();!function(t){t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument"}(Xi||(Xi={}));var jo=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Ie(Ce.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(ne(this.dataSource)&&Bo.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),$o=function(){function t(t,e){this.databaseId=t,this.key=e}return t}(),Wo=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new jo(Xi.Set,t,Ue.EMPTY_PATH);ie("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new qo(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new jo(Xi.MergeSet,t,Ue.EMPTY_PATH);ie("Data must be an object, but it was:",r,e);var i,o,s=this.parseData(e,r);if(n){for(var a=[],c=0,h=n;c<h.length;c++){var l=h[c],f=void 0;if(l instanceof Io)f=l._internalPath;else{if("string"!=typeof l)throw u("Expected stringOrFieldPath to be a string or a FieldPath");f=se(t,l)}if(!r.contains(f))throw new Ie(Ce.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");a.push(f)}i=new Nn(a),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=new Nn(r.fieldMask),o=r.fieldTransforms;return new qo(s,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new jo(Xi.Update,t,Ue.EMPTY_PATH);ie("Data must be an object, but it was:",r,e);var i=[],o=ln.EMPTY;v(e,function(e,s){var a=se(t,e),u=r.childContextForFieldPath(a);if((s=n.runPreConverter(s,u))instanceof Lo)i.push(a);else{var c=n.parseData(s,u);null!=c&&(i.push(a),o=o.set(a,c))}});var s=new Nn(i);return new Vo(o,s,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new jo(Xi.Update,t,Ue.EMPTY_PATH),o=[oe(t,e)],s=[n];if(r.length%2!=0)throw new Ie(Ce.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(oe(t,r[a])),s.push(r[a+1]);for(var u=[],c=ln.EMPTY,a=0;a<o.length;++a){var h=o[a],l=i.childContextForFieldPath(h),f=this.runPreConverter(s[a],l);if(f instanceof Lo)u.push(h);else{var d=this.parseData(f,l);null!=d&&(u.push(h),c=c.set(h,d))}}var p=new Nn(u);return new Vo(c,p,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new jo(Xi.Argument,t,Ue.EMPTY_PATH),r=this.parseData(e,n);return c(null!=r,"Parsed data should not be null."),c(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=ae(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(t=this.runPreConverter(t,e),re(t))return ie("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof Ro)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new We(q);return y(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):v(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new ln(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=o[i],a=this.parseData(s,e.childContextForArray(r));null==a&&(a=Ze.INSTANCE),n.push(a),r++}return new fn(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!ne(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof Lo){if(e.dataSource!==Xi.MergeSet)throw e.dataSource===Xi.Update?(c(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof Mo)e.fieldTransforms.push(new On(e.path,Vn.instance));else if(t instanceof Po){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new jn(n);e.fieldTransforms.push(new On(e.path,r))}else if(t instanceof Fo){var n=this.parseArrayTransformElements(t._methodName,t._elements),i=new $n(n);e.fieldTransforms.push(new On(e.path,i))}else u("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return Ze.INSTANCE;if("number"==typeof t)return G(t)?new nn(t):new rn(t);if("boolean"==typeof t)return tn.of(t);if("string"==typeof t)return new on(t);if(t instanceof Date)return new sn(Ne.fromDate(t));if(t instanceof Ne)return new sn(new Ne(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Ae)return new hn(t);if(t instanceof xe)return new un(t);if(t instanceof $o)return new cn(t.databaseId,t.key);throw e.createError("Unsupported field value: "+R(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new jo(Xi.Argument,t,Ue.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},t}(),Ko="firestore.googleapis.com",Qo=!0,Ho=!1,zo=!1,Go=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new Ie(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ko,this.ssl=Qo}else C("settings","non-empty string","host",t.host),this.host=t.host,I("settings","boolean","ssl",t.ssl),this.ssl=d(t.ssl,Qo);P("settings",t,["host","ssl","credentials","timestampsInSnapshots"]),I("settings","object","credentials",t.credentials),this.credentials=t.credentials,I("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),this.timestampsInSnapshots=d(t.timestampsInSnapshots,Ho)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials},t}(),Xo=function(){function t(){}return t}(),Yo=function(){function t(t,e){this.enabled=t,c(t||!e,"Can only provide PersistenceSettings with persistence enabled"),e=e||{},this.experimentalTabSynchronization=d(e.experimentalTabSynchronization,zo)}return t.prototype.isEqual=function(t){return this.enabled===t.enabled&&this.experimentalTabSynchronization===t.experimentalTabSynchronization},t}(),Jo=function(){function t(e){var n=this;this._queue=new Nr,this.INTERNAL={delete:function(t){return we.__awaiter(n,void 0,void 0,function(){return we.__generator(this,function(e){return this._firestoreClient?[2,this._firestoreClient.shutdown(t)]:[2]})})}};var r=new Xo;if("object"==typeof e.options){var i=e;r.firebaseApp=i,r.databaseId=t.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new Ao(i)}else{var o=e;if(!o.projectId)throw new Ie(Ce.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new Le(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new Do}r.settings=new Go({}),this._config=r,this._databaseId=r.databaseId}return t.prototype.settings=function(t){if(b("Firestore.settings",arguments,1),T("Firestore.settings","object",1,t),f(t,"persistence"))throw new Ie(Ce.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Go(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new Ie(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=Zt(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new Ie(Ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new Yo(!0,t))},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Yo(!1)),this._firestoreClient},t.prototype.configureClient=function(t){var e=this;c(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),this._config.settings.timestampsInSnapshots||s("\nThe behavior for Date objects stored in Firestore is going to change\nAND YOUR APP MAY BREAK.\nTo hide this warning and ensure your app does not break, you need to add the\nfollowing code to your app before calling any other Cloud Firestore methods:\n\n  const firestore = firebase.firestore();\n  const settings = {/* your settings... */ timestampsInSnapshots: true};\n  firestore.settings(settings);\n\nWith this change, timestamps stored in Cloud Firestore will be read back as\nFirebase Timestamp objects instead of as system Date objects. So you will also\nneed to update code expecting a Date to instead expect a Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at');\n  const date = timestamp.toDate();\n\nPlease audit all existing usages of Date when you enable the new behavior. In a\nfuture release, the behavior will change to the new behavior, so if you do not\nfollow these steps, YOUR APP MAY BREAK."),c(!this._firestoreClient,"configureClient() called multiple times");var n=new Oe(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl),r=function(t){if(t instanceof es){var n=e._config.databaseId,r=t.firestore._config.databaseId;if(!r.isEqual(n))throw new Ie(Ce.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new $o(e._config.databaseId,t._key)}return t};return this._dataConverter=new Wo(r),this._firestoreClient=new Eo(Ee.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!f(e,"projectId"))throw new Ie(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new Ie(Ce.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Le(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new Ie(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(b("Firestore.collection",arguments,1),T("Firestore.collection","non-empty string",1,t),!t)throw new Ie(Ce.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new as(Pe.fromString(t),this)},t.prototype.doc=function(t){if(b("Firestore.doc",arguments,1),T("Firestore.doc","non-empty string",1,t),!t)throw new Ie(Ce.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),es.forPath(Pe.fromString(t),this)},t.prototype.runTransaction=function(t){var e=this;return b("Firestore.runTransaction",arguments,1),T("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new Zo(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new ts(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(r()){case ye.DEBUG:return"debug";case ye.ERROR:return"error";case ye.SILENT:return"silent";default:return u("Unknown log level: "+r())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(b("Firestore.setLogLevel",arguments,1),T("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":i(ye.DEBUG);break;case"error":i(ye.ERROR);break;case"silent":i(ye.SILENT);break;default:throw new Ie(Ce.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},t}(),Zo=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;b("Transaction.get",arguments,1);var n=fe("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return u("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof je)return new rs(e._firestore,n._key,null,!1,!1);if(r instanceof Ve)return new rs(e._firestore,n._key,r,!1,!1);throw u("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},t.prototype.set=function(t,e,n){_("Transaction.set",arguments,2,3);var r=fe("Transaction.set",t,this._firestore);n=ce("Transaction.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s;return"string"==typeof e||e instanceof Io?(w("Transaction.update",arguments,3),o=fe("Transaction.update",t,this._firestore),s=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,r)):(b("Transaction.update",arguments,2),o=fe("Transaction.update",t,this._firestore),s=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(o._key,s),this},t.prototype.delete=function(t){b("Transaction.delete",arguments,1);var e=fe("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),ts=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){_("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=fe("WriteBatch.set",t,this._firestore);n=ce("WriteBatch.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,Mn.NONE)),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.verifyNotCommitted();var o,s;return"string"==typeof e||e instanceof Io?(w("WriteBatch.update",arguments,3),o=fe("WriteBatch.update",t,this._firestore),s=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,r)):(b("WriteBatch.update",arguments,2),o=fe("WriteBatch.update",t,this._firestore),s=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(s.toMutations(o._key,Mn.exists(!0))),this},t.prototype.delete=function(t){b("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=fe("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new qn(e._key,Mn.NONE)),this},t.prototype.commit=function(){return we.__awaiter(this,void 0,void 0,function(){return we.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new Ie(Ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),es=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new Be(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new as(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(b("DocumentReference.collection",arguments,1),T("DocumentReference.collection","non-empty string",1,t),!t)throw new Ie(Ce.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Pe.fromString(t);return new as(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw F("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){_("DocumentReference.set",arguments,1,2),e=ce("DocumentReference.set",e);var n=e.merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,Mn.NONE))},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i;return"string"==typeof t||t instanceof Io?(w("DocumentReference.update",arguments,2),i=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,n)):(b("DocumentReference.update",arguments,1),i=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(i.toMutations(this._key,Mn.exists(!0)))},t.prototype.delete=function(){return b("DocumentReference.delete",arguments,0),this._firestoreClient.write([new qn(this._key,Mn.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];_("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||te(t[i])||(r=t[i],P("DocumentReference.onSnapshot",r,["includeMetadataChanges"]),I("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return te(t[i])?n=t[i]:(T("DocumentReference.onSnapshot","function",i,t[i]),E("DocumentReference.onSnapshot","function",i+1,t[i+1]),E("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Co({next:function(t){if(e.next){c(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new rs(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(yn.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return _("DocumentReference.get",arguments,0,1),le("DocumentReference.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new rs(e.firestore,e._key,t,!0,t instanceof Ve&&t.hasLocalMutations))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new Ie(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new Ie(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t}(),ns=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),rs=function(){function t(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return t.prototype.data=function(t){return _("DocumentSnapshot.data",arguments,0,1),t=he("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,Ye.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(_("DocumentSnapshot.get",arguments,1,2),e=he("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(oe("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,Ye.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new es(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new ns(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw F("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof ln)return this.convertObject(t,e);if(t instanceof fn)return this.convertArray(t,e);if(t instanceof cn){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||s("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new es(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),is=function(t){function e(e,n,r,i,o){return t.call(this,e,n,r,i,o)||this}return we.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return c("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(rs),os=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){b("Query.where",arguments,3),T("Query.where","non-empty string",2,n),M("Query.where",3,r);var i,o=oe("Query.where",e),s=bn.fromString(n);if(o.isKeyField()){if(s===bn.ARRAY_CONTAINS)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof r){if(-1!==r.indexOf("/"))throw new Ie(Ce.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===r)throw new Ie(Ce.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var a=this._query.path.child(new Pe([r]));c(a.length%2==0,"Path should be a document key"),i=new cn(this.firestore._databaseId,new Be(a))}else{if(!(r instanceof es))throw new Ie(Ce.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+R(r)+".");var u=r;i=new cn(this.firestore._databaseId,u._key)}}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var h=gn.create(o,s,i);return this.validateNewFilter(h),new t(this._query.addFilter(h),this.firestore)},t.prototype.orderBy=function(e,n){_("Query.orderBy",arguments,1,2),E("Query.orderBy","non-empty string",2,n);var r;if(void 0===n||"asc"===n)r=Tn.ASCENDING;else{if("desc"!==n)throw new Ie(Ce.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Tn.DESCENDING}if(null!==this._query.startAt)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=oe("Query.orderBy",e),o=new Cn(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(b("Query.limit",arguments,1),T("Query.limit","number",1,e),e<=0)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];w("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];w("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];w("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];w("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw F("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(M(t,1,e),e instanceof rs){if(n.length>0)throw new Ie(Ce.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new Ie(Ce.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var s=o[i];if(s.field.isKeyField())r.push(new cn(this.firestore._databaseId,e.key));else{var a=e.field(s.field);if(void 0===a){var u=s.field.canonicalString();throw new Ie(Ce.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new En(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new Ie(Ce.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.isKeyField()){if("string"!=typeof s)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(-1!==s.indexOf("/"))throw new Ie(Ce.INVALID_ARGUMENT,"Invalid query. Document ID '"+s+"' contains a slash in "+t+"()");var a=new Be(this._query.path.child(s));i.push(new cn(this.firestore._databaseId,a))}else{var u=this.firestore._dataConverter.parseQueryValue(t,s);i.push(u)}}return new En(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];_("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||te(t[i])||(r=t[i],P("Query.onSnapshot",r,["includeMetadataChanges"]),I("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),te(t[i])?n=t[i]:(T("Query.onSnapshot","function",i,t[i]),E("Query.onSnapshot","function",i+1,t[i+1]),E("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Co({next:function(t){e.next&&e.next(new ss(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(s)}},t.prototype.get=function(t){var e=this;return _("Query.get",arguments,0,1),le("Query.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new ss(e.firestore,e._query,t))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new Ie(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.validateNewFilter=function(t){if(t instanceof wn)if(t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new Ie(Ce.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}else if(t.op===bn.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new Ie(Ce.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new Ie(Ce.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),ss=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new ns(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;_("QuerySnapshot.forEach",arguments,1,2),T("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new os(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(P("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),I("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new Ie(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=de(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw F("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new is(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(ss.prototype.docChanges,t,{get:function(){return ue()}})}catch(t){}});var as=function(t){function e(e,n){var r=t.call(this,yn.atPath(e),n)||this;if(e.length%2!=1)throw new Ie(Ce.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return we.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new es(new Be(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(_("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=ke.newId()),T("CollectionReference.doc","non-empty string",1,t),""===t)throw new Ie(Ce.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=Pe.fromString(t);return es.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){b("CollectionReference.add",arguments,1),T("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(os),us=l(Jo,"Use firebase.firestore() instead."),cs=l(Zo,"Use firebase.firestore().runTransaction() instead."),hs=l(ts,"Use firebase.firestore().batch() instead."),ls=l(es,"Use firebase.firestore().doc() instead."),fs=l(rs),ds=l(is),ps=l(os),ms=l(ss),vs=l(as,"Use firebase.firestore().collection() instead."),ys={Firestore:us,GeoPoint:Ae,Timestamp:Ne,Blob:De,Transaction:cs,WriteBatch:hs,DocumentReference:ls,DocumentSnapshot:fs,Query:ps,QueryDocumentSnapshot:ds,QuerySnapshot:ms,CollectionReference:vs,FieldPath:Io,FieldValue:Uo,setLogLevel:Jo.setLogLevel};ve(ge),e.registerFirestore=ve},function(t,e,n){"use strict";function r(t){o.forEach(function(e){e.logLevel=t})}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"setLogLevel",function(){return r}),n.d(e,"Logger",function(){return u}),n.d(e,"LogLevel",function(){return i});var i,o=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(i||(i={}));var s=i.INFO,a=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case i.DEBUG:case i.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},u=function(){function t(t){this.name=t,this._logLevel=s,this._logHandler=a,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.ERROR].concat(t))},t}()},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),function(global){function l(t){return"string"==typeof t}function m(t,e){t=t.split("."),e=e||h;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function aa(){}function ba(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function n(t){return"array"==ba(t)}function ca(t){var e=ba(t);return"array"==e||"object"==e&&"number"==typeof t.length}function q(t){return"function"==ba(t)}function r(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function ea(t,e,n){return t.call.apply(t.bind,arguments)}function fa(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function u(t,e,n){return u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ea:fa,u.apply(null,arguments)}function v(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function x(t,e){function n(){}n.prototype=e.prototype,t.L=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.sh=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function y(t){if(Error.captureStackTrace)Error.captureStackTrace(this,y);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function ha(t,e){t=t.split("%s");for(var n="",r=t.length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");y.call(this,n+t[r])}function ia(t,e){throw new ha("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function z(){0!=ja&&(ka[this[t]||(this[t]=++da)]=this),this.Ka=this.Ka,this.Qa=this.Qa}function pa(t){t:{for(var e=qa,n=t.length,r=l(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:l(t)?t.charAt(e):t[e]}function ra(t){if(!n(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0}function sa(t,e){e=la(t,e);var n;return(n=0<=e)&&Array.prototype.splice.call(t,e,1),n}function ta(t){return Array.prototype.concat.apply([],arguments)}function ua(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function va(t){return/^[\s\xa0]*$/.test(t)}function xa(t,e){return t<e?-1:t>e?1:0}function B(t){return-1!=A.indexOf(t)}function Aa(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ba(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function Ca(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}function Da(t){var e,n={};for(e in t)n[e]=t[e];return n}function Fa(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<Ea.length;o++)n=Ea[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ga(t){return Ga[" "](t),t}function Ha(t,e){var n=Ia;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}function Oa(){var t=h.document;return t?t.documentMode:void 0}function Ta(t){return Ha(t,function(){for(var e=0,n=wa(String(Pa)).split("."),r=wa(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=xa(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||xa(0==s[2].length,0==a[2].length)||xa(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}function D(t,e){this.type=t,this.currentTarget=this.target=e,this.defaultPrevented=this.Ea=!1,this.Ee=!0}function E(t,e){D.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.gb=null,t&&this.Of(t,e)}function F(t){return!(!t||!t[ab])}function cb(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Pb=i,this.key=++bb,this.Sa=this.Fb=!1}function db(t){this.src=t,this.J={},this.yb=0}function eb(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Sa&&o.listener==e&&o.capture==!!n&&o.Pb==r)return i}return-1}function ib(t,e,i,o,s){if(o&&o.once)return jb(t,e,i,o,s);if(n(e)){for(var a=0;a<e.length;a++)ib(t,e[a],i,o,s);return null}return i=kb(i),F(t)?t.ob(e,i,r(o)?!!o.capture:!!o,s):lb(t,e,i,!1,o,s)}function lb(t,e,n,i,o,s){if(!e)throw Error("Invalid event type");var a=r(o)?!!o.capture:!!o,u=G(t);if(u||(t[fb]=u=new db(t)),n=u.add(e,n,i,a,s),n.proxy)return n;if(i=mb(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Za||(o=a),void 0===o&&(o=!1),t.addEventListener(e.toString(),i,o);else if(t.attachEvent)t.attachEvent(nb(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function mb(){var t=ob,e=Xa?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}function jb(t,e,i,o,s){if(n(e)){for(var a=0;a<e.length;a++)jb(t,e[a],i,o,s);return null}return i=kb(i),F(t)?t.Qc(e,i,r(o)?!!o.capture:!!o,s):lb(t,e,i,!0,o,s)}function pb(t,e,i,o,s){if(n(e))for(var a=0;a<e.length;a++)pb(t,e[a],i,o,s);else o=r(o)?!!o.capture:!!o,i=kb(i),F(t)?t.hd(e,i,o,s):t&&(t=G(t))&&(e=t.kb(e,i,o,s))&&qb(e)}function qb(t){if("number"!=typeof t&&t&&!t.Sa){var e=t.src;if(F(e))e.Pe(t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(nb(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=G(e))?(n.Be(t),0==n.yb&&(n.src=null,e[fb]=null)):t.Wb()}}}function nb(t){return t in gb?gb[t]:gb[t]="on"+t}function rb(t,e,n,r){var i=!0;if((t=G(t))&&(e=t.J[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.Sa&&(o=sb(o,r),i=i&&!1!==o)}return i}function sb(t,e){var n=t.listener,r=t.Pb||t.src;return t.Fb&&qb(t),n.call(r,e)}function ob(t,e){if(t.Sa)return!0;if(!Xa){var n=e||m("window.event");e=new E(n,this);var r=!0;if(!(0>n.keyCode||void 0!=n.returnValue)){t:{var i=!1;if(0==n.keyCode)try{n.keyCode=-1;break t}catch(t){i=!0}(i||void 0==n.returnValue)&&(n.returnValue=!0)}for(n=[],i=e.currentTarget;i;i=i.parentNode)n.push(i);for(t=t.type,i=n.length-1;!e.Ea&&0<=i;i--){e.currentTarget=n[i];var o=rb(n[i],t,!0,e);r=r&&o}for(i=0;!e.Ea&&i<n.length;i++)e.currentTarget=n[i],o=rb(n[i],t,!1,e),r=r&&o}return r}return sb(t,new E(e,this))}function G(t){return t=t[fb],t instanceof db?t:null}function kb(t){return q(t)?t:(t[tb]||(t[tb]=function(e){return t.handleEvent(e)}),t[tb])}function H(){z.call(this),this.ka=new db(this),this.Te=this,this.Wc=null}function ub(t){return!/^\s*$/.test(t)&&/^[\],:{}\s\u2028\u2029]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))}function vb(a){if(a=String(a),ub(a))try{return eval("("+a+")")}catch(t){}throw Error("Invalid JSON string: "+a)}function I(){this.Ta=void 0}function yb(t,e){this.Wf=100,this.jf=t,this.xg=e,this.$b=0,this.Qb=null}function J(){this.nc=this.Wa=null}function zb(){this.next=this.scope=this.Ic=null}function Bb(t){h.setTimeout(function(){throw t},0)}function Db(){var t=h.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!B("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=u(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!B("Trident")&&!B("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.ud;n.ud=null,t()}},function(t){r.next={ud:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){h.setTimeout(t,0)}}function Fb(){if(h.Promise&&h.Promise.resolve){var t=h.Promise.resolve(void 0);Eb=function(){t.then(Gb)}}else Eb=function(){var t=Gb;!q(h.setImmediate)||h.Window&&h.Window.prototype&&!B("Edge")&&h.Window.prototype.setImmediate==h.setImmediate?(Cb||(Cb=Db()),Cb(t)):h.setImmediate(t)}}function Gb(){for(var t;t=Ib.remove();){try{t.Ic.call(t.scope)}catch(t){Bb(t)}Ib.zg(t)}Hb=!1}function Jb(t,e){H.call(this),this.Na=t||1,this.xb=e||h,this.qd=u(this.Xg,this),this.le=w()}function Kb(t,e,n){if(q(t))n&&(t=u(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=u(t.handleEvent,t)}return 2147483647<Number(e)?-1:h.setTimeout(t,e||0)}function Lb(t,e,n){z.call(this),this.Yf=null!=n?u(t,n):t,this.Na=e,this.af=u(this.jg,this),this.sc=[]}function Mb(t){z.call(this),this.i=t,this.o={}}function K(t,e,n){this.reset(t,e,n,void 0,void 0)}function Pb(t){this.se=t,this.be=this.wc=this.nb=this.ac=null}function L(t,e){this.name=t,this.value=e}function Yb(t){Xb||(Xb=new Pb(""),Wb[""]=Xb,Xb.Ke(Tb));var e;if(!(e=Wb[t])){e=new Pb(t);var n=t.lastIndexOf("."),r=t.substr(n+1);n=Yb(t.substr(0,n)),n.Ue(r,e),e.Lg(n),Wb[t]=e}return e}function Zb(t,e){t&&t.info(e,void 0)}function M(t,e){t&&t.qf(e)}function $b(){this.s=Yb("goog.labs.net.webChannel.WebChannelDebug"),this.Yc=!0}function ac(t){D.call(this,"serverreachability",t)}function O(t){N.dispatchEvent(new ac(N,t))}function bc(t,e){D.call(this,"statevent",t),this.stat=e}function P(t){N.dispatchEvent(new bc(N,t))}function cc(t,e,n){D.call(this,"timingevent",t),this.size=e,this.rtt=n}function dc(t,e,n){N.dispatchEvent(new cc(N,t,e,n))}function Q(t,e){if(!q(t))throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){t()},e)}function gc(){}function hc(){}function jc(){D.call(this,"d")}function kc(){D.call(this,"c")}function mc(){}function R(t,e,n,r,i){this.b=t,this.a=e,this.ra=n,this.R=r,this.Zc=i||1,this.Hc=new Mb(this),this.Va=nc,t=La?125:void 0,this.Xc=new Jb(t),this.A=null,this.S=!1,this.Da=this.pa=this.ua=this.kc=this.rb=this.ld=this.Ga=null,this.ba=[],this.h=null,this.Cb=0,this.I=this.Fa=null,this.w=-1,this.$a=!1,this.Ra=0,this.bc=null,this.mb=this.Hd=this.Ac=!1}function oc(t,e){switch(t){case 0:return"Non-200 return code ("+e+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}function rc(t){if(t.H&&"function"==typeof t.H)return t.H();if(l(t))return t.split("");if(ca(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}return Ba(t)}function sc(t,e,n){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,n);else if(ca(t)||l(t))na(t,e,n);else{if(t.W&&"function"==typeof t.W)var r=t.W();else if(t.H&&"function"==typeof t.H)r=void 0;else if(ca(t)||l(t)){r=[];for(var i=t.length,o=0;o<i;o++)r.push(o)}else r=Ca(t);i=rc(t),o=i.length;for(var s=0;s<o;s++)e.call(n,i[s],r&&r[s],t)}}function S(t,e){this.D={},this.o=[],this.j=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else t&&this.addAll(t)}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function uc(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function U(t,e){this.xa=this.Ab=this.qa="",this.Ca=null,this.jb=this.K="",this.O=this.Uf=!1;var n;t instanceof U?(this.O=void 0!==e?e:t.O,this.ub(t.qa),this.fd(t.Ab),this.sb(t.xa),this.tb(t.Ca),this.gc(t.K),this.ed(t.P.clone()),this.cd(t.jb)):t&&(n=String(t).match(tc))?(this.O=!!e,this.ub(n[1]||"",!0),this.fd(n[2]||"",!0),this.sb(n[3]||"",!0),this.tb(n[4]),this.gc(n[5]||"",!0),this.ed(n[6]||"",!0),this.cd(n[7]||"",!0)):(this.O=!!e,this.P=new vc(null,this.O))}function Ec(t){return t instanceof U?t.clone():new U(t,void 0)}function Fc(t,e,n,r){var i=new U(null,void 0);return t&&i.ub(t),e&&i.sb(e),n&&i.tb(n),r&&i.gc(r),i}function Cc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function wc(t,e,n){return l(t)?(t=encodeURI(t).replace(e,Gc),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Gc(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}function vc(t,e){this.j=this.m=null,this.ja=t||null,this.O=!!e}function Jc(){}function Kc(){}function Lc(t,e){this.b=t,this.a=e,this.f=this.A=null,this.cc=!1,this.K=null,this.w=-1,this.Dd=this.na=null}function Mc(){this.rd=this.ce=null}function Nc(t){this.D=new S,t&&this.addAll(t)}function Oc(e){var n=typeof e;return"object"==n&&e||"function"==n?"o"+(e[t]||(e[t]=++da)):n.substr(0,1)+e}function Pc(t,e){this.Rc=t,this.map=e,this.context=null}function Qc(t){this.pe=t||Rc,h.PerformanceNavigationTiming?(t=h.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(h.xc&&h.xc.ne&&h.xc.ne()&&h.xc.ne().th),this.Yb=t?this.pe:1,this.v=null,1<this.Yb&&(this.v=new Nc),this.f=null,this.ba=[]}function Sc(){this.Ag=this.Ta=void 0}function Tc(){this.ng=new Sc}function Uc(t,e){var n=new $b;n.debug("TestLoadImage: loading "+t);var r=new Image;r.onload=v(Vc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=v(Vc,n,r,"TestLoadImage: error",!1,e),r.onabort=v(Vc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=v(Vc,n,r,"TestLoadImage: timeout",!1,e),h.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}function Vc(t,e,n,r,i){try{t.debug(n),e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(e){t.eb(e)}}function V(t){H.call(this),this.headers=new S,this.Ya=t||null,this.ha=!1,this.oc=this.c=null,this.je=this.Ub="",this.Pa=0,this.I="",this.Aa=this.Nc=this.Rb=this.Gc=!1,this.wb=0,this.jc=null,this.De=Wc,this.lc=this.pg=this.Bb=!1}function Zc(t){return C&&Ta(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function qa(t){return"content-type"==t.toLowerCase()}function $c(t,e){return{type:e,lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total}}function ad(t){var e="";return Aa(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function bd(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=ad(n),l(t)){if(e=encodeURIComponent(String(e)),n=null!=n?"="+encodeURIComponent(String(n)):"",e+=n){if(n=t.indexOf("#"),0>n&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);t=[t.substr(0,r),i,t.substr(n)],n=t[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return t.l(e,n),t}function cd(t){this.Ed=22,this.He=0,this.M=[],this.a=new $b,this.Jb=new Mc,this.na=this.pd=this.ib=this.K=this.u=this.Mc=this.aa=this.hb=this.N=this.Sb=this.A=null,this.Xe=!0,this.eg=this.Zb=0,this.pf=!!m("internalChannelParams.failFast",t),this.jd=this.Ja=this.wa=this.ia=this.ea=this.i=null,this.We=!0,this.w=this.ke=this.Tb=-1,this.tc=this.Ha=this.La=0,this.Ze=m("internalChannelParams.baseRetryDelayMs",t)||5e3,this.yg=m("internalChannelParams.retryDelaySeedMs",t)||1e4,this.sf=m("internalChannelParams.forwardChannelMaxRetries",t)||2,this.Rd=m("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ya=t&&t.uh||void 0,this.Eb=void 0,this.Ra=0,this.ic=t&&t.supportsCrossDomainXhr||!1,this.ra="",this.G=new Qc(t&&t.concurrentRequestLimit),this.mc=new Tc,this.ta=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.Qd=t&&t.fastHandshake||!1)&&!this.ta&&(this.a.T("Force backgroundChannelTest when fastHandshake is enabled."),this.ta=!0),t&&t.Ld&&this.a.Ld()}function dd(){}function ed(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r=arguments[n];if(0==r.lastIndexOf("/",0))e=r;else{var i;(i=""==e)||(i=e.length-1,i=0<=i&&e.indexOf("/",i)==i),e=i?e+r:e+"/"+r}}return e}function fd(){if(C&&!(10<=Number(Ua)))throw Error("Environmental error: no available transport.")}function W(t,e){H.call(this),this.b=new cd(e),this.zb=t,this.Wg=e&&e.testUrl?e.testUrl:ed(this.zb,"test"),this.s=Yb("goog.labs.net.webChannel.WebChannelBaseTransport"),this.Tc=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.b.ga(t),t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Cd&&(t?t["X-WebChannel-Client-Profile"]=e.Cd:t={"X-WebChannel-Client-Profile":e.Cd}),this.b.Kg(t),(t=e&&e.httpHeadersOverwriteParam)&&!va(t)&&this.b.Ig(t),this.Ug=e&&e.supportsCrossDomainXhr||!1,this.Cg=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!va(e)&&(this.b.Jg(e),null!==(t=this.Tc)&&e in t&&(t=this.Tc,e in t&&delete t[e],(t=this.s)&&t.T("Ignore httpSessionIdParam also specified with messageUrlParams: "+e,void 0))),this.yd=new X(this)}function gd(t){jc.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.qe=t)&&(t=this.qe,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function hd(t){kc.call(this),this.status=1,this.errorCode=t}function X(t){this.b=t}function jd(){this.V=[],this.Z=[]}function kd(t,e){if(z.call(this),this.re=t||0,this.Xb=e||10,this.re>this.Xb)throw Error(ld);this.fa=new jd,this.oa=new Nc,this.Cc=0,this.Pc=null,this.Db()}function md(t,e){this.ie=t,this.kd=e}function nd(t){this.Y=[],t&&this.Pf(t)}function od(){nd.call(this)}function Y(t,e){this.Jd=void 0,this.dc=new od,kd.call(this,t,e)}function Z(t,e,n,r){this.Nf=t,this.Bb=!!r,Y.call(this,e,n)}__webpack_require__.d(__webpack_exports__,"createWebChannelTransport",function(){return src_1}),__webpack_require__.d(__webpack_exports__,"ErrorCode",function(){return src_2}),__webpack_require__.d(__webpack_exports__,"EventType",function(){return src_3}),__webpack_require__.d(__webpack_exports__,"WebChannel",function(){return src_4}),__webpack_require__.d(__webpack_exports__,"XhrIoPool",function(){return src_5});var commonjsGlobal="undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{},e,goog=goog||{},h=commonjsGlobal,t="closure_uid_"+(1e9*Math.random()>>>0),da=0,w=Date.now||function(){return+new Date};x(y,Error),y.prototype.name="CustomError",x(ha,y),ha.prototype.name="AssertionError";var ja=0,ka={};z.prototype.Ka=!1,z.prototype.cb=function(){if(!this.Ka&&(this.Ka=!0,this.F(),0!=ja)){var e=this[t]||(this[t]=++da);if(0!=ja&&this.Qa&&0<this.Qa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ka[e]}},z.prototype.F=function(){if(this.Qa)for(;this.Qa.length;)this.Qa.shift()()};var la=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(l(t))return l(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ma=Array.prototype.lastIndexOf?function(t,e){return Array.prototype.lastIndexOf.call(t,e,t.length-1)}:function(t,e){var n=t.length-1;if(0>n&&(n=Math.max(0,t.length+n)),l(t))return l(e)&&1==e.length?t.lastIndexOf(e,n):-1;for(;0<=n;n--)if(n in t&&t[n]===e)return n;return-1},na=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=l(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},oa=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=l(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1},wa=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},A;t:{var ya=h.navigator;if(ya){var za=ya.userAgent;if(za){A=za;break t}}A=""}var Ea="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");Ga[" "]=aa;var Ja=B("Opera"),C=B("Trident")||B("MSIE"),Ka=B("Edge"),La=Ka||C,Ma=B("Gecko")&&!(-1!=A.toLowerCase().indexOf("webkit")&&!B("Edge"))&&!(B("Trident")||B("MSIE"))&&!B("Edge"),Na=-1!=A.toLowerCase().indexOf("webkit")&&!B("Edge"),Pa;t:{var Qa="",Ra=function(){var t=A;return Ma?/rv:([^\);]+)(\)|;)/.exec(t):Ka?/Edge\/([\d\.]+)/.exec(t):C?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Na?/WebKit\/(\S+)/.exec(t):Ja?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Ra&&(Qa=Ra?Ra[1]:""),C){var Sa=Oa();if(null!=Sa&&Sa>parseFloat(Qa)){Pa=String(Sa);break t}}Pa=Qa}var Ia={},Ua,Va=h.document;Ua=Va&&C?Oa()||("CSS1Compat"==Va.compatMode?parseInt(Pa,10):5):void 0;var Wa=Object.freeze||function(t){return t},Xa=!C||9<=Number(Ua),Ya=C&&!Ta("9"),Za=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{h.addEventListener("test",aa,e),h.removeEventListener("test",aa,e)}catch(t){}return t}();D.prototype.stopPropagation=function(){this.Ea=!0},D.prototype.preventDefault=function(){this.defaultPrevented=!0,this.Ee=!1},x(E,D);var $a=Wa({2:"touch",3:"pen",4:"mouse"});E.prototype.Of=function(t,e){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.currentTarget=e,e=t.relatedTarget){if(Ma){t:{try{Ga(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.offsetX=Na||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=Na||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.keyCode=t.keyCode||0,this.key=t.key||"",this.charCode=t.charCode||("keypress"==n?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=l(t.pointerType)?t.pointerType:$a[t.pointerType]||"",this.state=t.state,this.gb=t,t.defaultPrevented&&this.preventDefault()},E.prototype.stopPropagation=function(){E.L.stopPropagation.call(this),this.gb.stopPropagation?this.gb.stopPropagation():this.gb.cancelBubble=!0},E.prototype.preventDefault=function(){E.L.preventDefault.call(this);var t=this.gb;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ya)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ab="closure_listenable_"+(1e6*Math.random()|0),bb=0;cb.prototype.Wb=function(){this.Sa=!0,this.Pb=this.src=this.proxy=this.listener=null},e=db.prototype,e.add=function(t,e,n,r,i){var o=t.toString();(t=this.J[o])||(t=this.J[o]=[],this.yb++);var s=eb(t,e,r,i);return-1<s?(e=t[s],n||(e.Fb=!1)):(e=new cb(e,this.src,o,!!r,i),e.Fb=n,t.push(e)),e},e.remove=function(t,e,n,r){if(!((t=t.toString())in this.J))return!1;var i=this.J[t];return-1<(e=eb(i,e,n,r))&&(i[e].Wb(),Array.prototype.splice.call(i,e,1),0==i.length&&(delete this.J[t],this.yb--),!0)},e.Be=function(t){var e=t.type;e in this.J&&sa(this.J[e],t)&&(t.Wb(),0==this.J[e].length&&(delete this.J[e],this.yb--))},e.qb=function(t){t=t&&t.toString();var e;for(e in this.J)if(!t||e==t){for(var n=this.J[e],r=0;r<n.length;r++)n[r].Wb();delete this.J[e],this.yb--}},e.kb=function(t,e,n,r){t=this.J[t.toString()];var i=-1;return t&&(i=eb(t,e,n,r)),-1<i?t[i]:null};var fb="closure_lm_"+(1e6*Math.random()|0),gb={},tb="__closure_events_fn_"+(1e9*Math.random()>>>0);x(H,z),H.prototype[ab]=!0,e=H.prototype,e.addEventListener=function(t,e,n,r){ib(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){pb(this,t,e,n,r)},e.dispatchEvent=function(t){var e,n=this.Wc;if(n)for(e=[];n;n=n.Wc)e.push(n);n=this.Te;var r=t.type||t;if(l(t))t=new D(t,n);else if(t instanceof D)t.target=t.target||n;else{var i=t;t=new D(r,n),Fa(t,i)}if(i=!0,e)for(var o=e.length-1;!t.Ea&&0<=o;o--){var s=t.currentTarget=e[o];i=s.Mb(r,!0,t)&&i}if(t.Ea||(s=t.currentTarget=n,i=s.Mb(r,!0,t)&&i,t.Ea||(i=s.Mb(r,!1,t)&&i)),e)for(o=0;!t.Ea&&o<e.length;o++)s=t.currentTarget=e[o],i=s.Mb(r,!1,t)&&i;return i},e.F=function(){H.L.F.call(this),this.tg(),this.Wc=null},e.ob=function(t,e,n,r){return this.ka.add(String(t),e,!1,n,r)},e.Qc=function(t,e,n,r){return this.ka.add(String(t),e,!0,n,r)},e.hd=function(t,e,n,r){this.ka.remove(String(t),e,n,r)},e.Pe=function(t){this.ka.Be(t)},e.tg=function(){this.ka&&this.ka.qb(void 0)},e.Mb=function(t,e,n){if(!(t=this.ka.J[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.Sa&&o.capture==e){var s=o.listener,a=o.Pb||o.src;o.Fb&&this.Pe(o),r=!1!==s.call(a,n)&&r}}return r&&0!=n.Ee},e.kb=function(t,e,n,r){return this.ka.kb(String(t),e,n,r)},I.prototype.ec=function(t){var e=[];return this.bd(t,e),e.join("")},I.prototype.bd=function(t,e){if(null==t)e.push("null");else{if("object"==typeof t){if(n(t))return void this.Dg(t,e);if(!(t instanceof String||t instanceof Number||t instanceof Boolean))return void this.Fg(t,e);t=t.valueOf()}switch(typeof t){case"string":this.Ge(t,e);break;case"number":this.Eg(t,e);break;case"boolean":e.push(String(t));break;case"function":e.push("null");break;default:throw Error("Unknown type: "+typeof t)}}};var wb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},xb=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;I.prototype.Ge=function(t,e){e.push('"',t.replace(xb,function(t){var e=wb[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),wb[t]=e),e}),'"')},I.prototype.Eg=function(t,e){e.push(isFinite(t)&&!isNaN(t)?String(t):"null")},I.prototype.Dg=function(t,e){var n=t.length;e.push("[");for(var r="",i=0;i<n;i++)e.push(r),r=t[i],this.bd(this.Ta?this.Ta.call(t,String(i),r):r,e),r=",";e.push("]")},I.prototype.Fg=function(t,e){e.push("{");var n,r="";for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];"function"!=typeof i&&(e.push(r),this.Ge(n,e),e.push(":"),this.bd(this.Ta?this.Ta.call(t,n,i):i,e),r=",")}e.push("}")},yb.prototype.get=function(){if(0<this.$b){this.$b--;var t=this.Qb;this.Qb=t.next,t.next=null}else t=this.jf();return t},yb.prototype.put=function(t){this.xg(t),this.$b<this.Wf&&(this.$b++,t.next=this.Qb,this.Qb=t)};var Ab=new yb(function(){return new zb},function(t){t.reset()});J.prototype.add=function(t,e){var n=this.Ef();n.set(t,e),this.nc?this.nc.next=n:this.Wa=n,this.nc=n},J.prototype.remove=function(){var t=null;return this.Wa&&(t=this.Wa,this.Wa=this.Wa.next,this.Wa||(this.nc=null),t.next=null),t},J.prototype.zg=function(t){Ab.put(t)},J.prototype.Ef=function(){return Ab.get()},zb.prototype.set=function(t,e){this.Ic=t,this.scope=e,this.next=null},zb.prototype.reset=function(){this.next=this.scope=this.Ic=null};var Cb,Eb,Hb=!1,Ib=new J;x(Jb,H),e=Jb.prototype,e.enabled=!1,e.B=null,e.setInterval=function(t){this.Na=t,this.B&&this.enabled?(this.stop(),this.start()):this.B&&this.stop()},e.Xg=function(){if(this.enabled){var t=w()-this.le;0<t&&t<.8*this.Na?this.B=this.xb.setTimeout(this.qd,this.Na-t):(this.B&&(this.xb.clearTimeout(this.B),this.B=null),this.kf(),this.enabled&&(this.stop(),this.start()))}},e.kf=function(){this.dispatchEvent("tick")},e.start=function(){this.enabled=!0,this.B||(this.B=this.xb.setTimeout(this.qd,this.Na),this.le=w())},e.stop=function(){this.enabled=!1,this.B&&(this.xb.clearTimeout(this.B),this.B=null)},e.F=function(){Jb.L.F.call(this),this.stop(),delete this.xb},x(Lb,z),e=Lb.prototype,e.Ua=!1,e.pb=0,e.B=null,e.rf=function(t){this.sc=arguments,this.B||this.pb?this.Ua=!0:this.Ec()},e.stop=function(){this.B&&(h.clearTimeout(this.B),this.B=null,this.Ua=!1,this.sc=[])},e.pause=function(){this.pb++},e.resume=function(){--this.pb||!this.Ua||this.B||(this.Ua=!1,this.Ec())},e.F=function(){Lb.L.F.call(this),this.stop()},e.jg=function(){this.B=null,this.Ua&&!this.pb&&(this.Ua=!1,this.Ec())},e.Ec=function(){this.B=Kb(this.af,this.Na),this.Yf.apply(null,this.sc)},x(Mb,z);var Nb=[];e=Mb.prototype,e.ob=function(t,e,n,r){return this.Xf(t,e,n,r)},e.Xf=function(t,e,r,i){n(e)||(e&&(Nb[0]=e.toString()),e=Nb);for(var o=0;o<e.length;o++){var s=ib(t,e[o],r||this.handleEvent,i||!1,this.i||this);if(!s)break;this.o[s.key]=s}return this},e.Qc=function(t,e,n,r){return this.me(t,e,n,r)},e.me=function(t,e,r,i,o){if(n(e))for(var s=0;s<e.length;s++)this.me(t,e[s],r,i,o);else{if(!(t=jb(t,e,r||this.handleEvent,i,o||this.i||this)))return this;this.o[t.key]=t}return this},e.hd=function(t,e,i,o,s){if(n(e))for(var a=0;a<e.length;a++)this.hd(t,e[a],i,o,s);else i=i||this.handleEvent,o=r(o)?!!o.capture:!!o,s=s||this.i||this,i=kb(i),o=!!o,(e=F(t)?t.kb(e,i,o,s):t&&(t=G(t))?t.kb(e,i,o,s):null)&&(qb(e),delete this.o[e.key])},e.qb=function(){Aa(this.o,function(t,e){this.o.hasOwnProperty(e)&&qb(t)},this),this.o={}},e.F=function(){Mb.L.F.call(this),this.qb()},e.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},K.prototype.Pd=null,K.prototype.reset=function(t,e,n,r,i){this.nb=t,delete this.Pd},K.prototype.Hg=function(t){this.Pd=t},K.prototype.Ke=function(t){this.nb=t},L.prototype.toString=function(){return this.name};var Qb=new L("SEVERE",1e3),Rb=new L("WARNING",900),Sb=new L("INFO",800),Tb=new L("CONFIG",700),Ub=new L("FINE",500);e=Pb.prototype,e.getName=function(){return this.se},e.getParent=function(){return this.ac},e.tf=function(){return this.wc||(this.wc={}),this.wc},e.Ke=function(t){this.nb=t},e.Td=function(){return this.nb?this.nb:this.ac?this.ac.Td():(ia("Root logger has no level set."),null)},e.Tf=function(t){return t.value>=this.Td().value},e.log=function(t,e,n){this.Tf(t)&&(q(e)&&(e=e()),this.lf(this.yf(t,e,n)))},e.yf=function(t,e,n){return t=new K(t,String(e),this.se),n&&t.Hg(n),t},e.ca=function(t,e){this.log(Qb,t,e)},e.T=function(t,e){this.log(Rb,t,e)},e.info=function(t,e){this.log(Sb,t,e)},e.qf=function(t){this.log(Ub,t,void 0)},e.lf=function(t){for(var e=this;e;)e.$e(t),e=e.getParent()},e.$e=function(t){if(this.be)for(var e,n=0;e=this.be[n];n++)e(t)},e.Lg=function(t){this.ac=t},e.Ue=function(t,e){this.tf()[t]=e};var Wb={},Xb=null;e=$b.prototype,e.Ld=function(){this.Yc=!1},e.Zg=function(t,e,n,r,i){var o=this;this.info(function(){return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+t+"\n"+e+"\n"+o.ag(i)})},e.$g=function(t,e,n,r,i,o){this.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+i+" "+o})},e.Xa=function(t,e,n){var r=this;this.info(function(){return"XMLHTTP TEXT ("+t+"): "+r.rg(e)+(n?" "+n:"")})},e.Yg=function(t){this.info(function(){return"TIMEOUT: "+t})},e.debug=function(t){M(this.s,t)},e.eb=function(t,e){var n=this.s;n&&n.ca(e||"Exception",t)},e.info=function(t){Zb(this.s,t)},e.T=function(t){var e=this.s;e&&e.T(t,void 0)},e.ca=function(t){var e=this.s;e&&e.ca(t,void 0)},e.rg=function(t){if(!this.Yc)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(var r=0;r<e.length;r++)n(e[r])&&this.$f(e[r]);return(new I).ec(e)}catch(e){return this.debug("Exception parsing expected JS array - probably was not JS"),t}},e.$f=function(t){if(!(2>t.length||(t=t[1],!n(t)||1>t.length))){var e=t[0];if("noop"!=e&&"stop"!=e&&"close"!=e)for(e=1;e<t.length;e++)t[e]=""}},e.ag=function(t){if(!this.Yc)return t;if(!t)return null;var e="";t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].split("=");if(1<r.length){var i=r[0];r=r[1];var o=i.split("_");e=2<=o.length&&"type"==o[1]?e+(i+"=")+r+"&":e+(i+"=redacted&")}}return e};var N=new H;x(ac,D),x(bc,D),x(cc,D);var ec={NO_ERROR:0,ah:1,ih:2,hh:3,eh:4,gh:5,jh:6,Re:7,TIMEOUT:8,mh:9},fc={dh:"complete",qh:"success",Se:"error",Re:"abort",oh:"ready",ph:"readystatechange",TIMEOUT:"timeout",kh:"incrementaldata",nh:"progress",fh:"downloadprogress",rh:"uploadprogress"};gc.prototype.sd=null,gc.prototype.Yd=function(){return this.sd||(this.sd=this.Qf())};var ic={OPEN:"a",bh:"b",Se:"c",lh:"d"};x(jc,D),x(kc,D);var lc;x(mc,gc),mc.prototype.Gd=function(){var t=this.Zd();return t?new ActiveXObject(t):new XMLHttpRequest},mc.prototype.Qf=function(){var t={};return this.Zd()&&(t[0]=!0,t[1]=!0),t},mc.prototype.Zd=function(){if(!this.ee&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e=0;e<t.length;e++){var n=t[e];try{return new ActiveXObject(n),this.ee=n}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return this.ee},lc=new mc;var nc=45e3,pc={},qc={};e=R.prototype,e.ga=function(t){this.A=t},e.setTimeout=function(t){this.Va=t},e.Le=function(t){this.Ra=t},e.Mg=function(t){this.ba=t},e.la=function(){return this.ba},e.nd=function(t,e){this.kc=1,this.ua=t.clone().Vb(),this.Da=e,this.Ac=!0,this.Fe(null)},e.md=function(t,e,n){this.kc=1,this.ua=t.clone().Vb(),this.Da=null,this.Ac=e,this.Fe(n)},e.Fe=function(t){this.rb=w(),this.fb(),this.pa=this.ua.clone(),this.pa.fc("t",this.Zc),this.Cb=0,this.h=this.b.Kb(this.b.hc()?t:null),0<this.Ra&&(this.bc=new Lb(u(this.Qe,this,this.h),this.Ra)),this.Hc.ob(this.h,"readystatechange",this.qg),t=this.A?Da(this.A):{},this.Da?(this.Fa||(this.Fa="POST"),t["Content-Type"]="application/x-www-form-urlencoded",this.h.send(this.pa,this.Fa,this.Da,t)):(this.Fa="GET",this.h.send(this.pa,this.Fa,null,t)),O(1),this.a.Zg(this.Fa,this.pa,this.R,this.Zc,this.Da)},e.qg=function(t){t=t.target;var e=this.bc;e&&3==t.ma()?(this.a.debug("Throttling readystatechange."),e.rf()):this.Qe(t)},e.Qe=function(t){try{t==this.h?this.lg():this.a.T("Called back with an unexpected xmlhttp")}catch(t){if(this.a.debug("Failed call to OnXmlHttpReadyStateChanged_"),this.h&&this.h.ya()){var e=this;this.a.eb(t,function(){return"ResponseText: "+e.h.ya()})}else this.a.eb(t,"No response text")}},e.lg=function(){var t=this.h.ma(),e=this.h.Xd(),n=this.h.za();if(!(3>t||3==t&&!La&&!this.h.ya())){this.$a||4!=t||7==e||O(8==e||0>=n?3:2),this.Gb();var r=this.h.za();if(this.w=r,!(e=this.h.ya())){var i=this;this.a.debug(function(){return"No response text for uri "+i.pa+" status "+r})}if(this.S=200==r,this.a.$g(this.Fa,this.pa,this.R,this.Zc,t,r),this.S){if(this.Og()){if(!(n=this.wf()))return this.S=!1,this.I=3,P(12),this.a.T("XMLHTTP Missing X_HTTP_INITIAL_RESPONSE ("+this.R+")"),this.Ia(),void this.Lb();this.a.Xa(this.R,n,"Initial handshake response via X-HTTP-Initial-Response"),this.mb=!0,this.$c(n)}this.Ac?(this.Id(t,e),La&&this.S&&3==t&&this.Tg()):(this.a.Xa(this.R,e,null),this.$c(e)),4==t&&this.Ia(),this.S&&!this.$a&&(4==t?this.b.Vc(this):(this.S=!1,this.fb()))}else 400==r&&0<e.indexOf("Unknown SID")?(this.I=3,P(12),this.a.T("XMLHTTP Unknown SID ("+this.R+")")):(this.I=0,P(13),this.a.T("XMLHTTP Bad status "+r+" ("+this.R+")")),this.Ia(),this.Lb()}},e.Og=function(){return this.Hd&&!this.mb},e.wf=function(){if(this.h){var t=this.h.lb("X-HTTP-Initial-Response");if(t&&!va(t))return t}return null},e.Gg=function(){this.Hd=!0},e.Id=function(t,e){for(var n=!0;!this.$a&&this.Cb<e.length;){var r=this.zf(e);if(r==qc){4==t&&(this.I=4,P(14),n=!1),this.a.Xa(this.R,null,"[Incomplete Response]");break}if(r==pc){this.I=4,P(15),this.a.Xa(this.R,e,"[Invalid Chunk]"),n=!1;break}this.a.Xa(this.R,r,null),this.$c(r)}4==t&&0==e.length&&(this.I=1,P(16),n=!1),this.S=this.S&&n,n||(this.a.Xa(this.R,e,"[Invalid Chunked Response]"),this.Ia(),this.Lb())},e.og=function(){if(this.h){var t=this.h.ma(),e=this.h.ya();this.Cb<e.length&&(this.Gb(),this.Id(t,e),this.S&&4!=t&&this.fb())}},e.Tg=function(){this.Hc.ob(this.Xc,"tick",this.og),this.Xc.start()},e.zf=function(t){var e=this.Cb,n=t.indexOf("\n",e);return-1==n?qc:(e=Number(t.substring(e,n)),isNaN(e)?pc:(n+=1)+e>t.length?qc:(t=t.substr(n,e),this.Cb=n+e,t))},e.Bg=function(t){this.kc=2,this.ua=t.clone().Vb(),t=!1,h.navigator&&h.navigator.sendBeacon&&(t=h.navigator.sendBeacon(this.ua.toString(),"")),!t&&h.Image&&((new Image).src=this.ua,t=!0),t||(this.h=this.b.Kb(null),this.h.send(this.ua)),this.rb=w(),this.fb()},e.cancel=function(){this.$a=!0,this.Ia()},e.wg=function(t){t&&this.setTimeout(t),this.Ga&&(this.Gb(),this.fb())},e.fb=function(){this.ld=w()+this.Va,this.Oe(this.Va)},e.Oe=function(t){if(null!=this.Ga)throw Error("WatchDog timer not null");this.Ga=Q(u(this.kg,this),t)},e.Gb=function(){this.Ga&&(h.clearTimeout(this.Ga),this.Ga=null)},e.kg=function(){this.Ga=null;var t=w();0<=t-this.ld?this.Hf():(this.a.T("WatchDog timer called too early"),this.Oe(this.ld-t))},e.Hf=function(){this.S&&this.a.ca("Received watchdog timeout even though request loaded successfully"),this.a.Yg(this.pa),2!=this.kc&&(O(3),P(17)),this.Ia(),this.I=2,this.Lb()},e.Lb=function(){this.b.ge()||this.$a||this.b.Vc(this)},e.Ia=function(){this.Gb();var t=this.bc;t&&"function"==typeof t.cb&&t.cb(),this.bc=null,this.Xc.stop(),this.Hc.qb(),this.h&&(t=this.h,this.h=null,t.abort(),t.cb())},e.Jc=function(){return this.I},e.$c=function(t){try{this.b.xe(this,t),O(4)}catch(t){this.a.eb(t,"Error in httprequest callback")}},e=S.prototype,e.C=function(){return this.j},e.H=function(){this.yc();for(var t=[],e=0;e<this.o.length;e++)t.push(this.D[this.o[e]]);return t},e.W=function(){return this.yc(),this.o.concat()},e.va=function(t){return T(this.D,t)},e.X=function(){return 0==this.j},e.clear=function(){this.D={},this.j=this.o.length=0},e.remove=function(t){return!!T(this.D,t)&&(delete this.D[t],this.j--,this.o.length>2*this.j&&this.yc(),!0)},e.yc=function(){if(this.j!=this.o.length){for(var t=0,e=0;t<this.o.length;){var n=this.o[t];T(this.D,n)&&(this.o[e++]=n),t++}this.o.length=e}if(this.j!=this.o.length){var r={};for(e=t=0;t<this.o.length;)n=this.o[t],T(r,n)||(this.o[e++]=n,r[n]=1),t++;this.o.length=e}},e.get=function(t,e){return T(this.D,t)?this.D[t]:e},e.set=function(t,e){T(this.D,t)||(this.j++,this.o.push(t)),this.D[t]=e},e.addAll=function(t){if(t instanceof S)for(var e=t.W(),n=0;n<e.length;n++)this.set(e[n],t.get(e[n]));else for(e in t)this.set(e,t[e])},e.forEach=function(t,e){for(var n=this.W(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}},e.clone=function(){return new S(this)};var tc=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;e=U.prototype,e.toString=function(){var t=[],e=this.qa;e&&t.push(wc(e,yc,!0),":");var n=this.xa;return(n||"file"==e)&&(t.push("//"),(e=this.Ab)&&t.push(wc(e,yc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.Ca)&&t.push(":",String(n))),(n=this.K)&&(this.Kc()&&"/"!=n.charAt(0)&&t.push("/"),t.push(wc(n,"/"==n.charAt(0)?zc:Ac,!0))),(n=this.Ud())&&t.push("?",n),(n=this.jb)&&t.push("#",wc(n,Bc)),t.join("")},e.resolve=function(t){var e=this.clone(),n=t.Lf();n?e.ub(t.qa):n=t.Mf(),n?e.fd(t.Ab):n=t.Kc(),n?e.sb(t.xa):n=t.Jf();var r=t.K;if(n)e.tb(t.Ca);else if(n=t.de()){if("/"!=r.charAt(0))if(this.Kc()&&!this.de())r="/"+r;else{var i=e.K.lastIndexOf("/");-1!=i&&(r=e.K.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.gc(r):n=t.Kf(),n?e.ed(t.P.clone()):n=t.If(),n&&e.cd(t.jb),e},e.clone=function(){return new U(this)},e.ub=function(t,e){this.U(),(this.qa=e?Cc(t,!0):t)&&(this.qa=this.qa.replace(/:$/,""))},e.Lf=function(){return!!this.qa},e.fd=function(t,e){this.U(),this.Ab=e?Cc(t):t},e.Mf=function(){return!!this.Ab},e.sb=function(t,e){this.U(),this.xa=e?Cc(t,!0):t},e.Kc=function(){return!!this.xa},e.tb=function(t){if(this.U(),t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);this.Ca=t}else this.Ca=null},e.Jf=function(){return null!=this.Ca},e.gc=function(t,e){this.U(),this.K=e?Cc(t,!0):t},e.de=function(){return!!this.K},e.Kf=function(){return""!==this.P.toString()},e.ed=function(t,e){this.U(),t instanceof vc?(this.P=t,this.P.dd(this.O)):(e||(t=wc(t,Dc)),this.P=new vc(t,this.O))},e.Ud=function(){return this.P.toString()},e.getQuery=function(){return this.Ud()},e.l=function(t,e){this.U(),this.P.set(t,e)},e.fc=function(t,e){this.U(),n(e)||(e=[String(e)]),this.P.Me(t,e)},e.cd=function(t,e){this.U(),this.jb=e?Cc(t):t},e.If=function(){return!!this.jb},e.Vb=function(){return this.U(),this.l("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),this},e.removeParameter=function(t){return this.U(),this.P.remove(t),this},e.U=function(){if(this.Uf)throw Error("Tried to modify a read-only Uri")},e.dd=function(t){this.O=t,this.P&&this.P.dd(t)};var yc=/[#\/\?@]/g,Ac=/[#\?:]/g,zc=/[#\?]/g,Dc=/[#\?@]/g,Bc=/#/g;e=vc.prototype,e.$=function(){if(!this.m&&(this.m=new S,this.j=0,this.ja)){var t=this;uc(this.ja,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})}},e.C=function(){return this.$(),this.j},e.add=function(t,e){this.$(),this.Oa(),t=this.Ma(t);var n=this.m.get(t);return n||this.m.set(t,n=[]),n.push(e),this.j+=1,this},e.remove=function(t){return this.$(),t=this.Ma(t),!!this.m.va(t)&&(this.Oa(),this.j-=this.m.get(t).length,this.m.remove(t))},e.clear=function(){this.Oa(),this.m=null,this.j=0},e.X=function(){return this.$(),0==this.j},e.va=function(t){return this.$(),t=this.Ma(t),this.m.va(t)},e.forEach=function(t,e){this.$(),this.m.forEach(function(n,r){na(n,function(n){t.call(e,n,r,this)},this)},this)},e.W=function(){this.$();for(var t=this.m.H(),e=this.m.W(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.H=function(t){this.$();var e=[];if(l(t))this.va(t)&&(e=ta(e,this.m.get(this.Ma(t))));else{t=this.m.H();for(var n=0;n<t.length;n++)e=ta(e,t[n])}return e},e.set=function(t,e){return this.$(),this.Oa(),t=this.Ma(t),this.va(t)&&(this.j-=this.m.get(t).length),this.m.set(t,[e]),this.j+=1,this},e.get=function(t,e){return t?(t=this.H(t),0<t.length?String(t[0]):e):e},e.Me=function(t,e){this.remove(t),0<e.length&&(this.Oa(),this.m.set(this.Ma(t),ua(e)),this.j+=e.length)},e.toString=function(){if(this.ja)return this.ja;if(!this.m)return"";for(var t=[],e=this.m.W(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.H(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.ja=t.join("&")},e.Oa=function(){this.ja=null},e.clone=function(){var t=new vc;return t.ja=this.ja,this.m&&(t.m=this.m.clone(),t.j=this.j),t},e.Ma=function(t){return t=String(t),this.O&&(t=t.toLowerCase()),t},e.dd=function(t){t&&!this.O&&(this.$(),this.Oa(),this.m.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(this.remove(e),this.Me(n,t))},this)),this.O=t},e.extend=function(t){for(var e=0;e<arguments.length;e++)sc(arguments[e],function(t,e){this.add(e,t)},this)},x(Kc,Jc),e=Lc.prototype,e.g=null,e.ga=function(t){this.A=t},e.connect=function(t){this.K=t,t=this.b.Vd(this.K),P(3);var e=this.b.Jb.ce;null!=e?(this.na=this.b.ab(e[0]),this.g=1,this.Ad()):(t.fc("MODE","init"),!this.b.ta&&this.b.aa&&t.fc("X-HTTP-Session-Id",this.b.aa),this.f=new R(this,this.a,void 0,void 0,void 0),this.f.ga(this.A),this.f.md(t,!1,null),this.g=0)},e.Ad=function(){this.a.debug("TestConnection: starting stage 2");var t=this.b.Jb.rd;if(null!=t)this.a.debug(function(){return"Buffered"}),P(4),t?(P(10),this.b.vb(this,!1)):(P(11),this.b.vb(this,!0));else{this.f=new R(this,this.a,void 0,void 0,void 0),this.f.ga(this.A);var e=this.b.Sd(this.na,this.K);P(4),e.fc("TYPE","xmlhttp");var n=this.b.aa,r=this.b.Mc;n&&r&&e.l(n,r),this.f.md(e,!1,this.na)}},e.Kb=function(t){return this.b.Kb(t)},e.abort=function(){this.f&&(this.f.cancel(),this.f=null),this.w=-1},e.ge=function(){return!1},e.xe=function(t,e){if(this.w=t.w,0==this.g)if(this.a.debug("TestConnection: Got data for stage 1"),this.rc(t),e){try{var n=this.b.mc.Bc(e)}catch(t){return this.a.eb(t),void this.b.gd(this)}this.na=this.b.ab(n[0])}else this.a.debug("TestConnection: Null responseText"),this.b.gd(this);else 1==this.g&&(this.cc?P(6):"11111"==e?(P(5),this.cc=!0,this.cf()&&(this.w=200,this.f.cancel(),this.a.debug("Test connection succeeded; using streaming connection"),P(11),this.b.vb(this,!0))):(P(7),this.cc=!1))},e.Vc=function(){this.w=this.f.w,this.f.S?0==this.g?(this.g=1,this.a.debug("TestConnection: request complete for initial check"),this.Ad()):1==this.g&&(this.a.debug("TestConnection: request complete for stage 2"),this.cc?(this.a.debug("Test connection succeeded; using streaming connection"),P(11),this.b.vb(this,!0)):(this.a.debug("Test connection failed; not using streaming"),P(10),this.b.vb(this,!1))):(this.a.debug("TestConnection: request failed, in state "+this.g),0==this.g?P(8):1==this.g&&P(9),this.b.gd(this))},e.rc=function(t){if(!this.b.ta&&(t=t.h)){var e=t.lb("X-Client-Wire-Protocol");this.Dd=e||null,this.b.aa&&((t=t.lb("X-HTTP-Session-Id"))?this.b.Je(t):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},e.hc=function(){return this.b.hc()},e.Ba=function(){return this.b.Ba()},e.cf=function(){return!C||10<=Number(Ua)},e=Nc.prototype,e.C=function(){return this.D.C()},e.add=function(t){this.D.set(Oc(t),t)},e.addAll=function(t){t=rc(t);for(var e=t.length,n=0;n<e;n++)this.add(t[n])},e.qb=function(t){t=rc(t);for(var e=t.length,n=0;n<e;n++)this.remove(t[n])},e.remove=function(t){return this.D.remove(Oc(t))},e.clear=function(){this.D.clear()},e.X=function(){return this.D.X()},e.contains=function(t){return this.D.va(Oc(t))},e.H=function(){return this.D.H()},e.clone=function(){return new Nc(this)};var Rc=10;e=Qc.prototype,e.od=function(t){this.v||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(this.Yb=this.pe,this.v=new Nc,this.f&&(this.qc(this.f),this.f=null))},e.he=function(){return!!this.f||!!this.v&&this.v.C()>=this.Yb},e.Bf=function(){return this.f?1:this.v?this.v.C():0},e.Lc=function(t){return this.f?this.f==t:!!this.v&&this.v.contains(t)},e.qc=function(t){this.v?this.v.add(t):this.f=t},e.Ce=function(t){this.f&&this.f==t?this.f=null:this.v&&this.v.contains(t)&&this.v.remove(t)},e.cancel=function(){this.ba=this.la(),this.f?(this.f.cancel(),this.f=null):this.v&&!this.v.X()&&(na(this.v.H(),function(t){t.cancel()}),this.v.clear())},e.la=function(){if(null!=this.f)return this.ba.concat(this.f.la());if(null!=this.v&&!this.v.X()){var t=this.ba;return na(this.v.H(),function(e){t=t.concat(e.la())}),t}return ua(this.ba)},e.Ve=function(t){this.ba=this.ba.concat(t)},e.df=function(){this.ba.length=0},Sc.prototype.stringify=function(t){return h.JSON.stringify(t,this.Ta)},Sc.prototype.parse=function(t){return h.JSON.parse(t,this.Ag)},Tc.prototype.mf=function(t,e,n){var i=n||"";try{sc(t,function(t,n){var o=t;r(t)&&(o=(new I).ec(t)),e.push(i+n+"="+encodeURIComponent(o))})}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}},Tc.prototype.nf=function(t,e,n){for(var r=-1;;){var i=["count="+e];-1==r?0<e?(r=t[0].Rc,i.push("ofs="+r)):r=0:i.push("ofs="+r);for(var o=!0,s=0;s<e;s++){var a=t[s].Rc,u=t[s].map;if(0>(a-=r))r=Math.max(0,t[s].Rc-100),o=!1;else try{this.mf(u,i,"req"+a+"_")}catch(t){n&&n(u)}}if(o)return i.join("&")}},Tc.prototype.Bc=function(t){return this.ng.parse(t)},x(V,H);var Wc="";V.prototype.s=Yb("goog.net.XhrIo");var Xc=/^https?$/i,Yc=["POST","PUT"];e=V.prototype,e.Ne=function(t){this.Bb=t},e.send=function(t,e,n,r){if(this.c)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Ub+"; newUri="+t);e=e?e.toUpperCase():"GET",this.Ub=t,this.I="",this.Pa=0,this.je=e,this.Gc=!1,this.ha=!0,this.c=this.hf(),this.oc=this.Ya?this.Ya.Yd():lc.Yd(),this.c.onreadystatechange=u(this.we,this),this.pg&&"onprogress"in this.c&&(this.c.onprogress=u(function(t){this.ue(t,!0)},this),this.c.upload&&(this.c.upload.onprogress=u(this.ue,this)));try{M(this.s,this.da("Opening Xhr")),this.Nc=!0,this.c.open(e,String(t),!0),this.Nc=!1}catch(t){return M(this.s,this.da("Error opening Xhr: "+t.message)),void this.Od(t)}t=n||"";var i=this.headers.clone();r&&sc(r,function(t,e){i.set(e,t)}),r=pa(i.W()),n=h.FormData&&t instanceof h.FormData,!(0<=la(Yc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.c.setRequestHeader(e,t)},this),this.De&&(this.c.responseType=this.De),"withCredentials"in this.c&&this.c.withCredentials!==this.Bb&&(this.c.withCredentials=this.Bb);try{this.Bd(),0<this.wb&&(this.lc=Zc(this.c),M(this.s,this.da("Will abort after "+this.wb+"ms if incomplete, xhr2 "+this.lc)),this.lc?(this.c.timeout=this.wb,this.c.ontimeout=u(this.Va,this)):this.jc=Kb(this.Va,this.wb,this)),M(this.s,this.da("Sending request")),this.Rb=!0,this.c.send(t),this.Rb=!1}catch(t){M(this.s,this.da("Send error: "+t.message)),this.Od(t)}},e.hf=function(){return this.Ya?this.Ya.Gd():lc.Gd()},e.Va=function(){void 0!==goog&&this.c&&(this.I="Timed out after "+this.wb+"ms, aborting",this.Pa=8,M(this.s,this.da(this.I)),this.dispatchEvent("timeout"),this.abort(8))},e.Od=function(t){this.ha=!1,this.c&&(this.Aa=!0,this.c.abort(),this.Aa=!1),this.I=t,this.Pa=5,this.Md(),this.Hb()},e.Md=function(){this.Gc||(this.Gc=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},e.abort=function(t){this.c&&this.ha&&(M(this.s,this.da("Aborting")),this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1,this.Pa=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.Hb())},e.F=function(){this.c&&(this.ha&&(this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1),this.Hb(!0)),V.L.F.call(this)},e.we=function(){this.Ka||(this.Nc||this.Rb||this.Aa?this.ve():this.ig())},e.ig=function(){this.ve()},e.ve=function(){if(this.ha&&void 0!==goog)if(this.oc[1]&&4==this.ma()&&2==this.za())M(this.s,this.da("Local request error detected and ignored"));else if(this.Rb&&4==this.ma())Kb(this.we,0,this);else if(this.dispatchEvent("readystatechange"),this.Oc()){M(this.s,this.da("Request complete")),this.ha=!1;try{this.Vf()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.Pa=6,this.I=this.ae()+" ["+this.za()+"]",this.Md())}finally{this.Hb()}}},e.ue=function(t,e){this.dispatchEvent($c(t,"progress")),this.dispatchEvent($c(t,e?"downloadprogress":"uploadprogress"))},e.Hb=function(t){if(this.c){this.Bd();var e=this.c,n=this.oc[0]?aa:null;this.oc=this.c=null,t||this.dispatchEvent("ready");try{e.onreadystatechange=n}catch(e){(t=this.s)&&t.ca("Problem encountered resetting onreadystatechange: "+e.message,void 0)}}},e.Bd=function(){this.c&&this.lc&&(this.c.ontimeout=null),this.jc&&(h.clearTimeout(this.jc),this.jc=null)},e.Ba=function(){return!!this.c},e.Oc=function(){return 4==this.ma()},e.Vf=function(){var t=this.za();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}return e||0===t&&!this.Sf()},e.Sf=function(){var t=String(this.Ub).match(tc)[1]||null;return!t&&h.self&&h.self.location&&(t=h.self.location.protocol,t=t.substr(0,t.length-1)),Xc.test(t?t.toLowerCase():"")},e.ma=function(){return this.c?this.c.readyState:0},e.za=function(){try{return 2<this.ma()?this.c.status:-1}catch(t){return-1}},e.ae=function(){try{return 2<this.ma()?this.c.statusText:""}catch(t){return M(this.s,"Can not get status: "+t.message),""}},e.ya=function(){try{return this.c?this.c.responseText:""}catch(t){return M(this.s,"Can not get responseText: "+t.message),""}},e.Cf=function(t){if(this.c){var e=this.c.responseText;t&&0==e.indexOf(t)&&(e=e.substring(t.length));t:{if(t=e,h.JSON)try{var n=h.JSON.parse(t);break t}catch(t){}n=vb(t)}return n}},e.getResponseHeader=function(t){if(this.c&&this.Oc())return t=this.c.getResponseHeader(t),null===t?void 0:t},e.getAllResponseHeaders=function(){return this.c&&this.Oc()?this.c.getAllResponseHeaders()||"":""},e.lb=function(t){return this.c?this.c.getResponseHeader(t):null},e.Xd=function(){return this.Pa},e.Jc=function(){return l(this.I)?this.I:String(this.I)},e.da=function(t){return t+" ["+this.je+" "+this.Ub+" "+this.za()+"]"},e=cd.prototype,e.vc=8,e.g=1,e.connect=function(t,e,n,r,i){this.a.debug("connect()"),P(0),this.K=e,this.hb=n||{},r&&void 0!==i&&(this.hb.OSID=r,this.hb.OAID=i),this.ta&&(this.a.debug("connect() bypassed channel-test."),this.Jb.ce=[],this.Jb.rd=!1),this.ff(t)},e.disconnect=function(){if(this.a.debug("disconnect()"),this.td(),3==this.g){var t=this.Zb++,e=this.ib.clone();e.l("SID",this.ra),e.l("RID",t),e.l("TYPE","terminate"),this.Za(e),new R(this,this.a,this.ra,t,void 0).Bg(e)}this.te()},e.ff=function(t){this.a.debug("connectTest_()"),this.Ja=new Lc(this,this.a),null===this.N&&this.Ja.ga(this.A);var e=t;this.N&&this.A&&(e=bd(t,this.N,this.A)),this.Ja.connect(e)},e.ef=function(){this.a.debug("connectChannel_()"),this.ib=this.Vd(this.K),this.Fc()},e.td=function(){this.Ja&&(this.Ja.abort(),this.Ja=null),this.u&&(this.u.cancel(),this.u=null),this.ia&&(h.clearTimeout(this.ia),this.ia=null),this.Ib(),this.G.cancel(),this.ea&&(h.clearTimeout(this.ea),this.ea=null)},e.ga=function(t){this.A=t},e.Kg=function(t){this.Sb=t},e.Ig=function(t){this.N=t},e.Jg=function(t){this.aa=t},e.Je=function(t){this.Mc=t},e.Le=function(t){this.Ra=t},e.Ng=function(){this.ic=!0},e.Ie=function(t){this.i=t},e.Rf=function(){return!this.jd},e.ad=function(t){1e3==this.M.length&&this.a.ca(function(){return"Already have 1000 queued maps upon queueing "+(new I).ec(t)}),this.M.push(new Pc(this.eg++,t)),3==this.g&&this.Fc()},e.uf=function(){return this.pf?0:this.sf},e.ge=function(){return 0==this.g},e.getState=function(){return this.g},e.Fc=function(){this.G.he()||this.ea||(this.ea=Q(u(this.ze,this),0),this.La=0)},e.bg=function(t){return this.G.Bf()>=this.G.Yb-(this.ea?1:0)?(this.a.ca("Unexpected retry request is scheduled."),!1):this.ea?(this.a.debug("Use the retry request that is already scheduled."),this.M=t.la().concat(this.M),!0):!(1==this.g||2==this.g||this.La>=this.uf())&&(this.a.debug("Going to retry POST"),this.ea=Q(u(this.ze,this,t),this.$d(this.La)),this.La++,!0)},e.ze=function(t){this.ea=null,this.Sg(t)},e.Sg=function(t){this.a.debug("startForwardChannel_"),1==this.g?t?this.a.ca("Not supposed to retry the open"):(this.mg(),this.g=2):3==this.g&&(t?this.oe(t):0==this.M.length?this.a.debug("startForwardChannel_ returned: nothing to send"):this.G.he()?this.a.ca("startForwardChannel_ returned: connection already in progress"):(this.oe(),this.a.debug("startForwardChannel_ finished, sent request")))},e.mg=function(){this.a.debug("open_()"),this.Zb=Math.floor(1e5*Math.random());var t=this.Zb++,e=new R(this,this.a,"",t,void 0),n=this.A;this.Sb&&(n?(n=Da(n),Fa(n,this.Sb)):n=this.Sb),null===this.N&&e.ga(n);var r=this.Kd(e),i=this.ib.clone();i.l("RID",t),0<this.Ed&&i.l("CVER",this.Ed),this.ta&&this.aa&&i.l("X-HTTP-Session-Id",this.aa),this.Za(i),this.N&&n&&bd(i,this.N,n),this.G.qc(e),this.Qd?(i.l("$req",r),i.l("SID","null"),e.Gg(),e.nd(i,null)):e.nd(i,r)},e.oe=function(t){var e=t?t.R:this.Zb++,n=this.ib.clone();n.l("SID",this.ra),n.l("RID",e),n.l("AID",this.Tb),this.Za(n),this.N&&this.A&&bd(n,this.N,this.A),e=new R(this,this.a,this.ra,e,this.La+1),null===this.N&&e.ga(this.A),t&&this.vg(t),t=this.Kd(e),e.setTimeout(Math.round(.5*this.Rd)+Math.round(.5*this.Rd*Math.random())),this.G.qc(e),e.nd(n,t)},e.Za=function(t){this.i&&sc({},function(e,n){t.l(n,e)})},e.Kd=function(t){var e=Math.min(this.M.length,1e3),n=this.i?u(this.i.Ye,this.i,this):null;return n=this.mc.nf(this.M,e,n),t.Mg(this.M.splice(0,e)),n},e.vg=function(t){this.M=t.la().concat(this.M)},e.Nd=function(){if(!this.u&&!this.ia){this.tc=1;var t=this.ye;Eb||Fb(),Hb||(Eb(),Hb=!0),Ib.add(t,this),this.Ha=0}},e.Sc=function(){return this.u||this.ia?(this.a.ca("Request already in progress"),!1):!(3<=this.Ha)&&(this.a.debug("Going to retry GET"),this.tc++,this.ia=Q(u(this.ye,this),this.$d(this.Ha)),this.Ha++,!0)},e.ye=function(){this.ia=null,this.Qg()},e.Qg=function(){this.a.debug("Creating new HttpRequest"),this.u=new R(this,this.a,this.ra,"rpc",this.tc),null===this.N&&this.u.ga(this.A),this.u.Le(this.Ra);var t=this.pd.clone();t.l("RID","rpc"),t.l("SID",this.ra),t.l("CI",this.jd?"0":"1"),t.l("AID",this.Tb),this.Za(t),t.l("TYPE","xmlhttp"),this.N&&this.A&&bd(t,this.N,this.A),this.Eb&&this.u.setTimeout(this.Eb),this.u.md(t,!0,this.na),this.a.debug("New Request created")},e.vb=function(t,e){this.a.debug("Test Connection Finished");var n=t.Dd;n&&this.G.od(n),this.jd=this.We&&e,this.w=t.w,this.ef()},e.gd=function(t){this.a.debug("Test Connection Failed"),this.w=t.w,this.sa(2)},e.xe=function(t,e){if(0!=this.g&&(this.u==t||this.G.Lc(t)))if(this.w=t.w,!t.mb&&this.G.Lc(t)&&3==this.g){try{var r=this.mc.Bc(e)}catch(t){r=null}n(r)&&3==r.length?this.Gf(r,t):(this.a.debug("Bad POST response data returned"),this.sa(11))}else(t.mb||this.u==t)&&this.Ib(),va(e)||(r=this.mc.Bc(e),this.hg(r,t))},e.Gf=function(t,e){0==t[0]?this.Ff(e):(this.ke=t[1],0<(e=this.ke-this.Tb)&&(t=t[2],this.a.debug(t+" bytes (in "+e+" arrays) are outstanding on the BackChannel"),this.Pg(t)&&!this.wa&&(this.wa=Q(u(this.fg,this),6e3))))},e.Ff=function(t){if(this.a.debug("Server claims our backchannel is missing."),this.ia)this.a.debug("But we are currently starting the request.");else{if(this.u){if(!(this.u.rb+3e3<t.rb))return;this.Ib(),this.u.cancel(),this.u=null}else this.a.T("We do not have a BackChannel established");this.Sc(),P(18)}},e.Pg=function(t){return 37500>t&&!this.Rf()&&0==this.Ha},e.ab=function(t){return this.Xe?this.i?this.i.ab(t):t:null},e.fg=function(){null!=this.wa&&(this.wa=null,this.u.cancel(),this.u=null,this.Sc(),P(19))},e.Ib=function(){null!=this.wa&&(h.clearTimeout(this.wa),this.wa=null)},e.Vc=function(t){this.a.debug("Request complete");var e=null;if(this.u==t){this.Ib(),this.u=null;var n=2}else{if(!this.G.Lc(t))return;e=t.la(),this.G.Ce(t),n=1}if(this.w=t.w,0!=this.g)if(t.S)1==n?(dc(t.Da?t.Da.length:0,w()-t.rb,this.La),this.Fc()):this.Nd();else{var r=t.Jc();if(3==r||0==r&&0<this.w)this.a.debug("Not retrying due to error type");else{var i=this;if(this.a.debug(function(){return"Maybe retrying, last error: "+oc(r,i.w)}),1==n&&this.bg(t)||2==n&&this.Sc())return;this.a.debug("Exceeded max number of retries")}switch(e&&0<e.length&&this.G.Ve(e),this.a.debug("Error: HTTP request failed"),r){case 1:this.sa(5);break;case 4:this.sa(10);break;case 3:this.sa(6);break;default:this.sa(2)}}},e.$d=function(t){var e=this.Ze+Math.floor(Math.random()*this.yg);return this.Ba()||(this.a.debug("Inactive channel"),e*=2),e*t},e.rc=function(t){if(this.ta&&(t=t.h)){var e=t.lb("X-Client-Wire-Protocol");e&&this.G.od(e),this.aa&&((t=t.lb("X-HTTP-Session-Id"))?(this.Je(t),this.ib.l(this.aa,t)):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},e.hg=function(t,e){for(var n=this.i&&this.i.uc?[]:null,r=0;r<t.length;r++){var i=t[r];if(this.Tb=i[0],i=i[1],2==this.g)if("c"==i[0]){this.ra=i[1],this.na=this.ab(i[2]);var o=i[3];null!=o&&(this.vc=o,this.a.info("VER="+this.vc)),o=i[4],null!=o&&(this.He=o,this.a.info("SVER="+this.He)),i=i[5],null!=i&&"number"==typeof i&&0<i&&(this.Eb=i*=1.5,this.a.info("backChannelRequestTimeoutMs_="+i)),this.rc(e),this.g=3,this.i&&this.i.zd(),this.Rg(e)}else"stop"!=i[0]&&"close"!=i[0]||this.sa(7);else 3==this.g&&("stop"==i[0]||"close"==i[0]?(n&&0!=n.length&&(this.i.uc(this,n),n.length=0),"stop"==i[0]?this.sa(7):this.disconnect()):"noop"!=i[0]&&(n?n.push(i):this.i&&this.i.xd(i)),this.Ha=0)}n&&0!=n.length&&this.i.uc(this,n)},e.Rg=function(t){this.pd=this.Sd(this.na,this.K),t.mb?(this.a.debug("Upgrade the handshake request to a backchannel."),this.G.Ce(t),t.wg(this.Eb),this.u=t):this.Nd()},e.sa=function(t){if(this.a.info("Error code "+t),2==t){var e=null;this.i&&(e=null);var n=u(this.Vg,this);e||(e=new U("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||e.ub("https"),e.Vb()),Uc(e.toString(),n)}else P(2);this.gg(t)},e.Vg=function(t){t?(this.a.info("Successfully pinged google.com"),P(2)):(this.a.info("Failed to ping google.com"),P(1))},e.gg=function(t){this.a.debug("HttpChannel: error - "+t),this.g=0,this.i&&this.i.wd(t),this.te(),this.td()},e.te=function(){if(this.g=0,this.w=-1,this.i){var t=this.G.la();if(0!=t.length||0!=this.M.length){var e=this;this.a.debug(function(){return"Number of undelivered maps, pending: "+t.length+", outgoing: "+e.M.length}),this.G.df(),ua(this.M),this.M.length=0}this.i.vd()}},e.Vd=function(t){return t=this.Fd(null,t),this.a.debug("GetForwardChannelUri: "+t),t},e.Sd=function(t,e){return t=this.Fd(this.hc()?t:null,e),this.a.debug("GetBackChannelUri: "+t),t},e.Fd=function(t,e){var n=Ec(e);if(""!=n.xa)t&&n.sb(t+"."+n.xa),n.tb(n.Ca);else{var r=h.location;n=Fc(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return this.hb&&Aa(this.hb,function(t,e){n.l(e,t)}),t=this.aa,e=this.Mc,t&&e&&n.l(t,e),n.l("VER",this.vc),this.Za(n),n},e.Kb=function(t){if(t&&!this.ic)throw Error("Can't create secondary domain capable XhrIo object.");return t=new V(this.Ya),t.Ne(this.ic),t},e.Ba=function(){return!!this.i&&this.i.Ba()},e.hc=function(){return this.ic},e=dd.prototype,e.uc=null,e.zd=function(){},e.xd=function(){},e.wd=function(){},e.vd=function(){},e.Ba=function(){return!0},e.Ye=function(){},e.ab=function(t){return t},fd.prototype.gf=function(t,e){return new W(t,e)},x(W,H),e=W.prototype,e.addEventListener=function(t,e,n,r){W.L.addEventListener.call(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){W.L.removeEventListener.call(this,t,e,n,r)},e.open=function(){this.b.Ie(this.yd),this.Ug&&this.b.Ng(),this.b.connect(this.Wg,this.zb,this.Tc||void 0)},e.close=function(){this.b.disconnect()},e.send=function(t){if(l(t)){var e={};e.__data__=t,this.b.ad(e)}else this.Cg?(e={},e.__data__=(new I).ec(t),this.b.ad(e)):this.b.ad(t)},e.F=function(){this.b.Ie(null),delete this.yd,this.b.disconnect(),delete this.b,W.L.F.call(this)},x(gd,jc),x(hd,kc),x(X,dd),X.prototype.zd=function(){Zb(this.b.s,"WebChannel opened on "+this.b.zb),this.b.dispatchEvent("a")},X.prototype.xd=function(t){this.b.dispatchEvent(new gd(t))},X.prototype.wd=function(t){Zb(this.b.s,"WebChannel aborted on "+this.b.zb+" due to channel error: "+t),this.b.dispatchEvent(new hd(t))},X.prototype.vd=function(){Zb(this.b.s,"WebChannel closed on "+this.b.zb),this.b.dispatchEvent("b")};var id=v(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},fd);e=jd.prototype,e.Zf=function(){0==this.V.length&&(this.V=this.Z,this.V.reverse(),this.Z=[])},e.enqueue=function(t){this.Z.push(t)},e.bb=function(){return this.Zf(),this.V.pop()},e.C=function(){return this.V.length+this.Z.length},e.X=function(){return 0==this.V.length&&0==this.Z.length},e.clear=function(){this.V=[],this.Z=[]},e.contains=function(t){return 0<=la(this.V,t)||0<=la(this.Z,t)},e.remove=function(t){var e=this.V,n=ma(e,t);return 0<=n?(Array.prototype.splice.call(e,n,1),e=!0):e=!1,e||sa(this.Z,t)},e.H=function(){for(var t=[],e=this.V.length-1;0<=e;--e)t.push(this.V[e]);var n=this.Z.length;for(e=0;e<n;++e)t.push(this.Z[e]);return t},x(kd,z);var ld="[goog.structs.Pool] Min can not be greater than max";e=kd.prototype,e.Nb=function(){var t=w();if(!(null!=this.Pc&&t-this.Pc<this.Cc)){var e=this.ug();return e&&(this.Pc=t,this.oa.add(e)),e}},e.sg=function(t){return!!this.oa.remove(t)&&(this.pc(t),!0)},e.ug=function(){for(var t;0<this.Wd()&&(t=this.fa.bb(),!this.Uc(t));)this.Db();return!t&&this.C()<this.Xb&&(t=this.zc()),t},e.pc=function(t){this.oa.remove(t),this.Uc(t)&&this.C()<this.Xb?this.fa.enqueue(t):this.Dc(t)},e.Db=function(){for(var t=this.fa;this.C()<this.re;)t.enqueue(this.zc());for(;this.C()>this.Xb&&0<this.Wd();)this.Dc(t.bb())},e.zc=function(){return{}},e.Dc=function(t){if("function"==typeof t.cb)t.cb();else for(var e in t)t[e]=null},e.Uc=function(t){return"function"!=typeof t.bf||t.bf()},e.contains=function(t){return this.fa.contains(t)||this.oa.contains(t)},e.C=function(){return this.fa.C()+this.oa.C()},e.vf=function(){return this.oa.C()},e.Wd=function(){return this.fa.C()},e.X=function(){return this.fa.X()&&this.oa.X()},e.F=function(){if(kd.L.F.call(this),0<this.vf())throw Error("[goog.structs.Pool] Objects not released");delete this.oa;for(var t=this.fa;!t.X();)this.Dc(t.bb());delete this.fa},md.prototype.getKey=function(){return this.ie},md.prototype.clone=function(){return new md(this.ie,this.kd)},e=nd.prototype,e.fe=function(t,e){var n=this.Y;n.push(new md(t,e)),this.dg(n.length-1)},e.Pf=function(t){if(t instanceof nd){var e=t.W();if(t=t.H(),0>=this.C()){for(var n=this.Y,r=0;r<e.length;r++)n.push(new md(e[r],t[r]));return}}else e=Ca(t),t=Ba(t);for(r=0;r<e.length;r++)this.fe(e[r],t[r])},e.remove=function(){var t=this.Y,e=t.length,n=t[0];if(!(0>=e))return 1==e?ra(t):(t[0]=t.pop(),this.cg()),n.kd},e.cg=function(){for(var t=0,e=this.Y,n=e.length,r=e[t];t<n>>1;){var i=this.xf(t),o=this.Df(t);if(i=o<n&&e[o].getKey()<e[i].getKey()?o:i,e[i].getKey()>r.getKey())break;e[t]=e[i],t=i}e[t]=r},e.dg=function(t){for(var e=this.Y,n=e[t];0<t;){var r=this.Af(t);if(!(e[r].getKey()>n.getKey()))break;e[t]=e[r],t=r}e[t]=n},e.xf=function(t){return 2*t+1},e.Df=function(t){return 2*t+2},e.Af=function(t){return t-1>>1},e.H=function(){for(var t=this.Y,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].kd);return e},e.W=function(){for(var t=this.Y,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].getKey());return e},e.va=function(t){return oa(this.Y,function(e){return e.getKey()==t})},e.clone=function(){return new nd(this)},e.C=function(){return this.Y.length},e.X=function(){return 0==this.Y.length},e.clear=function(){ra(this.Y)},x(od,nd),od.prototype.enqueue=function(t,e){this.fe(t,e)},od.prototype.bb=function(){return this.remove()},x(Y,kd),e=Y.prototype,e.Nb=function(t,e){if(!t)return(t=Y.L.Nb.call(this))&&this.Cc&&(this.Jd=h.setTimeout(u(this.Ob,this),this.Cc)),t;this.dc.enqueue(void 0!==e?e:100,t),this.Ob()},e.Ob=function(){for(var t=this.dc;0<t.C();){var e=this.Nb();if(!e)break;t.bb().apply(this,[e])}},e.pc=function(t){Y.L.pc.call(this,t),this.Ob()},e.Db=function(){Y.L.Db.call(this),this.Ob()},e.F=function(){Y.L.F.call(this),h.clearTimeout(this.Jd),this.dc.clear(),this.dc=null},x(Z,Y),Z.prototype.zc=function(){var t=new V,e=this.Nf;return e&&e.forEach(function(e,n){t.headers.set(n,e)}),this.Bb&&t.Ne(!0),t},Z.prototype.Uc=function(t){return!t.Ka&&!t.Ba()},fd.prototype.createWebChannel=fd.prototype.gf,W.prototype.send=W.prototype.send,W.prototype.open=W.prototype.open,W.prototype.close=W.prototype.close,ec.NO_ERROR=0,ec.TIMEOUT=8,ec.HTTP_ERROR=6,fc.COMPLETE="complete",hc.EventType=ic,ic.OPEN="a",ic.CLOSE="b",ic.ERROR="c",ic.MESSAGE="d",H.prototype.listen=H.prototype.ob,Z.prototype.getObject=Z.prototype.Nb,Z.prototype.releaseObject=Z.prototype.sg,V.prototype.listenOnce=V.prototype.Qc,V.prototype.getLastError=V.prototype.Jc,V.prototype.getLastErrorCode=V.prototype.Xd,V.prototype.getStatus=V.prototype.za,V.prototype.getStatusText=V.prototype.ae,V.prototype.getResponseJson=V.prototype.Cf,V.prototype.getResponseText=V.prototype.ya,V.prototype.getResponseText=V.prototype.ya,V.prototype.send=V.prototype.send;var src={createWebChannelTransport:id,ErrorCode:ec,EventType:fc,WebChannel:hc,XhrIoPool:Z},src_1=src.createWebChannelTransport,src_2=src.ErrorCode,src_3=src.EventType,src_4=src.WebChannel,src_5=src.XhrIoPool;__webpack_exports__.default=src}.call(__webpack_exports__,__webpack_require__(4))}]);
//# sourceMappingURL=build.js.map