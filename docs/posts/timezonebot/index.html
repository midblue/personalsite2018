<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>A Discord Timezone Bot for Multinational Groups â€“ Jasper Stephenson</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="My closest friends from my school days and I keep in touch regularly through Discord, a Slack-esque chat tool focused around gaming. As we've gotten older, we've begun to spread out all over the world, which that means that many of us live in vastly different time zones. Very often we resort to googling what time it is in Japan, or in Oregon, or in North Carolina. I decided that there had to be a simple way to ease our timezone woes that wouldn't require trips to the browser, or even knowing where a person was currently located. Thus, with the goal of helping our group communicate and understand each others' context better, criteria for success emerged."><meta data-n-head="ssr" property="og:title" content="A Discord Timezone Bot for Multinational Groups"><meta data-n-head="ssr" data-hid="og:type" property="og:type" content="article"><meta data-n-head="ssr" property="og:url" content="https://www.jasperstephenson.com/posts/timezonebot"><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="https://www.jasperstephenson.com/posts/timezonebot/header.png"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/9c8e31f.js" as="script"><link rel="preload" href="/_nuxt/8de7412.js" as="script"><link rel="preload" href="/_nuxt/002d5ab.js" as="script"><link rel="preload" href="/_nuxt/4dd237e.js" as="script"><link rel="preload" href="/_nuxt/41f2d75.js" as="script"><style data-vue-ssr-id="4b8cfad0:0 4b8cfad0:1 4b8cfad0:2 7a580ae6:0 512ee253:0 e598d4e6:0 212129fe:0 1102d336:0 4a291dd3:0 e86314a6:0 6e0b088d:0 74b245ea:0 2a43fcf0:0">@import url(https://fonts.googleapis.com/css?family=Didact+Gothic);@import url(https://fonts.googleapis.com/css?family=Raleway:700,600);html{font-family:"Didact Gothic",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:17.5px;line-height:1.7;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-box-sizing:border-box;box-sizing:border-box;color:#302c31;letter-spacing:.5px}@media (max-width:768px){html{font-size:16.625px}}body{background:#fff;margin:0}*,:after,:before{-webkit-box-sizing:border-box;box-sizing:border-box}a,a:active,a:hover{color:#e86231;text-decoration:none}a:hover{text-decoration:underline;cursor:pointer}h1{font-family:Raleway,"Didact Gothic",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:2.3em;font-weight:700;line-height:1.4;margin:10px 0}@media (max-width:768px){h1{font-size:2.6em;line-height:1.3;margin-top:0}}h2{font-family:Raleway,"Didact Gothic",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:1.7em;font-weight:600;margin:10px 0;line-height:1.3}@media (max-width:768px){h2{font-size:1.4em}}h4{text-transform:uppercase;letter-spacing:2.5px;font-size:.9em}ol li,ul li{margin-bottom:15px}.sub{font-size:.85em}.fade{opacity:.4}.p{display:block;margin:1em 0}.padbot{padding-bottom:30px}.page-content{position:relative;z-index:2;max-width:1350px;padding-right:75px;padding-left:75px;width:100%;margin:0 auto;min-height:80vh}@media (max-width:768px){.page-content{max-width:1240px;width:100%;margin:0 auto;padding:0}}.page-title{margin-top:20px;padding-top:20px;margin-bottom:30px}.centered-in-column{max-width:830px;width:100%;padding-left:40px;padding-right:40px;margin-left:auto;margin-right:auto}@media (max-width:768px){.centered-in-column{padding-left:0;padding-right:0}}.bubble-out-hover:after,.bubble-out-hover:before{content:"";z-index:1;position:absolute;top:50%;left:50%;border-radius:50%;width:0;height:0;-webkit-transition:.2s cubic-bezier(.215,.61,.355,1);-o-transition:.2s cubic-bezier(.215,.61,.355,1);transition:.2s cubic-bezier(.215,.61,.355,1);background:rgba(232,98,49,.1)}.bubble-out-hover.full-color:before{background:#e86231}.bubble-out-hover:after{background:#e86231;-webkit-transition:.3s cubic-bezier(.215,.61,.355,1);-o-transition:.3s cubic-bezier(.215,.61,.355,1);transition:.3s cubic-bezier(.215,.61,.355,1)}.bubble-out-hover.active:after,.bubble-out-hover:hover:before{top:-150%;left:-25%;width:150%;height:400%}.video-wrapper{position:relative;padding-bottom:56.25%;height:0}.video-wrapper iframe{position:absolute;top:0;left:0;width:100%;height:100%}.fade-enter-active,.fade-leave-active{-webkit-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.fade-enter,.fade-leave-to{opacity:0}.page-enter-active,.page-enter-active .page-content,.page-enter-active footer,.page-leave-active,.page-leave-active .page-content,.page-leave-active footer{-webkit-transition:opacity .4s,-webkit-transform .6s;transition:opacity .4s,-webkit-transform .6s;-o-transition:opacity .4s,transform .6s;transition:opacity .4s,transform .6s;transition:opacity .4s,transform .6s,-webkit-transform .6s}@media (max-width:768px){.page-enter-active,.page-enter-active .page-content,.page-enter-active footer,.page-leave-active,.page-leave-active .page-content,.page-leave-active footer{-webkit-transition:none;-o-transition:none;transition:none}}.page-leave-active,.page-leave-active .page-content,.page-leave-active footer{-webkit-transition:all .2s;-o-transition:all .2s;transition:all .2s}@media (max-width:768px){.page-leave-active,.page-leave-active .page-content,.page-leave-active footer{-webkit-transition:none;-o-transition:none;transition:none}}.page-enter .page-content,.page-enter footer,.page-enter.page-content{opacity:0;-webkit-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px)}.page-leave-active .page-content,.page-leave-active footer,.page-leave-active.page-content{opacity:0}.topline[data-v-fab9d4e8]{z-index:10;height:7.5px;background:#302c31;width:100%}.nuxt-content[data-v-fab9d4e8]{min-height:50vh;max-width:100vw}.lightbox[data-v-49ab3795]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.8);padding:2%;-webkit-transition:all .3s;-o-transition:all .3s;transition:all .3s;opacity:0;pointer-events:none;z-index:1000;cursor:-webkit-zoom-out;cursor:zoom-out}.lightbox.on[data-v-49ab3795]{opacity:1;pointer-events:auto}.lightboximage[data-v-49ab3795]{display:block;width:100%;height:100%;background-repeat:no-repeat;background-size:contain;background-position:50%;z-index:1}.loader[data-v-49ab3795]{position:absolute;top:50%;left:50%;width:50px;height:50px;border-radius:25px;border-color:transparent hsla(0,0%,93.3%,.8);border-style:solid;border-width:10px;z-index:2;-webkit-animation-name:spin-data-v-49ab3795;animation-name:spin-data-v-49ab3795;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear}@-webkit-keyframes spin-data-v-49ab3795{0%{-webkit-transform:translateX(-50%) translateY(-50%) rotate(0);transform:translateX(-50%) translateY(-50%) rotate(0)}to{-webkit-transform:translateX(-50%) translateY(-50%) rotate(1turn);transform:translateX(-50%) translateY(-50%) rotate(1turn)}}@keyframes spin-data-v-49ab3795{0%{-webkit-transform:translateX(-50%) translateY(-50%) rotate(0);transform:translateX(-50%) translateY(-50%) rotate(0)}to{-webkit-transform:translateX(-50%) translateY(-50%) rotate(1turn);transform:translateX(-50%) translateY(-50%) rotate(1turn)}}header[data-v-3c4fe28e]{font-weight:600;-webkit-transition:all .5s;-o-transition:all .5s;transition:all .5s}.header-wrapper[data-v-3c4fe28e],header[data-v-3c4fe28e]{width:100%;position:relative}.header-wrapper[data-v-3c4fe28e]{z-index:5;max-width:1350px;padding-right:75px;padding-left:75px;margin:0 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:500px;padding-top:50px}@media (max-width:768px){.header-wrapper[data-v-3c4fe28e]{max-width:1240px;width:100%;margin:0 auto;height:auto;padding:60px 20px 30px}}.header-content[data-v-3c4fe28e]{z-index:5;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-transition:all .5s;-o-transition:all .5s;transition:all .5s}a[data-v-3c4fe28e],a[data-v-3c4fe28e]:active,a[data-v-3c4fe28e]:hover,a[data-v-3c4fe28e]:visited{text-decoration:none;color:#302c31}a.highlight[data-v-3c4fe28e],a:active.highlight[data-v-3c4fe28e],a:hover.highlight[data-v-3c4fe28e],a:visited.highlight[data-v-3c4fe28e]{color:#e86231}.social[data-v-3c4fe28e]{margin-top:17.5px;-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;height:20px}.social a[data-v-3c4fe28e]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:15px}.social a img[data-v-3c4fe28e]{max-width:20px;max-height:20px}@media (max-width:768px){.social[data-v-3c4fe28e]{display:none}}h1[data-v-3c4fe28e]{line-height:1.2;margin-top:0;padding:0;margin-right:25px;margin-bottom:5px}.flex[data-v-3c4fe28e]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex}@media (max-width:768px){.flex[data-v-3c4fe28e]{display:grid}}a[data-v-ca9bb5c6],a[data-v-ca9bb5c6]:active,a[data-v-ca9bb5c6]:hover,a[data-v-ca9bb5c6]:visited{text-decoration:none;color:#e86231}a.active[data-v-ca9bb5c6],a:active.active[data-v-ca9bb5c6],a:hover.active[data-v-ca9bb5c6],a:visited.active[data-v-ca9bb5c6]{color:#fff}.tab-bar[data-v-ca9bb5c6]{margin-top:7.5px;position:relative}@media (max-width:768px){.tab-bar[data-v-ca9bb5c6]{margin-top:25px;margin-left:-5px}}.tab[data-v-ca9bb5c6]{position:relative;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:40px;margin:0 5px;line-height:1;padding:0 20px;border-radius:20px;-webkit-transition:color .2s,-webkit-box-shadow .35s;transition:color .2s,-webkit-box-shadow .35s;-o-transition:color .2s,box-shadow .35s;transition:color .2s,box-shadow .35s;transition:color .2s,box-shadow .35s,-webkit-box-shadow .35s;overflow:hidden;z-index:2}.tab.active[data-v-ca9bb5c6]{color:#fff}.tab div[data-v-ca9bb5c6]{position:relative;z-index:3}@media (max-width:768px){.tab[data-v-ca9bb5c6]{margin:0;padding:2.5px 10px}}.highlight[data-v-ca9bb5c6]{position:absolute;z-index:1;height:40px;border-radius:20px;background:#e86231;-webkit-transition:all .3s cubic-bezier(.215,.61,.355,1);-o-transition:all .3s cubic-bezier(.215,.61,.355,1);transition:all .3s cubic-bezier(.215,.61,.355,1)}.page-content[data-v-24237c54]{max-width:1350px;padding-right:75px;padding-left:75px;width:100%;margin:0 auto}@media (max-width:768px){.page-content[data-v-24237c54]{padding:0}}@media (max-width:768px){.page-content h1[data-v-24237c54]{font-size:1.6em;margin-top:0}}.page-content .post-column[data-v-24237c54]{width:100%}@media (max-width:768px){.page-content .content-column[data-v-24237c54]{max-width:1240px;padding-right:20px;padding-left:20px;width:100%;margin:0 auto}}img[data-v-98b7c76c]{width:100%;height:500px;background:#eee;-o-object-fit:cover;object-fit:cover}@media (max-width:768px){img[data-v-98b7c76c]{height:300px}}.post[data-v-5e144b9c]{padding-bottom:100px}.mp4-wrapper[data-v-5e144b9c]{position:relative;margin:40px auto;width:100%;max-width:100%}.mp4-wrapper video[data-v-5e144b9c]{display:block;border:1px solid #f0f0f0;max-width:100%;max-height:500px;margin:0 auto}.aside[data-v-5e144b9c]{opacity:.8;padding:0 40px;border-left:4px solid #302c31;margin:50px auto;position:relative}@media (max-width:768px){.aside[data-v-5e144b9c]{margin:30px -20px;padding:20px 20px 5px}}.asidetitle[data-v-5e144b9c]{display:block;margin-top:-5px;margin-bottom:5px;font-size:.75em;font-weight:700;text-transform:uppercase;opacity:.5}.img-divider[data-v-5e144b9c]{width:100%;height:6.5px;opacity:.2;margin:55px auto 45px}h3[data-v-5e144b9c]{margin-top:25px}.grid[data-v-5e144b9c]{margin:40px auto;display:grid;grid-template-columns:1fr 1fr 1fr}.grid>[data-v-5e144b9c]{max-width:100%}.tombstone[data-v-5e144b9c]{display:block;width:15px;height:15px;margin:100px auto 0}.post-image{position:relative;margin:40px 0;-webkit-transition:all .2s;-o-transition:all .2s;transition:all .2s}.post-image img{display:block;max-width:100%;max-height:500px;margin:0 auto;border:1px solid #f0f0f0;cursor:-webkit-zoom-in;cursor:zoom-in}.caption,.post-image img{-webkit-transition:opacity .2s;-o-transition:opacity .2s;transition:opacity .2s}.caption{margin:5px auto 0;max-width:750px;font-size:.75em;text-align:center;max-width:500px}.bottom-links[data-v-5e231129]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;line-height:1.4}.bottom-links a[data-v-5e231129],.bottom-links a[data-v-5e231129]:active,.bottom-links a[data-v-5e231129]:hover,.bottom-links a[data-v-5e231129]:visited{position:relative;background-size:cover;background-position:50%;color:#fff;text-decoration:none}.bottom-links a[data-v-5e231129]:active:after,.bottom-links a[data-v-5e231129]:after,.bottom-links a[data-v-5e231129]:hover:after,.bottom-links a[data-v-5e231129]:visited:after{content:"";position:absolute;top:0;left:0;bottom:0;right:0;z-index:2;background-color:rgba(34,34,34,.6);-webkit-transition:all .2s;-o-transition:all .2s;transition:all .2s}.bottom-links a[data-v-5e231129]:active:hover:after,.bottom-links a[data-v-5e231129]:hover:after,.bottom-links a[data-v-5e231129]:hover:hover:after,.bottom-links a[data-v-5e231129]:visited:hover:after{background-color:rgba(34,34,34,.3)}.bottom-links a span[data-v-5e231129],.bottom-links a:active span[data-v-5e231129],.bottom-links a:hover span[data-v-5e231129],.bottom-links a:visited span[data-v-5e231129]{position:relative;z-index:3;text-shadow:0 0 3px rgba(34,34,34,.2)}.bottom-links .sub[data-v-5e231129]{font-size:.9em;text-transform:uppercase;letter-spacing:1px;font-weight:800}.bottom-links .left[data-v-5e231129]{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.bottom-links .center[data-v-5e231129]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:.3;-ms-flex:.3;flex:.3}.bottom-links .right[data-v-5e231129]{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;text-align:right}.bottom-links>[data-v-5e231129]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:50px;background:#e86231;font-weight:600}[data-v-73488195]{text-align:center}footer[data-v-73488195]{width:100%;color:#999;background:#222;height:300px;position:relative}footer .footer-content[data-v-73488195]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;max-width:1350px;padding-right:75px;padding-left:75px;width:100%;margin:0 auto;height:100%}footer a[data-v-73488195],footer a[data-v-73488195]:active,footer a[data-v-73488195]:hover{color:#ea6c3f}</style><link rel="preload" href="/_nuxt/static/1600458211/posts/timezonebot/state.js" as="script"><link rel="preload" href="/_nuxt/static/1600458211/posts/timezonebot/payload.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div class="page" data-v-fab9d4e8><div class="lightbox" data-v-49ab3795 data-v-fab9d4e8><!----> <!----></div> <div class="topline" data-v-fab9d4e8></div> <header class="header-wrapper" data-v-3c4fe28e data-v-fab9d4e8><div class="header-content" data-v-3c4fe28e><div class="flex" data-v-3c4fe28e><div data-v-3c4fe28e><h1 data-v-3c4fe28e><a href="/" data-v-3c4fe28e>Jasper Stephenson</a></h1> <div data-v-3c4fe28e>
          UX engineer, friendly ghost.</div></div> <div class="tab-bar" data-v-ca9bb5c6 data-v-3c4fe28e><a href="/" id="projects" class="tab bubble-out-hover active" data-v-ca9bb5c6><div data-v-ca9bb5c6>Projects</div></a> <a href="/labs" id="labs" class="tab bubble-out-hover" data-v-ca9bb5c6><div data-v-ca9bb5c6>Labs</div></a> <a href="/writing" id="writing" class="tab bubble-out-hover" data-v-ca9bb5c6><div data-v-ca9bb5c6>Writing</div></a> <a href="/about" id="about" class="tab bubble-out-hover" data-v-ca9bb5c6><div data-v-ca9bb5c6>About</div></a></div> <div class="social" data-v-3c4fe28e><a href="https://github.com/midblue" target="_blank" data-v-3c4fe28e><img src="/_nuxt/img/icon-github.5633a57.svg" data-v-3c4fe28e></a> <a href="mailto:jasperstephenson@gmail.com" data-v-3c4fe28e><img src="/_nuxt/img/icon-email.02bcf3a.svg" data-v-3c4fe28e></a></div></div></div></header> <div class="nuxt-content" data-v-fab9d4e8><div data-v-24237c54 data-v-fab9d4e8><div class="page-content" data-v-24237c54><div class="post-column" data-v-24237c54><!----> <div data-v-98b7c76c data-v-24237c54><img src="/posts/timezonebot/header.png" alt="Header image â€“ A Discord Timezone Bot for Multinational Groups" data-v-98b7c76c></div> <div class="content-column" data-v-24237c54><h1 class="page-title centered-in-column" data-v-24237c54>A Discord Timezone Bot for Multinational Groups</h1> <article class="post" data-v-5e144b9c data-v-24237c54><!----> <!----> <!----> <!----> <p class="centered-in-column" data-v-5e144b9c><a href="https://discord.com/api/oauth2/authorize?client_id=437598259330940939&permissions=68672&scope=bot" target="_blank">Add TimezoneBot to your Discord server now!</a></p><p class="centered-in-column" data-v-5e144b9c><a href="https://github.com/midblue/timezone-bot" target="_blank">Check out this project on Github!</a></p><p class="centered-in-column" data-v-5e144b9c>My closest friends from my school days and I keep in touch regularly through <a href="https://discordapp.com" target="_blank">Discord</a>, a Slack-esque chat tool focused around gaming. As we've gotten older, we've begun to spread out all over the world, which that means that many of us live in vastly different time zones. Very often we resort to googling what time it is in Japan, or in Oregon, or in North Carolina. I decided that there had to be a simple way to ease our timezone woes that wouldn't require trips to the browser, or even knowing where a person was currently located.</p><p class="centered-in-column" data-v-5e144b9c>Thus, with the goal of helping our group communicate and understand each others' context better, criteria for success emerged.</p> <!----> <!---->  <!----> <!----> <!----><!----> <!----> <!----> <!---->  <!----> <div class="centered-in-column" data-v-5e144b9c><!----> <ol data-v-5e144b9c><li data-v-5e144b9c>Provide accurate timezone information for specific users passively, without being asked,</li><li data-v-5e144b9c>Allow users to manage their own timezone,</li><li data-v-5e144b9c>Work consistently across channels and through server restarts,</li><li data-v-5e144b9c>(Most importantly,) Don't be annoying, and</li><li data-v-5e144b9c>Stay entirely free to run.</li></ol></div>  <!----> <!----> <!----><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzNweCIgaGVpZ2h0PSIxMXB4IiB2aWV3Qm94PSIwIDAgNzMgMTEiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjEgKDM5MDEyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT50aHJlZXRpY2tzPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InRocmVldGlja3MiIGZpbGw9IiM1NDU0NTQiPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsIiBjeD0iNS41IiBjeT0iNS41IiByPSI1LjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsLUNvcHkiIGN4PSIzNi41IiBjeT0iNS41IiByPSI1LjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsLUNvcHktMiIgY3g9IjY3LjUiIGN5PSI1LjUiIHI9IjUuNSI+PC9jaXJjbGU+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=" class="img-divider" data-v-5e144b9c> <h2 class="centered-in-column" data-v-5e144b9c>Getting Started</h2> <!----> <!---->  <!----> <!---->  <!----> <!----> <!----><!----> <!----> <!----> <!----> <p class="centered-in-column" data-v-5e144b9c>Luckily for me, Discord has a handy bot API that lets me hook into incoming messages and send replies (among other things), and there are nice libraries such as <a href="https://discord.js.org/#/" target="_blank">Discord.js</a> that make bot programming easier.</p> <!----> <!---->  <!----> <!----> <!----><!----> <!----> <!----> <!---->  <!----> <!----> <div class="post-image" data-v-5e144b9c><img src="/posts/timezonebot/2.png" alt="Checking up on what time it is for everyone."> <div class="caption"><span>Checking up on what time it is for everyone.</span> <!----></div></div> <!----> <!----> <!----><!----> <!----> <!----> <!----> <p class="centered-in-column" data-v-5e144b9c>I established some basic commands such as !set <location>, !all/!users , !time <user , city, or country>, and of course, !help. These allow for direct interaction with the bot, but the real core of the bot comes in when users @-message one another and the bot chimes in with the current time in the recipient's location. With those features, I had goals #1 and #2 down.</user></location></p><p class="centered-in-column" data-v-5e144b9c>For #3, I implemented an in-memory redis store for { locationName: timezone } pairs with a 24-hour expiration time (since timezones can change, think Daylight Savings Time), and a MYSQL database for static coordinate data and user settings.</p> <!----> <!---->  <!----> <!----> <!----><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzNweCIgaGVpZ2h0PSIxMXB4IiB2aWV3Qm94PSIwIDAgNzMgMTEiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjEgKDM5MDEyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT50aHJlZXRpY2tzPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InRocmVldGlja3MiIGZpbGw9IiM1NDU0NTQiPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsIiBjeD0iNS41IiBjeT0iNS41IiByPSI1LjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsLUNvcHkiIGN4PSIzNi41IiBjeT0iNS41IiByPSI1LjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsLUNvcHktMiIgY3g9IjY3LjUiIGN5PSI1LjUiIHI9IjUuNSI+PC9jaXJjbGU+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=" class="img-divider" data-v-5e144b9c> <h2 class="centered-in-column" data-v-5e144b9c>How to Avoid Being Annoying</h2> <!----> <!---->  <!----> <!---->  <!----> <!----> <!----><!----> <!----> <!----> <!---->  <!----> <!----> <div class="post-image" data-v-5e144b9c><img src="/posts/timezonebot/3.jpg" alt="I'm always here, buzzing around your head!"> <div class="caption"><span>I'm always here, buzzing around your head!</span> <span>
      (
      <a href="https://unsplash.com/photos/ljDl1LoPxRY?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText" target="_blank">Source</a>)
    </span></div></div> <!----> <!----> <!----><!----> <!----> <!----> <!----> <p class="centered-in-column" data-v-5e144b9c>Bots in a chat channel can be like flies hanging around the edges of your conversation, often serving more as a distraction than a help. Thus, it was imperative to me that my timezone bot be very careful about when it sends messages and how it chooses to interpret messages from humans. There were two major steps I took to make the bot "just work" without a learning curve, and to minimize unuseful messages.</p> <!----> <!---->  <!----> <!----> <!----><!----> <!----> <h3 class="centered-in-column" data-v-5e144b9c>Timely Messaging</h3> <!---->  <!----> <!---->  <!----> <!----> <!----><!----> <!----> <!----> <!----> <p class="centered-in-column" data-v-5e144b9c>There are only certain times when users need to know their chat partner's time zone. For example, they don't need to know it when the user is in a very close-by timezone to them. They also usually don't need to know it when they're already in conversation with that person, or when they're not talking directly to that person. With that in mind, I implemented a system that would interject with a user's timezone ONLY if:</p> <!----> <!---->  <!----> <!----> <!----><!----> <!----> <!----> <!---->  <!----> <div class="centered-in-column" data-v-5e144b9c><!----> <ol data-v-5e144b9c><li data-v-5e144b9c>The sender directly messaged the recipient using @</li><li data-v-5e144b9c>The sender's timezone is more than 2 hours apart from the targeted recipient</li><li data-v-5e144b9c>The recipient has not sent a message in the last hour</li><li data-v-5e144b9c>The recipient's timezone has not been announced in the channel in the past hour</li></ol></div>  <!----> <!----> <!----><!----> <!----> <!----> <!----> <p class="centered-in-column" data-v-5e144b9c>This created a nice balance of avoiding unnecessary notifications while passively providing context to conversations across countries.</p> <!----> <!---->  <!----> <!----> <!----><!----> <!----> <!----> <!---->  <!----> <!----> <div class="post-image" data-v-5e144b9c><img src="/posts/timezonebot/1.png" alt="A user in Japan messages a user in Raleigh."> <div class="caption"><span>A user in Japan messages a user in Raleigh.</span> <!----></div></div> <!----> <!----> <!----><!----> <!----> <h3 class="centered-in-column" data-v-5e144b9c>Input Consciousness</h3> <!---->  <!----> <!---->  <!----> <!----> <!----><!----> <!----> <!----> <!----> <p class="centered-in-column" data-v-5e144b9c>Early tests showed that most of my American friends guessed their timezone codes (PDT, JST, etc) incorrectly. On top of that, many of these codes overlap! In response, I removed the need to know the code at all, utilizing the <a href="https://developers.google.com/maps/documentation/geocoding/start" target="_blank">Google Geocoding API</a> to instead get latitude and longitude coordinates from a natural-language place name. Those coordinates then feed into the <a href="https://developers.google.com/maps/documentation/timezone/start" target="_blank">Google Timezone API</a> to give me back the current timezone in the location they specified. The end result is that instead of using "!set PDT" to set a member's timezone to Pacific Daylight Time (who can remember if it's daylight savings time or not anyway??), now simply typing the location's name would successfully set the user to their current time zone, i.e. "!set portland" or "!set vancouver". The same system works for checking times in those locations.</p> <!----> <!---->  <!----> <!----> <!----><!----> <!----> <!----> <!---->  <!----> <!----> <div class="post-image" data-v-5e144b9c><img src="/posts/timezonebot/4.png" alt="An example of setting time zone by semantic name."> <div class="caption"><span>An example of setting time zone by semantic name.</span> <!----></div></div> <!----> <!----> <!----><!----> <!----> <!----> <!----> <p class="centered-in-column" data-v-5e144b9c>Another common issue found in testing was in checking the time zone of a specific user by name. Some members of our channel have apostrophes and other difficult-to-remember characters in their names, and typing another user's name perfectly proved to be tricky. Thus, I implemented a fuzzy search to find the most similar name to the entered text. For example a user named "It's Me, Phil!" could be found with the command "!user its me phil" or even "!user itz me ph".</p> <!----> <!---->  <!----> <!----> <!----><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzNweCIgaGVpZ2h0PSIxMXB4IiB2aWV3Qm94PSIwIDAgNzMgMTEiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjEgKDM5MDEyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT50aHJlZXRpY2tzPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InRocmVldGlja3MiIGZpbGw9IiM1NDU0NTQiPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsIiBjeD0iNS41IiBjeT0iNS41IiByPSI1LjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsLUNvcHkiIGN4PSIzNi41IiBjeT0iNS41IiByPSI1LjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsLUNvcHktMiIgY3g9IjY3LjUiIGN5PSI1LjUiIHI9IjUuNSI+PC9jaXJjbGU+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=" class="img-divider" data-v-5e144b9c> <h2 class="centered-in-column" data-v-5e144b9c>Finally: Freedom!</h2> <!----> <!---->  <!----> <!---->  <!----> <!----> <!----><!----> <!----> <!----> <!----> <p class="centered-in-column" data-v-5e144b9c>As cool as this bot is, I'm not interested in paying big bucks in API fees to make all these timezone checks. To address that, the bot caches all past semantic location checks and location/coordinate pairs to minimize API calls. On a long enough timeline, the bot will encounter very few never-before-seen location requests, dropping API calls for location coordinates to near zero. We also have built-in hard limits before the call volume crosses into paid territory.</p><p class="centered-in-column" data-v-5e144b9c>For the server, had I not already had a dedicated server running on hand, I would have looked into using AWS to run my bot, calling simple lambda scripts to handle message events. As it is, I'm lucky enough to have a simple server setup in-house, so that hasn't been an issue.</p> <!----> <!---->  <!----> <!----> <!----><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzNweCIgaGVpZ2h0PSIxMXB4IiB2aWV3Qm94PSIwIDAgNzMgMTEiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjEgKDM5MDEyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT50aHJlZXRpY2tzPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InRocmVldGlja3MiIGZpbGw9IiM1NDU0NTQiPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsIiBjeD0iNS41IiBjeT0iNS41IiByPSI1LjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsLUNvcHkiIGN4PSIzNi41IiBjeT0iNS41IiByPSI1LjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsLUNvcHktMiIgY3g9IjY3LjUiIGN5PSI1LjUiIHI9IjUuNSI+PC9jaXJjbGU+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=" class="img-divider" data-v-5e144b9c> <!----> <!----> <!---->  <!----> <!---->  <!----> <!----> <!----><!----> <!----> <!----> <!---->  <!----> <!----> <div class="post-image" data-v-5e144b9c><img src="/posts/timezonebot/5.jpg" alt=""> <div class="caption"><span></span> <span>
      (
      <a href="https://unsplash.com/photos/107PMV1f1R0?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText" target="_blank">Source</a>)
    </span></div></div> <!----> <!----> <!----><!----> <!----> <!----> <!----> <p class="centered-in-column" data-v-5e144b9c>Based on my community's reaction, I'd say that this bot has helped our multinational group communicate better, and managed to add to the conversation without distracting from it.</p><p class="centered-in-column" data-v-5e144b9c>You can add TimezoneBot to your server by clicking <a href="https://discord.com/api/oauth2/authorize?client_id=437598259330940939&permissions=68672&scope=bot" target="_blank">this link</a>, and the source of this project is publicly available <a href="https://github.com/midblue/timezone-bot" target="_blank">here</a>. Feel free to take a look, or even spin up a copy for your own Discord channel! Thanks for reading!</p> <!----> <!---->  <!----> <!----> <!----> <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iN3B4IiBoZWlnaHQ9IjdweCIgdmlld0JveD0iMCAwIDcgNyIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDMuMSAoMzkwMTIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPlJlY3RhbmdsZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIGZpbGw9IiNCNUI1QjUiIGZpbGwtcnVsZT0ibm9uemVybyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMy41MDAwMDAsIDMuNTAwMDAwKSByb3RhdGUoLTQ1LjAwMDAwMCkgdHJhbnNsYXRlKC0zLjUwMDAwMCwgLTMuNTAwMDAwKSAiIHg9IjEiIHk9IjEiIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPjwvcmVjdD4KICAgIDwvZz4KPC9zdmc+" class="tombstone" data-v-5e144b9c></article></div></div></div> <div class="bottom-links" data-v-5e231129 data-v-24237c54><a href="/posts/internalapp" class="right" style="background-image:url(/posts/internalapp/header.jpg)" data-v-5e231129><span class="sub fade" data-v-5e231129>Next post:</span> <span data-v-5e231129>Bringing UX Research to an Unfamiliar Audience</span></a> <a href="/posts/positivity" class="left" style="background-image:url(/posts/positivity/header.jpg)" data-v-5e231129><span class="sub fade" data-v-5e231129>Previous post:</span> <span data-v-5e231129>Positivity: Using Bracket Data to Encourage Low-Placing Players</span></a></div></div></div> <footer data-v-73488195 data-v-fab9d4e8><div class="footer-content" data-v-73488195><div data-v-73488195>
      All text & work by Jasper Stephenson.
    </div> <div class="padbot" data-v-73488195>
      Static site built using <a href="https://nuxtjs.org/guide" target="_blank" data-v-73488195>Nuxt.js</a> and hosted with <a href="https://github.com/midblue/midblue.github.io" target="_blank" data-v-73488195>Github Pages</a>.
    </div> <div class="padbot" data-v-73488195><!----></div> <div data-v-73488195><a href="mailto:jasperstephenson@gmail.com" data-v-73488195>Get in touch!</a></div></div></footer></div></div></div><script defer src="/_nuxt/static/1600458211/posts/timezonebot/state.js"></script><script src="/_nuxt/9c8e31f.js" defer></script><script src="/_nuxt/41f2d75.js" defer></script><script src="/_nuxt/8de7412.js" defer></script><script src="/_nuxt/002d5ab.js" defer></script><script src="/_nuxt/4dd237e.js" defer></script>
  </body>
</html>
