(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{246:function(t,e,o){var content=o(270);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(135).default)("04040f92",content,!0,{sourceMap:!1})},252:function(t,e,o){"use strict";o.r(e);o(37),o(34),o(44),o(15),o(67),o(35),o(68);var n=o(25),r=(o(79),o(80),o(27),o(64),o(267),o(253)),c=o(244),d=o(180);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var h=18e5,f={ok:2,again:.1},w=[300,3e4],v={components:{Card:r.default,AutoSpeaker:c.default},props:{reverse:{},front:{},back:{},id:{},set:{},timeMod:{default:0},nextReview:{default:0},totalReviews:{default:0},imageURL:{},created:{default:function(){return(new Date).getTime()}},ok:{default:0},again:{default:0}},data:function(){return{showBack:!1,startedCardTime:new Date,revealedBackTime:new Date,averageTime:7e3,reviewsSoFar:0,metaDown:!1,textToSpeak:"",isFirefox:navigator.userAgent.toLowerCase().includes("firefox")}},computed:{settings:function(){return this.$store.state.setList[this.$store.state.currentSetId].settings},isStudying:function(){return"study"===this.$store.state.appState},isEditing:function(){return"editCard"===this.$store.state.appState},isMobile:function(){return this.$store.state.isMobile},isEditingText:function(){return this.$store.state.isEditingText},isNewCard:function(){return!this.totalReviews||0===this.totalReviews},timeBonuses:function(){return{ok:this.getTimeBonus("ok"),again:this.getTimeBonus("again")}},formattedTimeBonuses:function(){var t=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.timeBonuses);for(var e in t)t[e]=Math.ceil(t[e]/1e3/60)+"m";return t}},watch:{id:function(t){this.startedCardTime=new Date,this.showBack=!1,this.settings.autoSpeakFront&&(this.textToSpeak=(this.reverse?this.back:this.front).replace(/\n.*/g,""));var e=this.$el.getBoundingClientRect().top+window.scrollY-10;e>window.scrollY+100||window.scrollTo(0,e)}},mounted:function(){window.addEventListener("keydown",this.keyDown),window.addEventListener("keyup",this.keyUp),this.settings.autoSpeakFront&&(this.textToSpeak=(this.reverse?this.back:this.front).replace(/\n.*/g,""))},beforeDestroy:function(){window.removeEventListener("keydown",this.keyDown),window.removeEventListener("keyup",this.keyUp)},methods:{showBackAction:function(){this.showBack=!0,this.revealedBackTime=new Date;var t=this.$refs.card.$el.getBoundingClientRect(),e=t.top+window.scrollY+t.height-window.innerHeight+(this.isMobile?70:120);e<=0||e<window.scrollY||window.scrollTo(0,e)},answer:function(t){this.showBack=!1,this.reviewsSoFar++;var e=this.revealedBackTime-this.startedCardTime,o=e<w[0]||e>w[1];o||(this.averageTime=this.averageTime*((this.reviewsSoFar-1)/this.reviewsSoFar)+e*(1/this.reviewsSoFar));var n={};n.answerTime=o?0:1-(e-w[0])/w[1];n.maturity=this.totalReviews>30?1:this.totalReviews/30;var r=.2*(this.ok||0)/(this.again||1);n.successRatio=r>1?1:r;var c=this.front.length+this.back.length-5;c<0&&(c=0);n.length=c>40?1:c/40;var l={answerTime:1,maturity:.8,successRatio:.8,length:.3},h=this.timeBonuses[t];for(var f in n)console.log(f+" bonus:",(n[f]*l[f]).toFixed(2)),h+=n[f]*l[f]*this.timeBonuses[t];var v=1-Math.min(.8,(Date.now()-(this.nextReview||Date.now()))/2592e6);console.log("overdue multiplier:",v.toFixed(2)),h*=v,h=Math.floor(h),console.log("pre-length-scaling time mod:",Object(d.msToString)(h)),(h=Math.floor(h*(-1*h/3e12+1)))<-1e3&&(h=3e12),h<1&&(h=1);var m=36e6;this.settings.oncePerDay&&h<m&&(h=m),console.log("old time mod:",Object(d.msToString)(this.timeMod)),console.log("new time mod:",Object(d.msToString)(h)),console.log("");var k=new Date(Date.now()+h).getTime(),y=this.totalReviews+1,_=this.again+("again"===t?1:0),T=y-_;this.$store.commit("studyCard",{id:this.id,lastStudied:Date.now(),timeMod:h,nextReview:k,totalReviews:y,ok:T,again:_}),this.$emit("done",h)},getTimeBonus:function(t){var e=(!this.timeMod||isNaN(this.timeMod)?0:this.timeMod)*f[t];return e<h&&(e=h),"again"===t&&(e=0),e},keyDown:function(t){var e=this;"Control"===t.key&&(this.metaDown=!0),"Meta"===t.key?this.metaDown=!0:"i"===t.key&&this.metaDown&&(this.$store.commit("updateCard",{id:this.id,imageURL:"loading"}),Object(d.getRandomImage)(this.front||this.back).then((function(image){image&&e.$store.commit("updateCard",{id:e.id,imageURL:image})}))),this.isStudying&&!this.isEditingText&&("1"===t.key&&this.showBack?this.answer("again"):" "===t.key||"Enter"===t.key?(t.preventDefault(),t.stopPropagation(),this.showBack?this.answer("ok"):this.showBackAction()):"2"===t.key&&this.showBack?this.answer("ok"):"p"===t.key&&this.$emit("postpone"))},keyUp:function(t){"Control"===t.key&&(this.metaDown=!1),"Meta"===t.key&&(this.metaDown=!1)}}},m=v,k=(o(269),o(52)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.settings.languageTools?o("AutoSpeaker",{attrs:{text:t.textToSpeak,language:t.settings.languageTools}}):t._e(),t._v(" "),o("Card",{ref:"card",staticClass:"card",attrs:{id:t.id,front:t.front,back:t.back,reverse:t.reverse,"time-mod":t.timeMod,"next-review":t.nextReview,"total-reviews":t.totalReviews,created:t.created,ok:t.ok,again:t.again,"for-study":!0,"show-back":t.showBack,set:t.set,"image-u-r-l":t.imageURL},on:{showBack:t.showBackAction}}),t._v(" "),o("div",{staticClass:"buttonlist primary"},[t.showBack?[void 0!==t.timeBonuses.again?o("button",{key:"again",on:{click:function(e){return t.answer("again")}}},[t._v("\n        Wrong\n        "),t._m(1)]):t._e(),t._v(" "),t.timeBonuses.ok?o("button",{key:"ok",on:{click:function(e){return t.answer("ok")}}},[t._v("\n        Right\n        "),o("div",[o("kbd",{staticClass:"keyicon"},[t._v("2")]),t._v(" "),t.isMobile?t._e():o("span",[t._v("/")]),t._v(" "),o("kbd",{staticClass:"keyicon"},[t._v("Space")])])]):t._e()]:o("button",{key:"showback",staticClass:"showback",on:{click:t.showBackAction}},[t._v("\n      Show Back\n      "),t._m(0)])],2),t._v(" "),o("br"),t._v(" "),o("div",{staticClass:"centertext"},[o("button",{staticStyle:{"padding-right":"15%","padding-left":"15%"},on:{click:function(e){return t.$emit("postpone")}}},[t._v("\n      Postpone\n      "),t._m(2)])])],1)}),[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("kbd",{staticClass:"keyicon"},[t._v("Space")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("kbd",{staticClass:"keyicon"},[t._v("1")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("span",{staticClass:"keyicon"},[t._v("P")])])}],!1,null,"652a5b0e",null);e.default=component.exports;installComponents(component,{AutoSpeaker:o(244).default,Card:o(253).default})},267:function(t,e,o){"use strict";var n=o(5),r=o(1),c=o(4),d=o(55),l=o(268),h=o(183),f=o(7),w=r.RangeError,v=r.String,m=Math.floor,k=c(h),y=c("".slice),_=c(1..toFixed),T=function(t,e,o){return 0===e?o:e%2==1?T(t,e-1,o*t):T(t*t,e/2,o)},x=function(data,t,e){for(var o=-1,n=e;++o<6;)n+=t*data[o],data[o]=n%1e7,n=m(n/1e7)},B=function(data,t){for(var e=6,o=0;--e>=0;)o+=data[e],data[e]=m(o/t),o=o%t*1e7},S=function(data){for(var t=6,s="";--t>=0;)if(""!==s||0===t||0!==data[t]){var e=v(data[t]);s=""===s?e:s+k("0",7-e.length)+e}return s};n({target:"Number",proto:!0,forced:f((function(){return"0.000"!==_(8e-5,3)||"1"!==_(.9,0)||"1.25"!==_(1.255,2)||"1000000000000000128"!==_(0xde0b6b3a7640080,0)}))||!f((function(){_({})}))},{toFixed:function(t){var e,o,n,r,c=l(this),h=d(t),data=[0,0,0,0,0,0],f="",m="0";if(h<0||h>20)throw w("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return v(c);if(c<0&&(f="-",c=-c),c>1e-21)if(o=(e=function(t){for(var e=0,o=t;o>=4096;)e+=12,o/=4096;for(;o>=2;)e+=1,o/=2;return e}(c*T(2,69,1))-69)<0?c*T(2,-e,1):c/T(2,e,1),o*=4503599627370496,(e=52-e)>0){for(x(data,0,o),n=h;n>=7;)x(data,1e7,0),n-=7;for(x(data,T(10,n,1),0),n=e-1;n>=23;)B(data,1<<23),n-=23;B(data,1<<n),x(data,1,1),B(data,2),m=S(data)}else x(data,0,o),x(data,1<<-e,0),m=S(data)+k("0",h);return m=h>0?f+((r=m.length)<=h?"0."+k("0",h-r)+m:y(m,0,r-h)+"."+y(m,r-h)):f+m}})},268:function(t,e,o){var n=o(4);t.exports=n(1..valueOf)},269:function(t,e,o){"use strict";o(246)},270:function(t,e,o){var n=o(134)(!1);n.push([t.i,".card[data-v-652a5b0e]{margin-bottom:20px}.showback[data-v-652a5b0e]{width:100%}@media(max-width:768px){.buttonlist.primary[data-v-652a5b0e]{position:relative;z-index:1000;width:100%;border-radius:0;position:fixed;bottom:0;left:0;border-bottom:none}.buttonlist.primary button[data-v-652a5b0e]{background:#eee;border-radius:0}.buttonlist.primary button[data-v-652a5b0e]:hover{background:#ddd}}",""]),t.exports=n}}]);