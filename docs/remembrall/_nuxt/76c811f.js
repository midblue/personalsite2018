(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{138:function(e,t){e.exports={ak:"AIzaSyBq6NsJZ7lcXK4_9m95RBI7GLaoBqgGNFE",ad:"remembrall-522f0.firebaseapp.com",pid:"remembrall-522f0",sb:"remembrall-522f0.appspot.com",GOOGLE:"AIzaSyCOXGdZH5uF1O6jmXLc80PSbzSJyVRzdT0",GSEARCH:"010322187392027779852:etpv6mruimg",rapidAPI:"84ff2428fdmshb42d48d6af5a776p10f852jsn922e80e12a04"}},180:function(e,t,r){r(15),r(27),r(53),r(106),r(64);r(138);function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=encodeURI(e);return new Promise((function(e){try{fetch("https://us-central1-general-prototype-project.cloudfunctions.net/cors-proxy?url=https://www.flickr.com/search/?text=".concat(n)).then((function(e){return e.text()})).then((function(html){for(var n=[],c=/photo-list-photo-view[^>]*url\((.*)\)/g,o=c.exec(html);o;)n.push("https:".concat(o[1])),o=c.exec(html);n=n.slice(r%n.length).slice(0,t),e(n)}))}catch(t){e([])}}))}function c(text){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return text.replace(/\(.*\)/g,"").replace(/[*_-]/g,"").split("\n")[0].toLowerCase().split(e?/[/;.,?¿!+()\[\]{}<>]/:/[  ・/;.,?¿!+()\[\]{}<>]/).reduce((function(e,t){return t.length>e.length?t:e}),"")}t.msToString=function(e){return(e=parseInt(e))<1e3?"0s":e<6e4?Math.round(e/1e3)+"s":e<36e5?Math.round(e/1e3/60)+"m":e<864e5?Math.round(e/1e3/60/60)+"h":e<2592e6?Math.round(e/1e3/60/60/24)+"d":e<31104e6?Math.round(e/1e3/60/60/24/30)+"mo":Math.round(e/1e3/60/60/24/365)+"y"},t.findImagesForKeyword=n,t.getKeyWord=c;var o=1;t.getRandomImage=function(text){var e=c(text,!0);return o=o%99+1,new Promise((function(t){n(e,1,o).then((function(e){e?t(e[Math.floor(Math.random()*e.length)]):t()}))}))},t.getNumberDueInSet=function(e){var t=Date.now(),r=e.settings?e.settings.maxNewPerDay:999999,n=e.newToday;if(!e.cards)return 0;var c=Math.min(e.cards.reduce((function(e,r){return r.nextReview<t&&r.totalReviews&&r.totalReviews>0&&!r.suspended?e+1:e}),0),e.settings&&e.settings.maxReviewsPerDay?e.settings.maxReviewsPerDay-e.reviewsToday:999999),o=e.cards.reduce((function(e,t){return t.totalReviews&&0!==t.totalReviews||t.suspended?e:e+1}),0);return c+Math.min(r-Math.min(n,r),o)}},185:function(e,t,r){var n,c=r(234);function o(){if("object"===("undefined"==typeof localStorage?"undefined":c(localStorage)))try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage"),n=!0}catch(e){n=!1,console.log("LocalStorage is unavailable. Reverting to Cookies as a fallback.")}else n=!1}function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new Date;n.setTime(n.getTime()+31536e6*(r?-1:1));var c="expires="+n.toUTCString();document.cookie=e+"="+t+";"+c+";path=/"}r(37),r(27),r(106),t.list=function(e){for(var t=[],r=Object.keys(localStorage),i=r.length;i--;)t.push(localStorage.getItem(r[i]));return t},t.set=function(e,t){var r=Array.isArray(t)||"object"===c(t)?encodeURI(JSON.stringify(t)):t;void 0===n&&o(),n?localStorage.setItem(e,r):d(e,t)},t.remove=function(e){void 0===n&&o(),n?localStorage.removeItem(e):d(e,"",!0)},t.get=function(e){void 0===n&&o();var t=n?localStorage.getItem(e):function(e){for(var t=e+"=",r=decodeURIComponent(document.cookie).split(";"),i=0;i<r.length;i++){for(var n=r[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""}(e);return t}},189:function(e,t,r){r(190),e.exports=r(191)},232:function(e,t,r){"use strict";r.r(t);r(34),r(67),r(68);var n=r(25),c=(r(45),r(37),r(182),r(15),r(233),r(44),r(35),r(36),r(43)),o=r(0);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var l=r(185),S=r(235),v=r(180).getNumberDueInSet;function m(){return{id:Date.now(),name:"New set",settings:{maxNewPerDay:10,maxReviewsPerDay:50,languageTools:"none",studyReverse:!1},lastUpdated:Date.now(),newToday:0,reviewsToday:0,cards:[]}}o.a.use(c.a),t.default=function(){return new c.a.Store({state:{currentUser:null,setList:{},currentSetId:null,appState:"study",isMobile:!1,pauseDbSets:!1,isEditingText:!1},mutations:{setUsername:function(e,t){e.currentUser=t,l.set("currentUser",t)},setSetList:function(e,t){e.setList=t},setCurrentSetId:function(e,t){e.currentSetId=t,"user"===e.appState&&(e.appState="study"),l.set("currentSetId",t)},logOut:function(e){l.remove("currentUser"),l.remove("currentSetId"),e.currentUser=null,e.setList=[],e.currentSetId=null},setAppWidth:function(e,t){e.isMobile=parseInt(t)<=768},setPauseDbSets:function(e,t){e.pauseDbSets=t},setIsEditingText:function(e,t){e.isEditingText=t},setAppState:function(e,t){e.appState=t||"study"},updateSetName:function(e,t){o.a.set(e.setList[e.currentSetId],"name",t),o.a.set(e.setList[e.currentSetId],"lastUpdated",Date.now()),e.pauseDbSets||S.updateSet(e.currentUser,{id:e.currentSetId,name:e.setList[e.currentSetId].name,lastUpdated:e.setList[e.currentSetId].lastUpdated},"updating set name")},updateSetSettings:function(e,t){for(var param in t)e.setList[e.currentSetId].settings||(e.setList[e.currentSetId].settings={}),o.a.set(e.setList[e.currentSetId].settings,param,t[param]);o.a.set(e.setList[e.currentSetId],"lastUpdated",Date.now()),e.pauseDbSets||S.updateSet(e.currentUser,{id:e.currentSetId,settings:e.setList[e.currentSetId].settings,lastUpdated:e.setList[e.currentSetId].lastUpdated},"updating set settings")},addSet:function(e){var t=m();e.setList[t.id]=t,e.currentSetId=t.id,l.set("currentSetId",t.id),e.pauseDbSets||S.setSet(e.currentUser,t)},uploadSet:function(e,t){var r=m();for(var n in t)"id"!==n&&(r[n]=t[n]);e.setList[r.id]=r,e.currentSetId=r.id,l.set("currentSetId",r.id),e.pauseDbSets||S.setSet(e.currentUser,r)},deleteSet:function(e,t){o.a.delete(e.setList,t),e.currentSetId=Object.keys(e.setList)[0],e.pauseDbSets||S.deleteSet(e.currentUser,t)},resetSetDay:function(e,t){o.a.set(e.setList[t],"newToday",0),o.a.set(e.setList[t],"reviewsToday",0),o.a.set(e.setList[t],"lastUpdated",Date.now()),e.pauseDbSets||S.updateSet(e.currentUser,{id:t,newToday:0,reviewsToday:0,lastUpdated:e.setList[t].lastUpdated},"resetting set day")},addCard:function(e,t){var r=e.setList[e.currentSetId].cards||[];r.push(f(f({},t),{},{id:Date.now()})),o.a.set(e.setList[e.currentSetId],"cards",r),o.a.set(e.setList[e.currentSetId],"lastUpdated",Date.now()),e.pauseDbSets||S.updateSet(e.currentUser,{id:e.currentSetId,cards:e.setList[e.currentSetId].cards,lastUpdated:e.setList[e.currentSetId].lastUpdated},"adding card")},updateCard:function(e,t){var r;for(var n in e.setList)if(e.setList[n].cards&&e.setList[n].cards.find((function(e){return e.id===t.id}))){r=parseInt(n);break}if(!r)return console.log("No card found by the id",t.id,"in any deck.");var c=e.setList[r].cards.findIndex((function(e){return e.id===t.id}));if(void 0!==c)for(var param in t)o.a.set(e.setList[r].cards[c],param,t[param]);o.a.set(e.setList[r],"lastUpdated",Date.now()),e.pauseDbSets||S.updateSet(e.currentUser,{id:r,cards:e.setList[r].cards,lastUpdated:e.setList[r].lastUpdated},"updating card")},studyCard:function(e,t){var r=e.setList[e.currentSetId].cards.findIndex((function(e){return e.id===t.id}));if(void 0!==r)for(var param in t)o.a.set(e.setList[e.currentSetId].cards[r],param,t[param]);new Date(e.setList[e.currentSetId].lastUpdated).getDate()!==(new Date).getDate()&&(o.a.set(e.setList[e.currentSetId],"newToday",0),o.a.set(e.setList[e.currentSetId],"reviewsToday",0)),t.totalReviews<=1?o.a.set(e.setList[e.currentSetId],"newToday",e.setList[e.currentSetId].newToday?e.setList[e.currentSetId].newToday+1:1):o.a.set(e.setList[e.currentSetId],"reviewsToday",e.setList[e.currentSetId].reviewsToday?e.setList[e.currentSetId].reviewsToday+1:1),o.a.set(e.setList[e.currentSetId],"lastUpdated",Date.now()),e.pauseDbSets||S.updateSet(e.currentUser,{id:e.currentSetId,lastUpdated:e.setList[e.currentSetId].lastUpdated,newToday:e.setList[e.currentSetId].newToday,reviewsToday:e.setList[e.currentSetId].reviewsToday,cards:e.setList[e.currentSetId].cards},"studying card")},deleteCard:function(e,t){var r;for(var n in e.setList)if(e.setList[n].cards&&e.setList[n].cards.find((function(e){return e.id===t}))){r=e.setList[n];break}if(!r)return console.log("No card found by the id",t,"in any deck.");var c=r.cards.filter((function(e){return e.id!==t}));o.a.set(r,"cards",c),o.a.set(r,"lastUpdated",Date.now()),e.pauseDbSets||S.updateSet(e.currentUser,{id:r.id,cards:r.cards,lastUpdated:r.lastUpdated})},moveCard:function(e,t){var r=t.id,n=t.from,c=t.to;if(n==c)return console.log("Same set!");var d=e.setList[n].cards.find((function(e){return e.id===r}));if(d){d.set=c;var f=e.setList[c].cards;f.push(d),o.a.set(e.setList[c],"cards",f),o.a.set(e.setList[c],"lastUpdated",Date.now()),e.pauseDbSets||S.updateSet(e.currentUser,{id:c,cards:e.setList[c].cards,lastUpdated:e.setList[c].lastUpdated},"moving card to new set");var l=e.setList[n].cards.filter((function(e){return e.id!==r}));o.a.set(e.setList[n],"cards",l),o.a.set(e.setList[n],"lastUpdated",Date.now()),e.pauseDbSets||S.updateSet(e.currentUser,{id:e.setList[n].id,cards:e.setList[n].cards,lastUpdated:e.setList[n].lastUpdated},"deleting moved card from old set")}}},actions:{logInAs:function(e,t){var r=e.commit,n=e.state;S.getAllSets(t).then((function(e){var c=e.docs,o=e.empty;if(o&&t===n.currentUser)return console.log("dc"),r("setPauseDbSets",!1);var d={};c.forEach((function(e){var t=e.data();d[t.id]=t}));var v=function(e){if(!d[e].cards)return"continue";d[e].cards=d[e].cards.map((function(t){return f(f({},t),{},{set:parseInt(e)})}))};for(var m in d)v(m);if(!n.currentUser&&o&&(console.log("first"),S.newUser(t)),!o&&t===n.currentUser)for(var w in d)n.setList[w]?d[w].lastUpdated<n.setList[w].lastUpdated&&(alert("OLD SET IN DATABASE. Dumped set ".concat(w," to localStorage.")),l.set("".concat(w),n.setList[w].cards),console.log(),console.log(d[w],n.setList[w])):console.log("Deck "+w+" has been created elsewhere, and will now be loaded.");r("setUsername",t),r("setSetList",d),r("setCurrentSetId",d[l.get("currentSetId")]?l.get("currentSetId"):Object.keys(d)[0]),r("setPauseDbSets",!1)}))},goToNextSet:function(e){var t=e.commit,r=e.state,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=Object.keys(r.setList);if(n&&(c=c.filter((function(e){return v(r.setList[e])>0}))),0!==c.length){var o=c[(c.indexOf(r.currentSetId)+1)%c.length];t("setCurrentSetId",o)}},goToPreviousSet:function(e){var t=e.commit,r=e.state,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=Object.keys(r.setList);if(n&&(c=c.filter((function(e){return v(r.setList[e])>0}))),0!==c.length){var o=c[(c.indexOf(r.currentSetId)-1+c.length)%c.length];t("setCurrentSetId",o)}}}})}},235:function(e,t,r){"use strict";r.r(t),r.d(t,"newUser",(function(){return I})),r.d(t,"updateSet",(function(){return y})),r.d(t,"setSet",(function(){return L})),r.d(t,"deleteSet",(function(){return U})),r.d(t,"getAllSets",(function(){return D}));r(63);var n=r(9),c=(r(61),r(15),r(78),r(36),r(178)),o=r(20),d=r(138),f=Object(c.a)({apiKey:d.ak,authDomain:d.ad,projectId:d.pid,storageBucket:d.sb}),l=Object(o.f)(f),S="users",v="sets";function m(e,t){return new Promise(function(){var r=Object(n.a)(regeneratorRuntime.mark((function r(n){var c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("adding set",t),c=Object(o.c)(l,"".concat(S,"/").concat(e,"/").concat(v,"/").concat(t.id)),r.next=4,Object(o.g)(c,t);case 4:n("set set success!");case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}var w=!1,h=[];function I(e){h.push({type:"newUser",user:e})}function y(e,t,r){h.push({type:"updateSet",user:e,set:t})}function L(e,t){h.push({type:"setSet",user:e,set:t})}function U(e,t){h.push({type:"deleteSet",user:e,setId:t})}setInterval((function(){if(!w&&h.length){w=!0;var e=h.shift();"newUser"===e.type?(t=e.user,new Promise(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(o.c)(l,"".concat(S,"/").concat(t)),e.next=3,Object(o.g)(n,{});case 3:r("create new user success!");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){w=!1,Date.now()})):"updateSet"===e.type?function(e,t){return new Promise(function(){var r=Object(n.a)(regeneratorRuntime.mark((function r(n){var c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=Object(o.c)(l,"".concat(S,"/").concat(e,"/").concat(v,"/").concat(t.id)),r.next=3,Object(o.h)(c,t);case 3:n("update set success!");case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}(e.user,e.set).then((function(t){if("not-found"===t.code)return m(e.user,e.set).then((function(e){w=!1,Date.now()}));w=!1,Date.now()})):"setSet"===e.type?m(e.user,e.set).then((function(e){w=!1,Date.now()})):"deleteSet"===e.type?function(e,t){return new Promise(function(){var r=Object(n.a)(regeneratorRuntime.mark((function r(n){var c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=Object(o.c)(l,"".concat(S,"/").concat(e,"/").concat(v,"/").concat(t)),r.next=3,Object(o.b)(c);case 3:n("delete set successful");case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}(e.user,e.setId).then((function(e){w=!1,Date.now()})):(console.log("invalid db update, skipping..."),w=!1)}var t}),100);var D=function(e){return new Promise(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){var n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(o.a)(l,"".concat(S,"/").concat(e,"/").concat(v)),t.next=3,Object(o.e)(n);case 3:c=t.sent,console.log("got sets",c.docs.map((function(e){return e.data()}))),r(c);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},[[189,32,5,33]]]);