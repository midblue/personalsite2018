(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{286:function(t,e,n){var content=n(321);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(107).default)("7f8e0add",content,!0,{sourceMap:!1})},302:function(t,e,n){"use strict";n.r(e);var r=n(25),o=(n(35),n(12),n(319),n(64),n(66),n(67),n(183).get),d=n(180).getNumberDueInSet,c={components:{},props:{},data:function(){return{isLoading:!1,inputUsername:"",dueReviews:{},setPickerOpen:!1}},computed:Object(r.a)({currentUser:function(){return this.$store.state.currentUser},appState:function(){return this.$store.state.appState},setList:function(){return this.$store.state.setList||[]},setListWithoutCurrentSet:function(){var t=this;return Object.values(this.setList).filter((function(s){return s.id!==t.currentSetId}))},currentSetId:function(){return this.$store.state.currentSetId},currentCards:function(){return this.$store.state.setList[this.$store.state.currentSetId]?this.$store.state.setList[this.$store.state.currentSetId].cards:[]},isMobile:function(){return this.$store.state.isMobile}},"appState",(function(){return this.$store.state.appState})),watch:{currentUser:function(t){this.isLoading=!1;var e=o("currentSetId");e&&""!==e&&this.$store.commit("setCurrentSetId",e),t||this.$nextTick(this.focusInput)},setList:function(){this.isLoading=!1,this.updateDueReviews()},currentCards:function(){this.updateDueReviews()},currentSetId:function(){this.isLoading=!1,this.updateDueReviews()},setPickerOpen:function(t){t?window.addEventListener("click",this.checkClickToClose):window.removeEventListener("click",this.checkClickToClose)}},mounted:function(){window.addEventListener("keydown",this.keyDown),this.updateDueReviews(),window.setInterval(this.updateDueReviews,6e5);var t=o("currentUser");t&&""!==t?(this.$store.dispatch("logInAs",t),this.isLoading=!0):this.$nextTick(this.focusInput)},beforeDestroy:function(){window.removeEventListener("keydown",this.keyDown)},methods:{logInAs:function(){""!==this.inputUserName&&(this.isLoading=!0,this.$store.dispatch("logInAs",this.inputUsername))},logOut:function(){this.$store.commit("logOut")},keyDown:function(t){if(this.currentUser)return this.updateDueReviews();"Enter"===t.key&&this.logInAs()},focusInput:function(){this.$refs.usernameInput.focus()},switchSet:function(t){this.$store.commit("setCurrentSetId",t)},updateDueReviews:function(){for(var t in this.dueReviews={},this.setList)new Date(this.setList[t].lastUpdated).getDate()!==(new Date).getDate()&&this.$store.commit("resetSetDay",t),this.dueReviews[t]=d(this.setList[t])},checkClickToClose:function(t){t.path.includes(this.$refs.mainButton)||(this.setPickerOpen=!1)},uploaded:function(t){var e=this,n=t.target.files[0],r=new FileReader;r.onload=function(t){var n=JSON.parse(t.target.result);e.$store.commit("uploadSet",n)},r.readAsText(n)}}},l=(n(320),n(52)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"userandsetpicker",class:{fullscreen:!t.currentUser||t.isLoading,vertical:!t.currentUser}},[n("input",{ref:"uploader",staticStyle:{display:"none"},attrs:{type:"file",accept:".json"},on:{change:t.uploaded}}),t._v(" "),t.currentUser||t.isLoading?t.isLoading?[n("div",{staticClass:"sub"},[t._v("Loading...")])]:[t.isMobile?n("div",{ref:"mainButton",staticClass:"buttonlist fullheight"},["user"===t.appState?n("button",{staticClass:"mainbutton",on:{click:function(e){return t.$store.commit("setAppState","study")}}},[t._v("\n        ← Back to Studying\n      ")]):t.setList[t.currentSetId]?n("button",{key:t.setList[t.currentSetId].id,staticClass:"mainbutton",class:{open:t.setPickerOpen},staticStyle:{position:"relative"},on:{click:function(e){t.setPickerOpen=!t.setPickerOpen}}},[t._v("\n        "+t._s(t.setList[t.currentSetId].name)+" ▾\n        "),t.setPickerOpen?n("div",{staticClass:"secondarypanel"},[t._l(t.setListWithoutCurrentSet,(function(e){return n("button",{key:e.id,class:{duecards:t.dueReviews[e.id]>0},on:{click:function(n){return t.switchSet(e.id)}}},[t._v("\n            "+t._s(e.name)+"\n          ")])})),t._v(" "),n("button",{on:{click:function(e){return t.$refs.uploader.click()}}},[t._v("Upload Set")]),t._v(" "),n("button",{on:{click:function(e){return t.$store.commit("addSet")}}},[t._v("+ Add Set")])],2):t._e()]):n("button",{on:{click:function(e){return t.$store.commit("addSet")}}},[t._v("\n        + Add Set\n      ")])]):n("div",{staticClass:"buttonlist fullheight inlineblock"},[t._l(t.setList,(function(e){return n("button",{key:e.id,class:{active:parseInt(t.currentSetId)===parseInt(e.id)&&"user"!==t.appState},on:{click:function(n){return t.switchSet(e.id)}}},[t._v("\n        "+t._s(e.name)+"\n        "),!t.isMobile&&t.dueReviews[e.id]>0&&(parseInt(t.currentSetId)!==parseInt(e.id)||"user"===t.appState)?n("span",{staticClass:"sub"},[t._v("\n          ("+t._s(t.dueReviews[e.id])+")\n        ")]):t._e()])})),t._v(" "),n("button",{on:{click:function(e){return t.$refs.uploader.click()}}},[t._v("Upload Set")]),t._v(" "),n("button",{on:{click:function(e){return t.$store.commit("addSet")}}},[t._v("Add Set")])],2),t._v(" "),n("div",{staticClass:"flex-ai"},[n("div",{staticClass:"buttonlist fullheight inlineblock"},[n("button",{class:{active:"user"===t.appState},on:{click:function(e){return t.$store.commit("setAppState","user")}}},[t._v("\n          "+t._s(t.currentUser))]),t.isMobile?t._e():n("button",{on:{click:t.logOut}},[t._v("Log out")])])])]:[t._m(0),t._v(" "),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputUsername,expression:"inputUsername"}],ref:"usernameInput",staticClass:"username",attrs:{placeholder:"username"},domProps:{value:t.inputUsername},on:{input:function(e){e.target.composing||(t.inputUsername=e.target.value)}}})]),t._v(" "),n("div",[n("button",{staticClass:"loginbutton",on:{click:t.logInAs}},[t._v("Go")])])]],2)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[n("b",[t._v("Enter your username.")])])}],!1,null,"539d2422",null);e.default=component.exports},319:function(t,e,n){var r=n(5),o=n(185).values;r({target:"Object",stat:!0},{values:function(t){return o(t)}})},320:function(t,e,n){"use strict";n(286)},321:function(t,e,n){var r=n(106)(!1);r.push([t.i,'.userandsetpicker[data-v-539d2422]{display:flex;align-items:center;justify-content:space-between;width:100%;background:#333;height:43px;padding:3px 50px 0;position:relative;z-index:10}@media(max-width:768px){.userandsetpicker[data-v-539d2422]{height:40px;padding:0 20px}}.userandsetpicker.fullscreen[data-v-539d2422]{height:100vh;position:fixed;justify-content:center;background:#eee}.userandsetpicker.vertical[data-v-539d2422]{flex-direction:column}.userandsetpicker.vertical>*[data-v-539d2422]{margin-bottom:20px}.username[data-v-539d2422]{border-radius:7px;border:1px solid #eee;padding:10px}.loginbutton[data-v-539d2422],.username[data-v-539d2422]{font-size:1.2rem;font-family:"Avenir Neue","Avenir","Helvetica",sans-serif}.loginbutton[data-v-539d2422]{border-radius:7px;padding:20px 50px}button:not(.active).duecards[data-v-539d2422]{background:#fd8}.inlineblock[data-v-539d2422]{display:inline-block}.flex-ai[data-v-539d2422]{display:flex;align-items:center;justify-content:center;height:100%}.buttonlist[data-v-539d2422]{overflow:visible}.buttonlist.fullheight[data-v-539d2422]{border-radius:0;border:none;height:100%}.buttonlist.fullheight button[data-v-539d2422]{background:hsla(0,0%,100%,0);box-shadow:none;border:none;transition:background .2s;color:#fff}@media(min-width:769px){.buttonlist.fullheight button[data-v-539d2422]{padding:0 15px 2px;border-top-right-radius:5px;border-top-left-radius:5px}}.buttonlist.fullheight button[data-v-539d2422]:hover{background:rgba(0,153,204,.3)}.buttonlist.fullheight button.active[data-v-539d2422]{background:#fff;color:#000}@media(max-width:768px){.buttonlist.fullheight button[data-v-539d2422]{background:hsla(0,0%,100%,.2);margin-right:3px}}.buttonlist.fullheight>*[data-v-539d2422]{height:100%;border-radius:0}button.mainbutton[data-v-539d2422]{position:relative;z-index:100;min-width:25vw;box-shadow:0 0 1000px 1000px transparent;transition:box-shadow .3s}button.open[data-v-539d2422]{border-bottom-right-radius:0!important;border-bottom-left-radius:0!important;box-shadow:0 0 1000px 1000px rgba(0,0,0,.3);background:#fff!important;color:#000!important}.secondarypanel[data-v-539d2422]{position:absolute;top:100%;left:0;width:100%}.secondarypanel button[data-v-539d2422]{width:100%;border-radius:0;border:0;border-top:1px solid #eee;background:#ddd!important;color:#000!important}.secondarypanel button[data-v-539d2422]:first-of-type{border-radius:0}.secondarypanel button[data-v-539d2422]:last-of-type{border-radius:0;border-bottom-right-radius:10px;border-bottom-left-radius:10px}',""]),t.exports=r}}]);